{"version":3,"file":"Counter.js","sourceRoot":"","sources":["../../../../../src/.internal/core/util/Counter.ts"],"names":[],"mappings":"AAQA;;GAEG;AACH;IAKC,oBAAY,CAAa;QAJzB;;;;mBAA0B,CAAC;WAAC;QAC5B;;;;mBAA+B,KAAK;WAAC;QACrC;;;;;WAA+B;QAG9B,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;IACnB,CAAC;;;;;eAED;YACC,EAAE,IAAI,CAAC,KAAK,CAAC;QACd,CAAC;;;;;;eAED;YACC,EAAE,IAAI,CAAC,KAAK,CAAC;YAEb,IAAI,IAAI,CAAC,KAAK,IAAI,CAAC,EAAE;gBACpB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;oBACpB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;oBACtB,IAAI,CAAC,QAAQ,EAAE,CAAC;iBAChB;aACD;QACF,CAAC;;IACF,iBAAC;AAAD,CAAC,AAvBD,IAuBC","sourcesContent":["/**\n * @ignore\n */\nexport interface ICounterRef {\n\tincrementRef(): void;\n\tdecrementRef(): void;\n}\n\n/**\n * @ignore\n */\nexport class CounterRef {\n\tprotected _refs: number = 0;\n\tprotected _disposed: boolean = false;\n\tprotected _dispose: () => void;\n\n\tconstructor(f: () => void) {\n\t\tthis._dispose = f;\n\t}\n\n\tincrementRef() {\n\t\t++this._refs;\n\t}\n\n\tdecrementRef() {\n\t\t--this._refs;\n\n\t\tif (this._refs <= 0) {\n\t\t\tif (!this._disposed) {\n\t\t\t\tthis._disposed = true;\n\t\t\t\tthis._dispose();\n\t\t\t}\n\t\t}\n\t}\n}\n"]}