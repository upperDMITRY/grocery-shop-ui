{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dcurchin/Desktop/final/grocery-shop-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/dcurchin/Desktop/final/grocery-shop-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import HomePage from'./pages/home/HomePage';import{BrowserRouter as Router,Switch,Route,Redirect}from'react-router-dom';import LoginPage from'./pages/login/LoginPage';import RegistrationPage from'./pages/registration/RegistrationPage';import CartPage from'./pages/cart/CartPage';import ProductDetailsPage from'./pages/productDetails/ProductDetailsPage';import AdminPanelPage from'./pages/adminPanel/AdminPanelPage';import CheckoutPage from'./pages/checkout/CheckoutPage';import FingerprintJS from'@fingerprintjs/fingerprintjs';import{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{setIsAuth,setVisitorId}from'./redux/slices/authSlice';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var token=useSelector(function(state){return state.auth.token;});var email=useSelector(function(state){return state.auth.email;});var dispatch=useDispatch();var getUniqueVisitorId=function getUniqueVisitorId(visitorId){axios({method:'POST',url:'/api/dashboard/visitor',data:{visitorId:visitorId}});};useEffect(function(){// Initialize an agent at application startup.\nvar fpPromise=FingerprintJS.load();_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var fp,result,visitorId;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fpPromise;case 2:fp=_context.sent;_context.next=5;return fp.get();case 5:result=_context.sent;// This is the visitor identifier:\nvisitorId=result.visitorId;dispatch(setVisitorId(visitorId));if(!localStorage.visitorId){localStorage.setItem('visitorId',visitorId);getUniqueVisitorId(visitorId);console.log(visitorId);}case 9:case\"end\":return _context.stop();}}},_callee);}))();if(token){dispatch(setIsAuth({token:token,email:email,isAuth:true}));}// eslint-disable-next-line\n},[]);return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/account/login\",children:/*#__PURE__*/_jsx(LoginPage,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/account/logout\",children:/*#__PURE__*/_jsx(Redirect,{to:\"/\"})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/account/register\",children:/*#__PURE__*/_jsx(RegistrationPage,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/cart\",children:/*#__PURE__*/_jsx(CartPage,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/products/:productId\",children:/*#__PURE__*/_jsx(ProductDetailsPage,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/checkout\",children:/*#__PURE__*/_jsx(CheckoutPage,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:['/admin/dashboard','/admin/products','/admin/products/addNewProduct','/admin/products/:productId','/admin/users','/admin/users/addNewUser','/admin/users/:userEmail'],children:/*#__PURE__*/_jsx(AdminPanelPage,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(HomePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/\",children:/*#__PURE__*/_jsx(Redirect,{to:\"/\"})})]})});};export default App;","map":{"version":3,"sources":["/Users/dcurchin/Desktop/final/grocery-shop-ui/src/App.js"],"names":["HomePage","BrowserRouter","Router","Switch","Route","Redirect","LoginPage","RegistrationPage","CartPage","ProductDetailsPage","AdminPanelPage","CheckoutPage","FingerprintJS","useEffect","useDispatch","useSelector","setIsAuth","setVisitorId","axios","App","token","state","auth","email","dispatch","getUniqueVisitorId","visitorId","method","url","data","fpPromise","load","fp","get","result","localStorage","setItem","console","log","isAuth"],"mappings":"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","sourcesContent":["import HomePage from './pages/home/HomePage';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect,\r\n} from 'react-router-dom';\r\nimport LoginPage from './pages/login/LoginPage';\r\nimport RegistrationPage from './pages/registration/RegistrationPage';\r\nimport CartPage from './pages/cart/CartPage';\r\nimport ProductDetailsPage from './pages/productDetails/ProductDetailsPage';\r\nimport AdminPanelPage from './pages/adminPanel/AdminPanelPage';\r\nimport CheckoutPage from './pages/checkout/CheckoutPage';\r\nimport FingerprintJS from '@fingerprintjs/fingerprintjs';\r\nimport { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { setIsAuth, setVisitorId } from './redux/slices/authSlice';\r\nimport axios from 'axios';\r\n\r\nconst App = () => {\r\n  const token = useSelector((state) => state.auth.token);\r\n  const email = useSelector((state) => state.auth.email);\r\n  const dispatch = useDispatch();\r\n\r\n  const getUniqueVisitorId = (visitorId) => {\r\n    axios({\r\n      method: 'POST',\r\n      url: '/api/dashboard/visitor',\r\n      data: { visitorId },\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Initialize an agent at application startup.\r\n    const fpPromise = FingerprintJS.load();\r\n\r\n    (async () => {\r\n      // Get the visitor identifier when you need it.\r\n      const fp = await fpPromise;\r\n      const result = await fp.get();\r\n\r\n      // This is the visitor identifier:\r\n      const visitorId = result.visitorId;\r\n      dispatch(setVisitorId(visitorId));\r\n      if (!localStorage.visitorId) {\r\n        localStorage.setItem('visitorId', visitorId);\r\n        getUniqueVisitorId(visitorId);\r\n        console.log(visitorId);\r\n      }\r\n    })();\r\n\r\n    if (token) {\r\n      dispatch(setIsAuth({ token, email, isAuth: true }));\r\n    }\r\n    // eslint-disable-next-line\r\n  }, []);\r\n  return (\r\n    <Router>\r\n      <Switch>\r\n        <Route exact path=\"/account/login\">\r\n          <LoginPage />\r\n        </Route>\r\n        <Route exact path=\"/account/logout\">\r\n          <Redirect to=\"/\" />\r\n        </Route>\r\n        <Route exact path=\"/account/register\">\r\n          <RegistrationPage />\r\n        </Route>\r\n        <Route exact path=\"/cart\">\r\n          <CartPage />\r\n        </Route>\r\n        <Route exact path=\"/products/:productId\">\r\n          <ProductDetailsPage />\r\n        </Route>\r\n        <Route exact path=\"/checkout\">\r\n          <CheckoutPage />\r\n        </Route>\r\n        <Route\r\n          exact\r\n          path={[\r\n            '/admin/dashboard',\r\n            '/admin/products',\r\n            '/admin/products/addNewProduct',\r\n            '/admin/products/:productId',\r\n            '/admin/users',\r\n            '/admin/users/addNewUser',\r\n            '/admin/users/:userEmail',\r\n          ]}\r\n        >\r\n          <AdminPanelPage />\r\n        </Route>\r\n        <Route exact path=\"/\">\r\n          <HomePage />\r\n        </Route>\r\n        <Route path=\"/\">\r\n          <Redirect to=\"/\" />\r\n        </Route>\r\n      </Switch>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}