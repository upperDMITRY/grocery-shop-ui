{"ast":null,"code":"var _jsxFileName = \"/Users/dcurchin/Desktop/final/grocery-shop-ui/src/pages/adminPanel/dashboard/DashboardContainer.jsx\",\n  _s = $RefreshSig$();\nimport { Box } from '@mui/system';\nimport axios from 'axios';\nimport { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport Dashboard from '../../../components/adminPanel/dashboard/Dashboard';\nimport DashboardError from '../../../components/adminPanel/dashboard/DashboardError';\nimport PanelTitle from '../../../components/adminPanel/dashboard/PanelTitle';\nimport Spinner from '../../../components/common/Spinner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DashboardContainer = _ref => {\n  _s();\n  let {\n    setActive,\n    active\n  } = _ref;\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [data, setData] = useState({\n    newUserRegistrations: 0,\n    uniqueUsers: 0,\n    newOrders: 0,\n    incompleteOrders: 0,\n    mostSoldProducts: []\n  });\n  const token = useSelector(state => state.auth.token);\n  useEffect(() => {\n    setActive('dashboard');\n  }, [setActive]);\n  const getData = async () => {\n    try {\n      const response = await axios({\n        method: 'GET',\n        url: '/api/dashboard',\n        headers: {\n          Authorization: token\n        }\n      });\n      if (response.status === 200) {\n        setIsLoading(false);\n        setData(response.data);\n      }\n    } catch (err) {\n      if (axios.isAxiosError(err)) {\n        if (err && err.response) {\n          if (err.response.data.error) {\n            setError(err.response.data.error);\n          } else if (err.response.data.status) {\n            setError(err.response.data.status);\n          }\n          setIsLoading(false);\n        }\n      }\n    }\n  };\n  useEffect(() => {\n    getData();\n    // eslint-disable-next-line\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(PanelTitle, {\n      title: 'Dashboard',\n      icon: active\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(Spinner, {\n      margin: '200px',\n      size: '100px'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this) : error ? /*#__PURE__*/_jsxDEV(DashboardError, {\n      error: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Dashboard, {\n      data: data,\n      active: active\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(DashboardContainer, \"f/iffvAWU03JrwGdbpCE41xL92Y=\", false, function () {\n  return [useSelector];\n});\n_c = DashboardContainer;\nexport default DashboardContainer;\nvar _c;\n$RefreshReg$(_c, \"DashboardContainer\");","map":{"version":3,"names":["Box","axios","useEffect","useState","useSelector","Dashboard","DashboardError","PanelTitle","Spinner","jsxDEV","_jsxDEV","DashboardContainer","_ref","_s","setActive","active","isLoading","setIsLoading","error","setError","data","setData","newUserRegistrations","uniqueUsers","newOrders","incompleteOrders","mostSoldProducts","token","state","auth","getData","response","method","url","headers","Authorization","status","err","isAxiosError","children","title","icon","fileName","_jsxFileName","lineNumber","columnNumber","margin","size","_c","$RefreshReg$"],"sources":["/Users/dcurchin/Desktop/final/grocery-shop-ui/src/pages/adminPanel/dashboard/DashboardContainer.jsx"],"sourcesContent":["import { Box } from '@mui/system';\nimport axios from 'axios';\nimport { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport Dashboard from '../../../components/adminPanel/dashboard/Dashboard';\nimport DashboardError from '../../../components/adminPanel/dashboard/DashboardError';\nimport PanelTitle from '../../../components/adminPanel/dashboard/PanelTitle';\nimport Spinner from '../../../components/common/Spinner';\n\nconst DashboardContainer = ({ setActive, active }) => {\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [data, setData] = useState({\n    newUserRegistrations: 0,\n    uniqueUsers: 0,\n    newOrders: 0,\n    incompleteOrders: 0,\n    mostSoldProducts: [],\n  });\n\n  const token = useSelector((state) => state.auth.token);\n\n  useEffect(() => {\n    setActive('dashboard');\n  }, [setActive]);\n\n  const getData = async () => {\n    try {\n      const response = await axios({\n        method: 'GET',\n        url: '/api/dashboard',\n        headers: { Authorization: token },\n      });\n      if (response.status === 200) {\n        setIsLoading(false);\n        setData(response.data);\n      }\n    } catch (err) {\n      if (axios.isAxiosError(err)) {\n        if (err && err.response) {\n          if (err.response.data.error) {\n            setError(err.response.data.error);\n          } else if (err.response.data.status) {\n            setError(err.response.data.status);\n          }\n          setIsLoading(false);\n        }\n      }\n    }\n  };\n  useEffect(() => {\n    getData();\n    // eslint-disable-next-line\n  }, []);\n\n  return (\n    <Box>\n      <PanelTitle title={'Dashboard'} icon={active} />\n      {isLoading ? (\n        <Spinner margin={'200px'} size={'100px'} />\n      ) : error ? (\n        <DashboardError error={error} />\n      ) : (\n        <Dashboard data={data} active={active} />\n      )}\n    </Box>\n  );\n};\n\nexport default DashboardContainer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}