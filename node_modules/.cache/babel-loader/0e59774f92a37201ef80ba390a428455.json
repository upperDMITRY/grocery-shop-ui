{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { ColumnSeries } from \"./ColumnSeries\";\nimport { Candlestick } from \"./Candlestick\";\nimport { Template } from \"../../../core/util/Template\";\nimport { ListTemplate } from \"../../../core/util/List\";\nimport * as $utils from \"../../../core/util/Utils\";\nimport * as $array from \"../../../core/util/Array\";\n/**\r\n * Candlestick series.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/candlestick-series/} for more info\r\n * @important\r\n */\nvar CandlestickSeries = /** @class */function (_super) {\n  __extends(CandlestickSeries, _super);\n  function CandlestickSeries() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    /**\r\n     * A list of candles in the series.\r\n     *\r\n     * `columns.template` can be used to configure candles.\r\n     *\r\n     * @default new ListTemplate<Candlestick>\r\n     */\n    Object.defineProperty(_this, \"columns\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: new ListTemplate(Template.new({\n        themeTags: [\"autocolor\"]\n      }), function () {\n        return Candlestick._new(_this._root, {\n          themeTags: $utils.mergeTags(_this.columns.template.get(\"themeTags\", []), [\"candlestick\", \"series\", \"column\"])\n        }, [_this.columns.template]);\n      })\n    });\n    return _this;\n  }\n  Object.defineProperty(CandlestickSeries.prototype, \"_afterNew\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      this.valueFields.push(\"lowValueX\", \"lowValueY\", \"highValueX\", \"highValueY\");\n      this.valueXFields.push(\"lowValueX\", \"highValueX\");\n      this.valueYFields.push(\"lowValueY\", \"highValueY\");\n      this._setRawDefault(\"lowValueXShow\", \"lowValueXWorking\");\n      this._setRawDefault(\"lowValueYShow\", \"lowValueYWorking\");\n      this._setRawDefault(\"highValueXShow\", \"highValueXWorking\");\n      this._setRawDefault(\"highValueYShow\", \"highValueYWorking\");\n      this._setRawDefault(\"lowValueXGrouped\", \"low\");\n      this._setRawDefault(\"lowValueYGrouped\", \"low\");\n      this._setRawDefault(\"highValueXGrouped\", \"high\");\n      this._setRawDefault(\"highValueYGrouped\", \"high\");\n      _super.prototype._afterNew.call(this);\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n  Object.defineProperty(CandlestickSeries.prototype, \"makeColumn\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (dataItem, listTemplate) {\n      var column = this.mainContainer.children.push(listTemplate.make());\n      column._setDataItem(dataItem);\n      listTemplate.push(column);\n      return column;\n    }\n  });\n  Object.defineProperty(CandlestickSeries.prototype, \"_updateGraphics\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (dataItem, previousDataItem) {\n      _super.prototype._updateGraphics.call(this, dataItem, previousDataItem);\n      var xAxis = this.getRaw(\"xAxis\");\n      var yAxis = this.getRaw(\"yAxis\");\n      var baseAxis = this.getRaw(\"baseAxis\");\n      var vcy = this.get(\"vcy\", 1);\n      var vcx = this.get(\"vcx\", 1);\n      var lx0;\n      var lx1;\n      var ly0;\n      var ly1;\n      var hx0;\n      var hx1;\n      var hy0;\n      var hy1;\n      var locationX = this.get(\"locationX\", dataItem.get(\"locationX\", 0.5));\n      var locationY = this.get(\"locationY\", dataItem.get(\"locationY\", 0.5));\n      var openLocationX = this.get(\"openLocationX\", dataItem.get(\"openLocationX\", locationX));\n      var openLocationY = this.get(\"openLocationY\", dataItem.get(\"openLocationY\", locationY));\n      var orientation;\n      if (yAxis === baseAxis) {\n        var open_1 = xAxis.getDataItemPositionX(dataItem, this._xOpenField, 1, vcx);\n        var close_1 = xAxis.getDataItemPositionX(dataItem, this._xField, 1, vcx);\n        lx1 = xAxis.getDataItemPositionX(dataItem, this._xLowField, 1, vcx);\n        hx1 = xAxis.getDataItemPositionX(dataItem, this._xHighField, 1, vcx);\n        hx0 = Math.max(open_1, close_1);\n        lx0 = Math.min(open_1, close_1);\n        var startLocation = this._aLocationY0 + openLocationY - 0.5;\n        var endLocation = this._aLocationY1 + locationY - 0.5;\n        ly0 = yAxis.getDataItemPositionY(dataItem, this._yField, startLocation + (endLocation - startLocation) / 2, vcy);\n        ly1 = ly0;\n        hy0 = ly0;\n        hy1 = ly0;\n        orientation = \"horizontal\";\n      } else {\n        var open_2 = yAxis.getDataItemPositionY(dataItem, this._yOpenField, 1, vcy);\n        var close_2 = yAxis.getDataItemPositionY(dataItem, this._yField, 1, vcy);\n        ly1 = yAxis.getDataItemPositionY(dataItem, this._yLowField, 1, vcy);\n        hy1 = yAxis.getDataItemPositionY(dataItem, this._yHighField, 1, vcy);\n        hy0 = Math.max(open_2, close_2);\n        ly0 = Math.min(open_2, close_2);\n        var startLocation = this._aLocationX0 + openLocationX - 0.5;\n        var endLocation = this._aLocationX1 + locationX - 0.5;\n        lx0 = xAxis.getDataItemPositionX(dataItem, this._xField, startLocation + (endLocation - startLocation) / 2, vcx);\n        lx1 = lx0;\n        hx0 = lx0;\n        hx1 = lx0;\n        orientation = \"vertical\";\n      }\n      this._updateCandleGraphics(dataItem, lx0, lx1, ly0, ly1, hx0, hx1, hy0, hy1, orientation);\n    }\n  });\n  Object.defineProperty(CandlestickSeries.prototype, \"_updateCandleGraphics\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (dataItem, lx0, lx1, ly0, ly1, hx0, hx1, hy0, hy1, orientation) {\n      var column = dataItem.get(\"graphics\");\n      if (column) {\n        var pl0_1 = this.getPoint(lx0, ly0);\n        var pl1_1 = this.getPoint(lx1, ly1);\n        var ph0_1 = this.getPoint(hx0, hy0);\n        var ph1_1 = this.getPoint(hx1, hy1);\n        var x_1 = column.x();\n        var y_1 = column.y();\n        column.set(\"lowX0\", pl0_1.x - x_1);\n        column.set(\"lowY0\", pl0_1.y - y_1);\n        column.set(\"lowX1\", pl1_1.x - x_1);\n        column.set(\"lowY1\", pl1_1.y - y_1);\n        column.set(\"highX0\", ph0_1.x - x_1);\n        column.set(\"highY0\", ph0_1.y - y_1);\n        column.set(\"highX1\", ph1_1.x - x_1);\n        column.set(\"highY1\", ph1_1.y - y_1);\n        column.set(\"orientation\", orientation);\n        var rangeGraphics = dataItem.get(\"rangeGraphics\");\n        if (rangeGraphics) {\n          $array.each(rangeGraphics, function (column) {\n            column.set(\"lowX0\", pl0_1.x - x_1);\n            column.set(\"lowY0\", pl0_1.y - y_1);\n            column.set(\"lowX1\", pl1_1.x - x_1);\n            column.set(\"lowY1\", pl1_1.y - y_1);\n            column.set(\"highX0\", ph0_1.x - x_1);\n            column.set(\"highY0\", ph0_1.y - y_1);\n            column.set(\"highX1\", ph1_1.x - x_1);\n            column.set(\"highY1\", ph1_1.y - y_1);\n            column.set(\"orientation\", orientation);\n          });\n        }\n      }\n    }\n  });\n  Object.defineProperty(CandlestickSeries.prototype, \"_processAxisRange\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (axisRange) {\n      var _this = this;\n      _super.prototype._processAxisRange.call(this, axisRange);\n      axisRange.columns = new ListTemplate(Template.new({}), function () {\n        return Candlestick._new(_this._root, {\n          themeTags: $utils.mergeTags(axisRange.columns.template.get(\"themeTags\", []), [\"candlestick\", \"series\", \"column\"])\n        }, [_this.columns.template, axisRange.columns.template]);\n      });\n    }\n  });\n  Object.defineProperty(CandlestickSeries, \"className\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: \"CandlestickSeries\"\n  });\n  Object.defineProperty(CandlestickSeries, \"classNames\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: ColumnSeries.classNames.concat([CandlestickSeries.className])\n  });\n  return CandlestickSeries;\n}(ColumnSeries);\nexport { CandlestickSeries };","map":{"version":3,"names":["ColumnSeries","Candlestick","Template","ListTemplate","$utils","$array","CandlestickSeries","_super","__extends","_this","apply","arguments","Object","defineProperty","new","themeTags","_new","_root","mergeTags","columns","template","get","value","valueFields","push","valueXFields","valueYFields","_setRawDefault","prototype","_afterNew","call","dataItem","listTemplate","column","mainContainer","children","make","_setDataItem","previousDataItem","_updateGraphics","xAxis","getRaw","yAxis","baseAxis","vcy","vcx","lx0","lx1","ly0","ly1","hx0","hx1","hy0","hy1","locationX","locationY","openLocationX","openLocationY","orientation","open_1","getDataItemPositionX","_xOpenField","close_1","_xField","_xLowField","_xHighField","Math","max","min","startLocation","_aLocationY0","endLocation","_aLocationY1","getDataItemPositionY","_yField","open_2","_yOpenField","close_2","_yLowField","_yHighField","_aLocationX0","_aLocationX1","_updateCandleGraphics","pl0_1","getPoint","pl1_1","ph0_1","ph1_1","x_1","x","y_1","y","set","rangeGraphics","each","axisRange","_processAxisRange","classNames","concat","className"],"sources":["../../../../../../src/.internal/charts/xy/series/CandlestickSeries.ts"],"sourcesContent":["import { ColumnSeries, IColumnSeriesPrivate, IColumnSeriesSettings, IColumnSeriesDataItem, IColumnSeriesAxisRange } from \"./ColumnSeries\";\nimport type { DataItem } from \"../../../core/render/Component\";\nimport { Candlestick } from \"./Candlestick\";\nimport { Template } from \"../../../core/util/Template\";\nimport { ListTemplate } from \"../../../core/util/List\";\nimport * as $utils from \"../../../core/util/Utils\";\nimport * as $array from \"../../../core/util/Array\";\n\nexport interface ICandlestickSeriesDataItem extends IColumnSeriesDataItem {\n\tlowValueX?: number;\n\tlowValueXWorking?: number;\n\tlowValueXChange?: number;\n\tlowValueXChangePercent?: number;\n\tlowValueXChangeSelection?: number;\n\tlowValueXChangeSelectionPercent?: number;\n\tlowValueXChangePrevious?: number;\n\tlowValueXChangePreviousPercent?: number;\n\tlowValueXWorkingOpen?: number;\n\tlowValueXWorkingClose?: number;\n\n\thighValueY?: number;\n\thighValueYWorking?: number;\n\thighValueYChange?: number;\n\thighValueYChangePercent?: number;\n\thighValueYChangeSelection?: number;\n\thighValueYChangeSelectionPercent?: number;\n\thighValueYChangePrevious?: number;\n\thighValueYChangePreviousPercent?: number;\n\thighValueYWorkingOpen?: number;\n\thighValueYWorkingClose?: number;\n}\n\nexport interface ICandlestickSeriesSettings extends IColumnSeriesSettings {\n\n\t/**\n\t * Input data field for X low value.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/candlestick-series/} for more info\n\t */\n\tlowValueXField?: string;\n\n\t/**\n\t * Input data field for Y low value.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/candlestick-series/} for more info\n\t */\n\tlowValueYField?: string;\n\n\t/**\n\t * Input data field for X high value.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/candlestick-series/} for more info\n\t */\n\thighValueXField?: string;\n\n\t/**\n\t * Input data field for Y high value.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/candlestick-series/} for more info\n\t */\n\thighValueYField?: string;\n\n\t/**\n\t * Display data field for X low value.\n\t */\n\tlowValueXShow?: \"lowValueXWorking\" | \"lowValueXChange\" | \"lowValueXChangePercent\" | \"lowValueXChangeSelection\" | \"lowValueXChangeSelectionPercent\" | \"lowValueXChangePrevious\" | \"lowValueXChangePreviousPercent\";\n\n\t/**\n\t * Display data field for Y low value.\n\t */\n\tlowValueYShow?: \"lowValueYWorking\" | \"lowValueYChange\" | \"lowValueYChangePercent\" | \"lowValueYChangeSelection\" | \"lowValueYChangeSelectionPercent\" | \"lowValueYChangePrevious\" | \"lowValueYChangePreviousPercent\";\n\n\t/**\n\t * Indicates what aggregate value to use for collective data item, when\n\t * aggregating X low values from several data items.\n\t */\n\tlowValueXGrouped?: \"open\" | \"close\" | \"low\" | \"high\" | \"average\" | \"sum\" | \"extreme\";\n\n\t/**\n\t * Indicates what aggregate value to use for collective data item, when\n\t * aggregating Y low values from several data items.\n\t */\n\tlowValueYGrouped?: \"open\" | \"close\" | \"low\" | \"high\" | \"average\" | \"sum\" | \"extreme\";\n\n\t/**\n\t * Display data field for X high value.\n\t */\n\thighValueXShow?: \"highValueXWorking\" | \"highValueXChange\" | \"highValueXChangePercent\" | \"highValueXChangeSelection\" | \"highValueXChangeSelectionPercent\" | \"highValueXChangePrevious\" | \"highValueXChangePreviousPercent\";\n\n\t/**\n\t * Display data field for Y low value.\n\t */\n\thighValueYShow?: \"highValueYWorking\" | \"highValueYChange\" | \"highValueYChangePercent\" | \"highValueYChangeSelection\" | \"highValueYChangeSelectionPercent\" | \"highValueYChangePrevious\" | \"highValueYChangePreviousPercent\";\n\n\t/**\n\t * Indicates what aggregate value to use for collective data item, when\n\t * aggregating X high values from several data items.\n\t */\n\thighValueXGrouped?: \"open\" | \"close\" | \"high\" | \"high\" | \"average\" | \"sum\" | \"extreme\";\n\n\t/**\n\t * Indicates what aggregate value to use for collective data item, when\n\t * aggregating X high values from several data items.\n\t */\n\thighValueYGrouped?: \"open\" | \"close\" | \"high\" | \"high\" | \"average\" | \"sum\" | \"extreme\";\n\n\t/**\n\t * Horizontal location of the low data point relative to its cell.\n\t *\n\t * `0` - beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @default 0.5\n\t */\n\tlowLocationX?: number;\n\n\t/**\n\t * Vertical location of the low data point relative to its cell.\n\t *\n\t * `0` - beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @default 0.5\n\t */\n\tlowLocationY?: number;\n\n\t/**\n\t * Horizontal location of the high data point relative to its cell.\n\t *\n\t * `0` - beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @default 0.5\n\t */\n\thighLocationX?: number;\n\n\t/**\n\t * Vertical location of the high data point relative to its cell.\n\t *\n\t * `0` - beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @default 0.5\n\t */\n\thighLocationY?: number;\n\n}\n\nexport interface ICandlestickSeriesPrivate extends IColumnSeriesPrivate {\n\tlowValueXAverage?: number;\n\tlowValueXCount?: number;\n\tlowValueXSum?: number;\n\tlowValueXAbsoluteSum?: number;\n\tlowValueXLow?: number;\n\tlowValueXHigh?: number;\n\tlowValueXlow?: number;\n\tlowValueXClose?: number;\n\n\tlowValueYAverage?: number;\n\tlowValueYCount?: number;\n\tlowValueYSum?: number;\n\tlowValueYAbsoluteSum?: number;\n\tlowValueYLow?: number;\n\tlowValueYHigh?: number;\n\tlowValueYlow?: number;\n\tlowValueYClose?: number;\n\n\tlowValueXAverageSelection?: number;\n\tlowValueXCountSelection?: number;\n\tlowValueXSumSelection?: number;\n\tlowValueXAbsoluteSumSelection?: number;\n\tlowValueXLowSelection?: number;\n\tlowValueXHighSelection?: number;\n\tlowValueXlowSelection?: number;\n\tlowValueXCloseSelection?: number;\n\n\tlowValueYAverageSelection?: number;\n\tlowValueYCountSelection?: number;\n\tlowValueYSumSelection?: number;\n\tlowValueYAbsoluteSumSelection?: number;\n\tlowValueYLowSelection?: number;\n\tlowValueYHighSelection?: number;\n\tlowValueYlowSelection?: number;\n\tlowValueYCloseSelection?: number;\n\n\thighValueXAverage?: number;\n\thighValueXCount?: number;\n\thighValueXSum?: number;\n\thighValueXAbsoluteSum?: number;\n\thighValueXLow?: number;\n\thighValueXHigh?: number;\n\thighValueXhigh?: number;\n\thighValueXClose?: number;\n\n\thighValueYAverage?: number;\n\thighValueYCount?: number;\n\thighValueYSum?: number;\n\thighValueYAbsoluteSum?: number;\n\thighValueYLow?: number;\n\thighValueYHigh?: number;\n\thighValueYhigh?: number;\n\thighValueYClose?: number;\n\n\thighValueXAverageSelection?: number;\n\thighValueXCountSelection?: number;\n\thighValueXSumSelection?: number;\n\thighValueXAbsoluteSumSelection?: number;\n\thighValueXLowSelection?: number;\n\thighValueXHighSelection?: number;\n\thighValueXhighSelection?: number;\n\thighValueXCloseSelection?: number;\n\n\thighValueYAverageSelection?: number;\n\thighValueYCountSelection?: number;\n\thighValueYSumSelection?: number;\n\thighValueYAbsoluteSumSelection?: number;\n\thighValueYLowSelection?: number;\n\thighValueYHighSelection?: number;\n\thighValueYhighSelection?: number;\n\thighValueYCloseSelection?: number;\n}\n\nexport interface ICandlestickSeriesAxisRange extends IColumnSeriesAxisRange {\n\tcolumns: ListTemplate<Candlestick>\n}\n\n/**\n * Candlestick series.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/candlestick-series/} for more info\n * @important\n */\nexport class CandlestickSeries extends ColumnSeries {\n\n\tdeclare public _settings: ICandlestickSeriesSettings;\n\tdeclare public _privateSettings: ICandlestickSeriesPrivate;\n\tdeclare public _dataItemSettings: ICandlestickSeriesDataItem;\n\tdeclare public _axisRangeType: ICandlestickSeriesAxisRange;\n\n\tpublic static className: string = \"CandlestickSeries\";\n\tpublic static classNames: Array<string> = ColumnSeries.classNames.concat([CandlestickSeries.className]);\n\n\tprotected _afterNew() {\n\t\tthis.valueFields.push(\"lowValueX\", \"lowValueY\", \"highValueX\", \"highValueY\");\n\t\tthis.valueXFields.push(\"lowValueX\", \"highValueX\");\n\t\tthis.valueYFields.push(\"lowValueY\", \"highValueY\");\n\n\t\tthis._setRawDefault(\"lowValueXShow\", \"lowValueXWorking\");\n\t\tthis._setRawDefault(\"lowValueYShow\", \"lowValueYWorking\");\n\n\t\tthis._setRawDefault(\"highValueXShow\", \"highValueXWorking\");\n\t\tthis._setRawDefault(\"highValueYShow\", \"highValueYWorking\");\n\n\t\tthis._setRawDefault(\"lowValueXGrouped\", \"low\");\n\t\tthis._setRawDefault(\"lowValueYGrouped\", \"low\");\n\n\t\tthis._setRawDefault(\"highValueXGrouped\", \"high\");\n\t\tthis._setRawDefault(\"highValueYGrouped\", \"high\");\n\n\t\tsuper._afterNew();\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeColumn(dataItem: DataItem<this[\"_dataItemSettings\"]>, listTemplate: ListTemplate<Candlestick>): Candlestick {\n\t\tconst column = this.mainContainer.children.push(listTemplate.make());\n\t\tcolumn._setDataItem(dataItem);\n\t\tlistTemplate.push(column);\n\t\treturn column;\n\t}\n\n\t/**\n\t * A list of candles in the series.\n\t *\n\t * `columns.template` can be used to configure candles.\n\t *\n\t * @default new ListTemplate<Candlestick>\n\t */\n\tpublic readonly columns: ListTemplate<Candlestick> = new ListTemplate(\n\t\tTemplate.new({\n\t\t\tthemeTags: [\"autocolor\"]\n\t\t}),\n\t\t() => Candlestick._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.columns.template.get(\"themeTags\", []), [\"candlestick\", \"series\", \"column\"])\n\t\t}, [this.columns.template])\n\t);\n\n\tprotected _updateGraphics(dataItem: DataItem<this[\"_dataItemSettings\"]>, previousDataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper._updateGraphics(dataItem, previousDataItem);\n\n\t\tconst xAxis = this.getRaw(\"xAxis\");\n\t\tconst yAxis = this.getRaw(\"yAxis\");\n\t\tconst baseAxis = this.getRaw(\"baseAxis\");\n\n\t\tlet vcy = this.get(\"vcy\", 1);\n\t\tlet vcx = this.get(\"vcx\", 1);\n\n\t\tlet lx0: number;\n\t\tlet lx1: number;\n\t\tlet ly0: number;\n\t\tlet ly1: number;\n\n\t\tlet hx0: number;\n\t\tlet hx1: number;\n\t\tlet hy0: number;\n\t\tlet hy1: number;\n\n\t\tlet locationX = this.get(\"locationX\", dataItem.get(\"locationX\", 0.5));\n\t\tlet locationY = this.get(\"locationY\", dataItem.get(\"locationY\", 0.5));\n\n\t\tlet openLocationX = this.get(\"openLocationX\", dataItem.get(\"openLocationX\", locationX));\n\t\tlet openLocationY = this.get(\"openLocationY\", dataItem.get(\"openLocationY\", locationY));\n\n\t\tlet orientation: \"horizontal\" | \"vertical\";\n\n\t\tif (yAxis === baseAxis) {\n\t\t\tlet open = xAxis.getDataItemPositionX(dataItem, this._xOpenField, 1, vcx);\n\t\t\tlet close = xAxis.getDataItemPositionX(dataItem, this._xField, 1, vcx);\n\n\t\t\tlx1 = xAxis.getDataItemPositionX(dataItem, this._xLowField, 1, vcx);\n\t\t\thx1 = xAxis.getDataItemPositionX(dataItem, this._xHighField, 1, vcx);\n\n\t\t\thx0 = Math.max(open, close);\n\t\t\tlx0 = Math.min(open, close);\n\n\t\t\tlet startLocation = this._aLocationY0 + openLocationY - 0.5;\n\t\t\tlet endLocation = this._aLocationY1 + locationY - 0.5;\n\n\t\t\tly0 = yAxis.getDataItemPositionY(dataItem, this._yField, startLocation + (endLocation - startLocation) / 2, vcy);\n\t\t\tly1 = ly0;\n\t\t\thy0 = ly0;\n\t\t\thy1 = ly0;\n\n\t\t\torientation = \"horizontal\";\n\t\t}\n\t\telse {\n\t\t\tlet open = yAxis.getDataItemPositionY(dataItem, this._yOpenField, 1, vcy);\n\t\t\tlet close = yAxis.getDataItemPositionY(dataItem, this._yField, 1, vcy);\n\n\t\t\tly1 = yAxis.getDataItemPositionY(dataItem, this._yLowField, 1, vcy);\n\t\t\thy1 = yAxis.getDataItemPositionY(dataItem, this._yHighField, 1, vcy);\n\n\t\t\thy0 = Math.max(open, close);\n\t\t\tly0 = Math.min(open, close);\n\n\t\t\tlet startLocation = this._aLocationX0 + openLocationX - 0.5;\n\t\t\tlet endLocation = this._aLocationX1 + locationX - 0.5;\n\n\t\t\tlx0 = xAxis.getDataItemPositionX(dataItem, this._xField, startLocation + (endLocation - startLocation) / 2, vcx);\n\t\t\tlx1 = lx0;\n\t\t\thx0 = lx0;\n\t\t\thx1 = lx0;\n\n\t\t\torientation = \"vertical\";\n\t\t}\n\n\t\tthis._updateCandleGraphics(dataItem, lx0, lx1, ly0, ly1, hx0, hx1, hy0, hy1, orientation)\n\t}\n\n\tprotected _updateCandleGraphics(dataItem: DataItem<this[\"_dataItemSettings\"]>, lx0: number, lx1: number, ly0: number, ly1: number, hx0: number, hx1: number, hy0: number, hy1: number, orientation: \"horizontal\" | \"vertical\") {\n\t\tlet column = dataItem.get(\"graphics\") as Candlestick;\n\n\t\tif (column) {\n\t\t\tlet pl0 = this.getPoint(lx0, ly0);\n\t\t\tlet pl1 = this.getPoint(lx1, ly1);\n\n\t\t\tlet ph0 = this.getPoint(hx0, hy0);\n\t\t\tlet ph1 = this.getPoint(hx1, hy1);\n\n\t\t\tlet x = column.x();\n\t\t\tlet y = column.y();\n\n\t\t\tcolumn.set(\"lowX0\", pl0.x - x);\n\t\t\tcolumn.set(\"lowY0\", pl0.y - y);\n\n\t\t\tcolumn.set(\"lowX1\", pl1.x - x);\n\t\t\tcolumn.set(\"lowY1\", pl1.y - y);\n\n\t\t\tcolumn.set(\"highX0\", ph0.x - x);\n\t\t\tcolumn.set(\"highY0\", ph0.y - y);\n\n\t\t\tcolumn.set(\"highX1\", ph1.x - x);\n\t\t\tcolumn.set(\"highY1\", ph1.y - y);\n\n\t\t\tcolumn.set(\"orientation\", orientation);\n\n\t\t\tlet rangeGraphics = dataItem.get(\"rangeGraphics\")!;\n\t\t\tif (rangeGraphics) {\n\t\t\t\t$array.each(rangeGraphics, (column: any) => {\n\t\t\t\t\tcolumn.set(\"lowX0\", pl0.x - x);\n\t\t\t\t\tcolumn.set(\"lowY0\", pl0.y - y);\n\n\t\t\t\t\tcolumn.set(\"lowX1\", pl1.x - x);\n\t\t\t\t\tcolumn.set(\"lowY1\", pl1.y - y);\n\n\t\t\t\t\tcolumn.set(\"highX0\", ph0.x - x);\n\t\t\t\t\tcolumn.set(\"highY0\", ph0.y - y);\n\n\t\t\t\t\tcolumn.set(\"highX1\", ph1.x - x);\n\t\t\t\t\tcolumn.set(\"highY1\", ph1.y - y);\n\n\t\t\t\t\tcolumn.set(\"orientation\", orientation);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _processAxisRange(axisRange: this[\"_axisRangeType\"]) {\n\t\tsuper._processAxisRange(axisRange);\n\t\taxisRange.columns = new ListTemplate(\n\t\t\tTemplate.new({}),\n\t\t\t() => Candlestick._new(this._root, {\n\t\t\t\tthemeTags: $utils.mergeTags(axisRange.columns.template.get(\"themeTags\", []), [\"candlestick\", \"series\", \"column\"]),\n\t\t\t}, [this.columns.template, axisRange.columns.template])\n\t\t);\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}