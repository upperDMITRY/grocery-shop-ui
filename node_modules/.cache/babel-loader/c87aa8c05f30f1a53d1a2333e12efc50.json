{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { Container } from \"../../core/render/Container\";\nimport { p100 } from \"../../core/util/Percent\";\nimport { Graphics } from \"../../core/render/Graphics\";\nimport { Grid } from \"./axes/Grid\";\n//import { Animations } from \"../core/util/Animation\";\nimport * as $type from \"../../core/util/Type\";\nimport * as $utils from \"../../core/util/Utils\";\nimport * as $object from \"../../core/util/Object\";\n/**\r\n * Creates a chart cursor for an [[XYChart]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/} for more info\r\n * @important\r\n */\nvar XYCursor = /** @class */function (_super) {\n  __extends(XYCursor, _super);\n  function XYCursor() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    /**\r\n     * A [[Grid]] elment that used for horizontal line of the cursor crosshair.\r\n     *\r\n     * @default Grid.new()\r\n     */\n    Object.defineProperty(_this, \"lineX\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: _this.children.push(Grid.new(_this._root, {\n        themeTags: [\"x\"]\n      }))\n    });\n    /**\r\n     * A [[Grid]] elment that used for horizontal line of the cursor crosshair.\r\n     *\r\n     * @default Grid.new()\r\n     */\n    Object.defineProperty(_this, \"lineY\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: _this.children.push(Grid.new(_this._root, {\n        themeTags: [\"y\"]\n      }))\n    });\n    /**\r\n     * An element that represents current selection.\r\n     *\r\n     * @default Graphics.new()\r\n     */\n    Object.defineProperty(_this, \"selection\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: _this.children.push(Graphics.new(_this._root, {\n        themeTags: [\"selection\", \"cursor\"],\n        layer: 20\n      }))\n    });\n    Object.defineProperty(_this, \"_movePoint\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(_this, \"_lastPoint\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: {\n        x: 0,\n        y: 0\n      }\n    });\n    Object.defineProperty(_this, \"_tooltipX\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(_this, \"_tooltipY\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    /**\r\n     * A chart cursor is attached to.\r\n     */\n    Object.defineProperty(_this, \"chart\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    return _this;\n  }\n  Object.defineProperty(XYCursor.prototype, \"_afterNew\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var _this = this;\n      this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"xy\", \"cursor\"]);\n      _super.prototype._afterNew.call(this);\n      this.setAll({\n        \"width\": p100,\n        height: p100,\n        isMeasured: true,\n        position: \"absolute\"\n      });\n      this.states.create(\"hidden\", {\n        visible: true,\n        opacity: 0\n      });\n      this._drawLines();\n      this.setPrivateRaw(\"visible\", false);\n      this._disposers.push(this.setTimeout(function () {\n        _this.setPrivate(\"visible\", true);\n      }, 500));\n    }\n  });\n  Object.defineProperty(XYCursor.prototype, \"_prepareChildren\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var _this = this;\n      _super.prototype._prepareChildren.call(this);\n      if (this.isDirty(\"xAxis\")) {\n        this._tooltipX = false;\n        var xAxis = this.get(\"xAxis\");\n        if (xAxis) {\n          var tooltip_1 = xAxis.get(\"tooltip\");\n          if (tooltip_1) {\n            this._tooltipX = true;\n            tooltip_1.on(\"pointTo\", function () {\n              _this._updateXLine(tooltip_1);\n            });\n          }\n        }\n      }\n      if (this.isDirty(\"yAxis\")) {\n        this._tooltipY = false;\n        var yAxis = this.get(\"yAxis\");\n        if (yAxis) {\n          var tooltip_2 = yAxis.get(\"tooltip\");\n          if (tooltip_2) {\n            this._tooltipY = true;\n            tooltip_2.on(\"pointTo\", function () {\n              _this._updateYLine(tooltip_2);\n            });\n          }\n        }\n      }\n    }\n  });\n  Object.defineProperty(XYCursor.prototype, \"_updateChildren\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      _super.prototype._updateChildren.call(this);\n      if (this.isDirty(\"positionX\") || this.isDirty(\"positionY\")) {\n        this._movePoint = this.toGlobal(this._getPoint(this.get(\"positionX\", 0), this.get(\"positionY\", 0)));\n        this.handleMove();\n      }\n    }\n  });\n  Object.defineProperty(XYCursor.prototype, \"_updateXLine\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (tooltip) {\n      this.lineX.animate({\n        key: \"x\",\n        to: this._display.toLocal(tooltip.get(\"pointTo\", {\n          x: 0,\n          y: 0\n        })).x,\n        duration: tooltip.get(\"animationDuration\", 0),\n        easing: tooltip.get(\"animationEasing\")\n      });\n    }\n  });\n  Object.defineProperty(XYCursor.prototype, \"_updateYLine\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (tooltip) {\n      this.lineY.animate({\n        key: \"y\",\n        to: this._display.toLocal(tooltip.get(\"pointTo\", {\n          x: 0,\n          y: 0\n        })).y,\n        duration: tooltip.get(\"animationDuration\", 0),\n        easing: tooltip.get(\"animationEasing\")\n      });\n    }\n  });\n  Object.defineProperty(XYCursor.prototype, \"_drawLines\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var _this = this;\n      this.lineX.set(\"draw\", function (display) {\n        display.moveTo(0, 0);\n        display.lineTo(0, _this.height());\n      });\n      this.lineY.set(\"draw\", function (display) {\n        display.moveTo(0, 0);\n        display.lineTo(_this.width(), 0);\n      });\n    }\n  });\n  Object.defineProperty(XYCursor.prototype, \"_setChart\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (chart) {\n      var _this = this;\n      this.chart = chart;\n      var plotContainer = chart.plotContainer;\n      this.events.on(\"boundschanged\", function () {\n        _this._disposers.push(_this.setTimeout(function () {\n          if (_this.get(\"alwaysShow\")) {\n            _this._movePoint = _this.toGlobal(_this._getPoint(_this.get(\"positionX\", 0), _this.get(\"positionY\", 0)));\n            _this.handleMove();\n          }\n        }, 50));\n      });\n      //this._display.interactive = true;\n      if ($utils.supports(\"touchevents\")) {\n        this._disposers.push(plotContainer.events.on(\"click\", function (event) {\n          if ($utils.isTouchEvent(event.originalEvent)) {\n            _this._handleMove(event.originalEvent);\n          }\n        }));\n      }\n      this._disposers.push(plotContainer.events.on(\"pointerdown\", function (event) {\n        _this._handleCursorDown(event.originalEvent);\n      }));\n      this._disposers.push(plotContainer.events.on(\"globalpointerup\", function (event) {\n        _this._handleCursorUp(event.originalEvent);\n      }));\n      this._disposers.push(plotContainer.events.on(\"globalpointermove\", function (event) {\n        if ($object.keys(plotContainer._downPoints).length == 0 && !event.native) {\n          // Ignore mouse movement if it originates on outside element and\n          // we're not dragging.\n          return;\n        }\n        _this._handleMove(event.originalEvent);\n      }));\n      var parent = this.parent;\n      if (parent) {\n        parent.children.moveValue(this.selection);\n      }\n    }\n  });\n  Object.defineProperty(XYCursor.prototype, \"_inPlot\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (point) {\n      var chart = this.chart;\n      if (chart) {\n        return chart.inPlot(point);\n      }\n      return false;\n    }\n  });\n  Object.defineProperty(XYCursor.prototype, \"_handleCursorDown\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (event) {\n      // TODO: handle multitouch\n      var rootPoint = this._root.documentPointToRoot({\n        x: event.clientX,\n        y: event.clientY\n      });\n      var local = this._display.toLocal(rootPoint);\n      var chart = this.chart;\n      this.selection.set(\"draw\", function () {});\n      if (chart && this._inPlot(local)) {\n        this._downPoint = local;\n        if (this.get(\"behavior\") != \"none\") {\n          this.selection.show();\n          var type = \"selectstarted\";\n          if (this.events.isEnabled(type)) {\n            this.events.dispatch(type, {\n              type: type,\n              target: this\n            });\n          }\n        }\n        var positionX = this._getPosition(local).x;\n        var positionY = this._getPosition(local).y;\n        this.setPrivate(\"downPositionX\", positionX);\n        this.setPrivate(\"downPositionY\", positionY);\n      }\n    }\n  });\n  Object.defineProperty(XYCursor.prototype, \"_handleCursorUp\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (_event) {\n      // TODO: handle multitouch\n      if (this._downPoint) {\n        var behavior = this.get(\"behavior\", \"none\");\n        if (behavior != \"none\") {\n          if (behavior.charAt(0) === \"z\") {\n            this.selection.hide();\n          }\n          var userPositionX = this.get(\"positionX\");\n          var positionX = this.getPrivate(\"positionX\", 0);\n          if ($type.isNumber(userPositionX)) {\n            positionX = userPositionX;\n          }\n          var userPositionY = this.get(\"positionY\");\n          var positionY = this.getPrivate(\"positionY\", 0);\n          if ($type.isNumber(userPositionY)) {\n            positionY = userPositionY;\n          }\n          var dispatch = false;\n          if (behavior === \"zoomX\" || behavior === \"zoomXY\" || behavior === \"selectX\" || behavior === \"selectXY\") {\n            if (Math.abs(positionX - this.getPrivate(\"downPositionX\", 0)) > 0.003) {\n              dispatch = true;\n            }\n          }\n          if (behavior === \"zoomY\" || behavior === \"zoomXY\" || behavior === \"selectY\" || behavior === \"selectXY\") {\n            if (Math.abs(positionY - this.getPrivate(\"downPositionY\", 0)) > 0.003) {\n              dispatch = true;\n            }\n          }\n          if (dispatch) {\n            var type = \"selectended\";\n            if (this.events.isEnabled(type)) {\n              this.events.dispatch(type, {\n                type: type,\n                target: this\n              });\n            }\n          }\n        }\n      }\n      this._downPoint = undefined;\n    }\n  });\n  Object.defineProperty(XYCursor.prototype, \"_handleMove\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (event) {\n      if (this.getPrivate(\"visible\")) {\n        // TODO: handle multitouch\n        var rootPoint = this._root.documentPointToRoot({\n          x: event.clientX,\n          y: event.clientY\n        });\n        var lastPoint = this._lastPoint;\n        if (Math.round(lastPoint.x) === Math.round(rootPoint.x) && Math.round(lastPoint.y) === Math.round(rootPoint.y)) {\n          return;\n        }\n        this._lastPoint = rootPoint;\n        this.handleMove({\n          x: rootPoint.x,\n          y: rootPoint.y\n        });\n      }\n    }\n  });\n  Object.defineProperty(XYCursor.prototype, \"_getPosition\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (point) {\n      return {\n        x: point.x / this.width(),\n        y: point.y / this.height()\n      };\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n  Object.defineProperty(XYCursor.prototype, \"handleMove\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (point, skipEvent) {\n      if (!point) {\n        point = this._movePoint;\n      }\n      var alwaysShow = this.get(\"alwaysShow\");\n      if (!point) {\n        this.hide(0);\n        return;\n      }\n      this._movePoint = point;\n      var local = this._display.toLocal(point);\n      var chart = this.chart;\n      if (chart && this._inPlot(local)) {\n        chart._movePoint = point;\n        if (this.isHidden()) {\n          this.show();\n          var behavior = this.get(\"behavior\", \"\");\n          if (behavior.charAt(0) == \"z\") {\n            this.selection.set(\"draw\", function () {});\n          }\n        }\n        var x = local.x;\n        var y = local.y;\n        var xyPos = this._getPosition(local);\n        this.setPrivate(\"point\", local);\n        var snapToSeries_1 = this.get(\"snapToSeries\");\n        var userPositionX = this.get(\"positionX\");\n        var positionX_1 = xyPos.x;\n        if ($type.isNumber(userPositionX)) {\n          positionX_1 = userPositionX;\n        }\n        var userPositionY = this.get(\"positionY\");\n        var positionY_1 = xyPos.y;\n        if ($type.isNumber(userPositionY)) {\n          positionY_1 = userPositionY;\n        }\n        this.setPrivate(\"positionX\", positionX_1);\n        this.setPrivate(\"positionY\", positionY_1);\n        var xy = this._getPoint(positionX_1, positionY_1);\n        x = xy.x;\n        y = xy.y;\n        chart.xAxes.each(function (axis) {\n          axis._handleCursorPosition(positionX_1, snapToSeries_1);\n          if (alwaysShow) {\n            axis.handleCursorShow();\n          }\n        });\n        chart.yAxes.each(function (axis) {\n          axis._handleCursorPosition(positionY_1, snapToSeries_1);\n          if (alwaysShow) {\n            axis.handleCursorShow();\n          }\n        });\n        if (!skipEvent) {\n          chart._handleCursorPosition();\n          var type = \"cursormoved\";\n          if (this.events.isEnabled(type)) {\n            this.events.dispatch(type, {\n              type: type,\n              target: this\n            });\n          }\n        }\n        this._updateLines(x, y);\n        chart.arrangeTooltips();\n      } else if (!this._downPoint) {\n        if (!alwaysShow) {\n          this.hide(0);\n        }\n      }\n      if (this._downPoint && this.get(\"behavior\") != \"none\") {\n        this._updateSelection(local);\n      }\n    }\n  });\n  Object.defineProperty(XYCursor.prototype, \"_getPoint\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (positionX, positionY) {\n      return {\n        x: this.width() * positionX,\n        y: this.height() * positionY\n      };\n    }\n  });\n  Object.defineProperty(XYCursor.prototype, \"_updateLines\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (x, y) {\n      if (!this._tooltipX) {\n        this.lineX.set(\"x\", x);\n      }\n      if (!this._tooltipY) {\n        this.lineY.set(\"y\", y);\n      }\n      this._drawLines();\n    }\n  });\n  Object.defineProperty(XYCursor.prototype, \"_updateSelection\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (point) {\n      var _this = this;\n      var selection = this.selection;\n      var behavior = this.get(\"behavior\");\n      var w = this.width();\n      var h = this.height();\n      if (point.x < 0) {\n        point.x = 0;\n      }\n      if (point.x > w) {\n        point.x = w;\n      }\n      if (point.y < 0) {\n        point.y = 0;\n      }\n      if (point.y > h) {\n        point.y = h;\n      }\n      selection.set(\"draw\", function (display) {\n        var downPoint = _this._downPoint;\n        if (downPoint) {\n          if (behavior === \"zoomXY\" || behavior === \"selectXY\") {\n            display.moveTo(downPoint.x, downPoint.y);\n            display.lineTo(downPoint.x, point.y);\n            display.lineTo(point.x, point.y);\n            display.lineTo(point.x, downPoint.y);\n            display.lineTo(downPoint.x, downPoint.y);\n          } else if (behavior === \"zoomX\" || behavior === \"selectX\") {\n            display.moveTo(downPoint.x, 0);\n            display.lineTo(downPoint.x, h);\n            display.lineTo(point.x, h);\n            display.lineTo(point.x, 0);\n            display.lineTo(downPoint.x, 0);\n          } else if (behavior === \"zoomY\" || behavior === \"selectY\") {\n            display.moveTo(0, downPoint.y);\n            display.lineTo(w, downPoint.y);\n            display.lineTo(w, point.y);\n            display.lineTo(0, point.y);\n            display.lineTo(0, downPoint.y);\n          }\n        }\n      });\n    }\n  });\n  Object.defineProperty(XYCursor.prototype, \"_onHide\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      if (this.isHidden()) {\n        var chart = this.chart;\n        if (chart) {\n          chart.xAxes.each(function (axis) {\n            axis.handleCursorHide();\n          });\n          chart.yAxes.each(function (axis) {\n            axis.handleCursorHide();\n          });\n          chart.series.each(function (series) {\n            series.handleCursorHide();\n          });\n        }\n      }\n      _super.prototype._onHide.call(this);\n    }\n  });\n  Object.defineProperty(XYCursor.prototype, \"_onShow\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      if (!this.isHidden()) {\n        var chart = this.chart;\n        if (chart) {\n          chart.xAxes.each(function (axis) {\n            axis.handleCursorShow();\n          });\n          chart.yAxes.each(function (axis) {\n            axis.handleCursorShow();\n          });\n        }\n      }\n      _super.prototype._onShow.call(this);\n    }\n  });\n  Object.defineProperty(XYCursor.prototype, \"_dispose\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      _super.prototype._dispose.call(this);\n      this.selection.dispose();\n    }\n  });\n  Object.defineProperty(XYCursor, \"className\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: \"XYCursor\"\n  });\n  Object.defineProperty(XYCursor, \"classNames\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: Container.classNames.concat([XYCursor.className])\n  });\n  return XYCursor;\n}(Container);\nexport { XYCursor };","map":{"version":3,"names":["Container","p100","Graphics","Grid","$type","$utils","$object","XYCursor","_super","__extends","_this","apply","arguments","Object","defineProperty","children","push","new","_root","themeTags","layer","x","y","value","_settings","mergeTags","prototype","_afterNew","call","setAll","height","isMeasured","position","states","create","visible","opacity","_drawLines","setPrivateRaw","_disposers","setTimeout","setPrivate","_prepareChildren","isDirty","_tooltipX","xAxis","get","tooltip_1","on","_updateXLine","_tooltipY","yAxis","tooltip_2","_updateYLine","_updateChildren","_movePoint","toGlobal","_getPoint","handleMove","tooltip","lineX","animate","key","to","_display","toLocal","duration","easing","lineY","set","display","moveTo","lineTo","width","chart","plotContainer","events","supports","event","isTouchEvent","originalEvent","_handleMove","_handleCursorDown","_handleCursorUp","keys","_downPoints","length","native","parent","moveValue","selection","point","inPlot","rootPoint","documentPointToRoot","clientX","clientY","local","_inPlot","_downPoint","show","type","isEnabled","dispatch","target","positionX","_getPosition","positionY","_event","behavior","charAt","hide","userPositionX","getPrivate","isNumber","userPositionY","Math","abs","undefined","lastPoint","_lastPoint","round","skipEvent","alwaysShow","isHidden","xyPos","snapToSeries_1","positionX_1","positionY_1","xy","xAxes","each","axis","_handleCursorPosition","handleCursorShow","yAxes","_updateLines","arrangeTooltips","_updateSelection","w","h","downPoint","handleCursorHide","series","_onHide","_onShow","_dispose","dispose","classNames","concat","className"],"sources":["../../../../../src/.internal/charts/xy/XYCursor.ts"],"sourcesContent":["import type { IPoint } from \"../../core/util/IPoint\";\nimport type { XYChart } from \"./XYChart\"\nimport type { XYSeries } from \"./series/XYSeries\";\nimport type { IPointerEvent } from \"../../core/render/backend/Renderer\";\nimport type { Axis } from \"./axes/Axis\";\nimport type { AxisRenderer } from \"./axes/AxisRenderer\";\nimport type { Tooltip } from \"../../core/render/Tooltip\";\n\nimport { Container, IContainerSettings, IContainerPrivate, IContainerEvents } from \"../../core/render/Container\";\nimport { p100 } from \"../../core/util/Percent\";\nimport { Graphics } from \"../../core/render/Graphics\";\nimport { Grid } from \"./axes/Grid\";\n//import { Animations } from \"../core/util/Animation\";\n\nimport * as $type from \"../../core/util/Type\";\nimport * as $utils from \"../../core/util/Utils\";\nimport * as $object from \"../../core/util/Object\";\n\nexport interface IXYCursorSettings extends IContainerSettings {\n\n\t/**\n\t * Cursor's X axis.\n\t *\n\t * If set, cursor will snap to that axis' cells.\n\t */\n\txAxis?: Axis<AxisRenderer>;\n\n\t/**\n\t * Cursor's Y axis.\n\t *\n\t * If set, cursor will snap to that axis' cells.\n\t */\n\tyAxis?: Axis<AxisRenderer>;\n\n\t/**\n\t * What should cursor do when dragged across plot area.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/#Behavior} for more info\n\t * @default \"none\"\n\t */\n\tbehavior?: \"zoomX\" | \"zoomY\" | \"zoomXY\" | \"selectX\" | \"selectY\" | \"selectXY\" | \"none\";\n\n\t/**\n\t * Cursor's horizontal position relative to plot area.\n\t *\n\t * If this setting is set, cursor will not react to mouse/touch and will just\n\t * sit at specified position until `positionX` is reset to `undefined`.\n\t *\n\t * `0` - left, `1` - right.\n\t */\n\tpositionX?: number;\n\n\t/**\n\t * Cursor's vertical position relative to plot area.\n\t *\n\t * If this setting is set, cursor will not react to mouse/touch and will just\n\t * sit at specified position until `positionY` is reset to `undefined`.\n\t *\n\t * `0` - left, `1` - right.\n\t */\n\tpositionY?: number;\n\n\t/**\n\t * If set to `true`, cursor will not be hidden when mouse cursor moves out\n\t * of the plot area.\n\t *\n\t * @default false\n\t */\n\talwaysShow?: boolean;\n\n\t/**\n\t * A list of series to snap cursor to.\n\t *\n\t * If set, the cursor will always snap to the closest data item of listed\n\t * series.\n\t */\n\tsnapToSeries?: Array<XYSeries>;\n\n\t/**\n\t * Defines in which direction to look when searching for the nearest data\n\t * item to snap to.\n\t * \n\t * Possible values: `\"xy\"` (default), `\"x\"`, and `\"y\"`.\n\t *\n\t * @since 5.0.6\n\t * @default \"xy\"\n\t */\n\tsnapToSeriesBy?: \"xy\" | \"x\" | \"y\";\n\n}\n\n\nexport interface IXYCursorPrivate extends IContainerPrivate {\n\n\t/**\n\t * Current X/Y coordinates of the cursor.\n\t */\n\tpoint?: IPoint;\n\n\t/**\n\t * Current horizontal position relative to the plot area (0-1).\n\t */\n\tpositionX?: number;\n\n\t/**\n\t * Current vertical position relative to the plot area (0-1).\n\t */\n\tpositionY?: number;\n\n\t/**\n\t * Horizontal cursor position on the moment when selection started.\n\t */\n\tdownPositionX?: number;\n\n\t/**\n\t * Vertical cursor position on the moment when selection started.\n\t */\n\tdownPositionY?: number;\n\n}\n\nexport interface IXYCursorEvents extends IContainerEvents {\n\n\t/**\n\t * Kicks in when cursor selection starts.\n\t *\n\t * Only when `behavior` is set.\n\t */\n\tselectended: {\n\t\ttarget: XYCursor;\n\t};\n\n\t/**\n\t * Kicks in when cursor selection ends.\n\t *\n\t * Only when `behavior` is set.\n\t */\n\tselectstarted: {\n\t\ttarget: XYCursor;\n\t};\n\n\t/**\n\t * Kicks in when cursor's position over plot area changes.\n\t */\n\tcursormoved: {\n\t\ttarget: XYCursor;\n\t};\n\n}\n\n/**\n * Creates a chart cursor for an [[XYChart]].\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/} for more info\n * @important\n */\nexport class XYCursor extends Container {\n\tpublic static className: string = \"XYCursor\";\n\tpublic static classNames: Array<string> = Container.classNames.concat([XYCursor.className]);\n\n\tdeclare public _settings: IXYCursorSettings;\n\tdeclare public _privateSettings: IXYCursorPrivate;\n\tdeclare public _events: IXYCursorEvents;\n\n\t/**\n\t * A [[Grid]] elment that used for horizontal line of the cursor crosshair.\n\t *\n\t * @default Grid.new()\n\t */\n\tpublic readonly lineX: Grid = this.children.push(Grid.new(this._root, {\n\t\tthemeTags: [\"x\"]\n\t}));\n\n\t/**\n\t * A [[Grid]] elment that used for horizontal line of the cursor crosshair.\n\t *\n\t * @default Grid.new()\n\t */\n\tpublic readonly lineY: Grid = this.children.push(Grid.new(this._root, {\n\t\tthemeTags: [\"y\"]\n\t}));\n\n\t/**\n\t * An element that represents current selection.\n\t *\n\t * @default Graphics.new()\n\t */\n\tpublic readonly selection: Graphics = this.children.push(Graphics.new(this._root, {\n\t\tthemeTags: [\"selection\", \"cursor\"], layer: 20\n\t}));\n\n\tprotected _movePoint: IPoint | undefined;\n\tprotected _lastPoint: IPoint = { x: 0, y: 0 };\n\n\tprotected _tooltipX: boolean = false;\n\tprotected _tooltipY: boolean = false;\n\n\t/**\n\t * A chart cursor is attached to.\n\t */\n\tpublic chart: XYChart | undefined;\n\n\tprotected _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"xy\", \"cursor\"]);\n\t\tsuper._afterNew();\n\t\tthis.setAll({ \"width\": p100, height: p100, isMeasured: true, position: \"absolute\" });\n\t\tthis.states.create(\"hidden\", { visible: true, opacity: 0 });\n\t\tthis._drawLines();\n\t\tthis.setPrivateRaw(\"visible\", false);\n\n\t\tthis._disposers.push(this.setTimeout(() => {\n\t\t\tthis.setPrivate(\"visible\", true)\n\t\t}, 500))\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tif (this.isDirty(\"xAxis\")) {\n\t\t\tthis._tooltipX = false;\n\t\t\tconst xAxis = this.get(\"xAxis\");\n\n\t\t\tif (xAxis) {\n\t\t\t\tconst tooltip = xAxis.get(\"tooltip\");\n\t\t\t\tif (tooltip) {\n\t\t\t\t\tthis._tooltipX = true;\n\t\t\t\t\ttooltip.on(\"pointTo\", () => {\n\t\t\t\t\t\tthis._updateXLine(tooltip);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"yAxis\")) {\n\t\t\tthis._tooltipY = false;\n\t\t\tconst yAxis = this.get(\"yAxis\");\n\n\t\t\tif (yAxis) {\n\t\t\t\tconst tooltip = yAxis.get(\"tooltip\");\n\t\t\t\tif (tooltip) {\n\t\t\t\t\tthis._tooltipY = true;\n\t\t\t\t\ttooltip.on(\"pointTo\", () => {\n\t\t\t\t\t\tthis._updateYLine(tooltip);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _updateChildren() {\n\t\tsuper._updateChildren();\n\n\t\tif (this.isDirty(\"positionX\") || this.isDirty(\"positionY\")) {\n\t\t\tthis._movePoint = this.toGlobal(this._getPoint(this.get(\"positionX\", 0), this.get(\"positionY\", 0)));\n\t\t\tthis.handleMove();\n\t\t}\n\t}\n\n\tprotected _updateXLine(tooltip: Tooltip) {\n\t\tthis.lineX.animate({ key: \"x\", to: this._display.toLocal(tooltip.get(\"pointTo\", { x: 0, y: 0 })).x, duration: tooltip.get(\"animationDuration\", 0), easing: tooltip.get(\"animationEasing\") });\n\t}\n\n\tprotected _updateYLine(tooltip: Tooltip) {\n\t\tthis.lineY.animate({ key: \"y\", to: this._display.toLocal(tooltip.get(\"pointTo\", { x: 0, y: 0 })).y, duration: tooltip.get(\"animationDuration\", 0), easing: tooltip.get(\"animationEasing\") });\n\t}\n\n\tprotected _drawLines() {\n\t\tthis.lineX.set(\"draw\", (display) => {\n\t\t\tdisplay.moveTo(0, 0);\n\t\t\tdisplay.lineTo(0, this.height());\n\t\t})\n\t\tthis.lineY.set(\"draw\", (display) => {\n\t\t\tdisplay.moveTo(0, 0);\n\t\t\tdisplay.lineTo(this.width(), 0);\n\t\t})\n\t}\n\n\tpublic _setChart(chart: XYChart): void {\n\t\tthis.chart = chart;\n\n\t\tconst plotContainer = chart.plotContainer;\n\n\t\tthis.events.on(\"boundschanged\", () => {\n\t\t\tthis._disposers.push(this.setTimeout(() => {\n\t\t\t\tif (this.get(\"alwaysShow\")) {\n\t\t\t\t\tthis._movePoint = this.toGlobal(this._getPoint(this.get(\"positionX\", 0), this.get(\"positionY\", 0)));\n\t\t\t\t\tthis.handleMove();\n\t\t\t\t}\n\t\t\t}, 50))\n\t\t})\n\n\t\t//this._display.interactive = true;\n\t\tif ($utils.supports(\"touchevents\")) {\n\t\t\tthis._disposers.push(plotContainer.events.on(\"click\", (event) => {\n\t\t\t\tif ($utils.isTouchEvent(event.originalEvent)) {\n\t\t\t\t\tthis._handleMove(event.originalEvent);\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\tthis._disposers.push(plotContainer.events.on(\"pointerdown\", (event) => {\n\t\t\tthis._handleCursorDown(event.originalEvent);\n\t\t}));\n\n\t\tthis._disposers.push(plotContainer.events.on(\"globalpointerup\", (event) => {\n\t\t\tthis._handleCursorUp(event.originalEvent);\n\t\t}));\n\n\t\tthis._disposers.push(plotContainer.events.on(\"globalpointermove\", (event) => {\n\t\t\tif ($object.keys(plotContainer._downPoints).length == 0 && !event.native) {\n\t\t\t\t// Ignore mouse movement if it originates on outside element and\n\t\t\t\t// we're not dragging.\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._handleMove(event.originalEvent);\n\t\t}));\n\n\t\tconst parent = this.parent;\n\t\tif (parent) {\n\t\t\tparent.children.moveValue(this.selection);\n\t\t}\n\t}\n\n\tprotected _inPlot(point: IPoint): boolean {\n\t\tconst chart = this.chart;\n\t\tif (chart) {\n\t\t\treturn chart.inPlot(point);\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected _handleCursorDown(event: IPointerEvent) {\n\t\t// TODO: handle multitouch\n\t\tconst rootPoint = this._root.documentPointToRoot({ x: event.clientX, y: event.clientY });\n\t\tlet local = this._display.toLocal(rootPoint);\n\t\tconst chart = this.chart;\n\n\t\tthis.selection.set(\"draw\", () => { });\n\n\t\tif (chart && this._inPlot(local)) {\n\t\t\tthis._downPoint = local;\n\n\t\t\tif (this.get(\"behavior\") != \"none\") {\n\t\t\t\tthis.selection.show();\n\n\t\t\t\tconst type = \"selectstarted\";\n\t\t\t\tif (this.events.isEnabled(type)) {\n\t\t\t\t\tthis.events.dispatch(type, { type: type, target: this });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet positionX = this._getPosition(local).x;\n\t\t\tlet positionY = this._getPosition(local).y;\n\n\t\t\tthis.setPrivate(\"downPositionX\", positionX);\n\t\t\tthis.setPrivate(\"downPositionY\", positionY);\n\t\t}\n\t}\n\n\tprotected _handleCursorUp(_event: IPointerEvent) {\n\t\t// TODO: handle multitouch\n\t\tif (this._downPoint) {\n\t\t\tconst behavior = this.get(\"behavior\", \"none\");\n\t\t\tif (behavior != \"none\") {\n\t\t\t\tif (behavior.charAt(0) === \"z\") {\n\t\t\t\t\tthis.selection.hide();\n\t\t\t\t}\n\n\t\t\t\tlet userPositionX = this.get(\"positionX\");\n\t\t\t\tlet positionX = this.getPrivate(\"positionX\", 0);\n\n\t\t\t\tif ($type.isNumber(userPositionX)) {\n\t\t\t\t\tpositionX = userPositionX;\n\t\t\t\t}\n\n\t\t\t\tlet userPositionY = this.get(\"positionY\");\n\t\t\t\tlet positionY = this.getPrivate(\"positionY\", 0);\n\n\t\t\t\tif ($type.isNumber(userPositionY)) {\n\t\t\t\t\tpositionY = userPositionY;\n\t\t\t\t}\n\n\t\t\t\tlet dispatch = false;\n\t\t\t\tif (behavior === \"zoomX\" || behavior === \"zoomXY\" || behavior === \"selectX\" || behavior === \"selectXY\") {\n\t\t\t\t\tif (Math.abs(positionX - this.getPrivate(\"downPositionX\", 0)) > 0.003) {\n\t\t\t\t\t\tdispatch = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (behavior === \"zoomY\" || behavior === \"zoomXY\" || behavior === \"selectY\" || behavior === \"selectXY\") {\n\t\t\t\t\tif (Math.abs(positionY - this.getPrivate(\"downPositionY\", 0)) > 0.003) {\n\t\t\t\t\t\tdispatch = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (dispatch) {\n\t\t\t\t\tconst type = \"selectended\";\n\t\t\t\t\tif (this.events.isEnabled(type)) {\n\t\t\t\t\t\tthis.events.dispatch(type, { type: type, target: this });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis._downPoint = undefined;\n\t}\n\n\tprotected _handleMove(event: IPointerEvent) {\n\t\tif (this.getPrivate(\"visible\")) {\n\t\t\t// TODO: handle multitouch\n\t\t\tconst rootPoint = this._root.documentPointToRoot({ x: event.clientX, y: event.clientY });\n\n\t\t\tconst lastPoint = this._lastPoint;\n\n\t\t\tif (Math.round(lastPoint.x) === Math.round(rootPoint.x) && Math.round(lastPoint.y) === Math.round(rootPoint.y)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._lastPoint = rootPoint;\n\n\t\t\tthis.handleMove({ x: rootPoint.x, y: rootPoint.y });\n\t\t}\n\t}\n\n\tprotected _getPosition(point: IPoint): IPoint {\n\t\treturn { x: point.x / this.width(), y: point.y / this.height() };\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic handleMove(point?: IPoint, skipEvent?: boolean) {\n\t\tif (!point) {\n\t\t\tpoint = this._movePoint;\n\t\t}\n\n\t\tconst alwaysShow = this.get(\"alwaysShow\");\n\n\t\tif (!point) {\n\t\t\tthis.hide(0);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._movePoint = point;\n\t\tlet local = this._display.toLocal(point);\n\t\tlet chart = this.chart;\n\n\t\tif (chart && this._inPlot(local)) {\n\t\t\tchart._movePoint = point;\n\n\t\t\tif (this.isHidden()) {\n\t\t\t\tthis.show();\n\n\t\t\t\tconst behavior = this.get(\"behavior\", \"\");\n\t\t\t\tif (behavior.charAt(0) == \"z\") {\n\t\t\t\t\tthis.selection.set(\"draw\", () => { });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet x = local.x;\n\t\t\tlet y = local.y;\n\n\t\t\tlet xyPos = this._getPosition(local);\n\n\t\t\tthis.setPrivate(\"point\", local);\n\n\t\t\tconst snapToSeries = this.get(\"snapToSeries\");\n\n\t\t\tlet userPositionX = this.get(\"positionX\");\n\t\t\tlet positionX = xyPos.x;\n\n\t\t\tif ($type.isNumber(userPositionX)) {\n\t\t\t\tpositionX = userPositionX;\n\t\t\t}\n\n\t\t\tlet userPositionY = this.get(\"positionY\");\n\t\t\tlet positionY = xyPos.y;\n\n\t\t\tif ($type.isNumber(userPositionY)) {\n\t\t\t\tpositionY = userPositionY;\n\t\t\t}\n\n\t\t\tthis.setPrivate(\"positionX\", positionX);\n\t\t\tthis.setPrivate(\"positionY\", positionY);\n\n\t\t\tconst xy = this._getPoint(positionX, positionY);\n\t\t\tx = xy.x;\n\t\t\ty = xy.y;\n\n\t\t\tchart.xAxes.each((axis) => {\n\t\t\t\taxis._handleCursorPosition(positionX, snapToSeries);\n\t\t\t\tif (alwaysShow) {\n\t\t\t\t\taxis.handleCursorShow();\n\t\t\t\t}\n\t\t\t})\n\t\t\tchart.yAxes.each((axis) => {\n\t\t\t\taxis._handleCursorPosition(positionY, snapToSeries);\n\t\t\t\tif (alwaysShow) {\n\t\t\t\t\taxis.handleCursorShow();\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tif (!skipEvent) {\n\t\t\t\tchart._handleCursorPosition();\n\n\t\t\t\tconst type = \"cursormoved\";\n\t\t\t\tif (this.events.isEnabled(type)) {\n\t\t\t\t\tthis.events.dispatch(type, { type: type, target: this });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._updateLines(x, y);\n\n\t\t\tchart.arrangeTooltips();\n\t\t}\n\t\telse if (!this._downPoint) {\n\t\t\tif (!alwaysShow) {\n\t\t\t\tthis.hide(0);\n\t\t\t}\n\t\t}\n\n\t\tif (this._downPoint && this.get(\"behavior\") != \"none\") {\n\t\t\tthis._updateSelection(local)\n\t\t}\n\t}\n\n\tprotected _getPoint(positionX: number, positionY: number): IPoint {\n\t\treturn { x: this.width() * positionX, y: this.height() * positionY };\n\t}\n\n\n\tprotected _updateLines(x: number, y: number) {\n\t\tif (!this._tooltipX) {\n\t\t\tthis.lineX.set(\"x\", x);\n\t\t}\n\t\tif (!this._tooltipY) {\n\t\t\tthis.lineY.set(\"y\", y);\n\t\t}\n\n\t\tthis._drawLines();\n\t}\n\n\tprotected _updateSelection(point: IPoint) {\n\t\tconst selection = this.selection;\n\t\tconst behavior = this.get(\"behavior\");\n\t\tconst w = this.width();\n\t\tconst h = this.height();\n\n\t\tif (point.x < 0) {\n\t\t\tpoint.x = 0;\n\t\t}\n\n\t\tif (point.x > w) {\n\t\t\tpoint.x = w;\n\t\t}\n\n\t\tif (point.y < 0) {\n\t\t\tpoint.y = 0;\n\t\t}\n\n\t\tif (point.y > h) {\n\t\t\tpoint.y = h;\n\t\t}\n\n\t\tselection.set(\"draw\", (display) => {\n\t\t\tconst downPoint = this._downPoint;\n\t\t\tif (downPoint) {\n\t\t\t\tif (behavior === \"zoomXY\" || behavior === \"selectXY\") {\n\t\t\t\t\tdisplay.moveTo(downPoint.x, downPoint.y);\n\t\t\t\t\tdisplay.lineTo(downPoint.x, point.y);\n\t\t\t\t\tdisplay.lineTo(point.x, point.y);\n\t\t\t\t\tdisplay.lineTo(point.x, downPoint.y);\n\t\t\t\t\tdisplay.lineTo(downPoint.x, downPoint.y);\n\t\t\t\t}\n\t\t\t\telse if (behavior === \"zoomX\" || behavior === \"selectX\") {\n\t\t\t\t\tdisplay.moveTo(downPoint.x, 0);\n\t\t\t\t\tdisplay.lineTo(downPoint.x, h);\n\t\t\t\t\tdisplay.lineTo(point.x, h);\n\t\t\t\t\tdisplay.lineTo(point.x, 0);\n\t\t\t\t\tdisplay.lineTo(downPoint.x, 0);\n\t\t\t\t}\n\t\t\t\telse if (behavior === \"zoomY\" || behavior === \"selectY\") {\n\t\t\t\t\tdisplay.moveTo(0, downPoint.y);\n\t\t\t\t\tdisplay.lineTo(w, downPoint.y);\n\t\t\t\t\tdisplay.lineTo(w, point.y);\n\t\t\t\t\tdisplay.lineTo(0, point.y);\n\t\t\t\t\tdisplay.lineTo(0, downPoint.y);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tprotected _onHide() {\n\t\tif (this.isHidden()) {\n\t\t\tlet chart = this.chart;\n\t\t\tif (chart) {\n\n\t\t\t\tchart.xAxes.each((axis) => {\n\t\t\t\t\taxis.handleCursorHide();\n\t\t\t\t})\n\t\t\t\tchart.yAxes.each((axis) => {\n\t\t\t\t\taxis.handleCursorHide();\n\t\t\t\t})\n\t\t\t\tchart.series.each((series) => {\n\t\t\t\t\tseries.handleCursorHide();\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\tsuper._onHide();\n\t}\n\n\tprotected _onShow() {\n\t\tif (!this.isHidden()) {\n\t\t\tlet chart = this.chart;\n\t\t\tif (chart) {\n\t\t\t\tchart.xAxes.each((axis) => {\n\t\t\t\t\taxis.handleCursorShow();\n\t\t\t\t})\n\t\t\t\tchart.yAxes.each((axis) => {\n\t\t\t\t\taxis.handleCursorShow();\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\tsuper._onShow();\n\t}\n\n\tprotected _dispose() {\n\t\tsuper._dispose();\n\t\tthis.selection.dispose();\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}