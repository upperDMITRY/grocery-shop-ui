{"ast":null,"code":"import { __awaiter, __extends, __generator } from \"tslib\";\nimport { Settings } from \"../util/Entity\";\nimport { Container } from \"./Container\";\nimport { ListData } from \"../util/Data\";\nimport * as $array from \"../util/Array\";\nimport * as $object from \"../util/Object\";\n/**\r\n * A base element that holds data bit (data item) for any [[Component]].\r\n */\nvar DataItem = /** @class */function (_super) {\n  __extends(DataItem, _super);\n  function DataItem(component, dataContext, settings) {\n    var _this = _super.call(this, settings) || this;\n    /**\r\n     * A data item's owener [[Component]].\r\n     */\n    Object.defineProperty(_this, \"component\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * A reference to actual item in source data this item is based on.\r\n     */\n    Object.defineProperty(_this, \"dataContext\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * @todo requires description\r\n     */\n    Object.defineProperty(_this, \"bullets\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * A set of \"open\" values.\r\n     */\n    Object.defineProperty(_this, \"open\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * A set of \"close\" values.\r\n     */\n    Object.defineProperty(_this, \"close\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    _this.dataContext = dataContext;\n    _this.component = component;\n    _this._settings.visible = true;\n    _this._checkDirty();\n    return _this;\n  }\n  /**\r\n   * @ignore\r\n   */\n  Object.defineProperty(DataItem.prototype, \"markDirty\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      this.component._markDirtyValues(this);\n    }\n  });\n  Object.defineProperty(DataItem.prototype, \"_startAnimation\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      this.component._root._addAnimation(this);\n    }\n  });\n  Object.defineProperty(DataItem.prototype, \"_animationTime\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      return this.component._root.animationTime;\n    }\n  });\n  Object.defineProperty(DataItem.prototype, \"_dispose\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      if (this.component) {\n        this.component.disposeDataItem(this);\n      }\n      _super.prototype._dispose.call(this);\n    }\n  });\n  /**\r\n   * Shows a data item that's currently hidden.\r\n   */\n  Object.defineProperty(DataItem.prototype, \"show\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (duration) {\n      this.setRaw(\"visible\", true);\n      if (this.component) {\n        this.component.showDataItem(this, duration);\n      }\n    }\n  });\n  /**\r\n   * Hides a data item that's currently visible.\r\n   */\n  Object.defineProperty(DataItem.prototype, \"hide\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (duration) {\n      this.setRaw(\"visible\", false);\n      if (this.component) {\n        this.component.hideDataItem(this, duration);\n      }\n    }\n  });\n  Object.defineProperty(DataItem.prototype, \"isHidden\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      return !this.get(\"visible\");\n    }\n  });\n  return DataItem;\n}(Settings);\nexport { DataItem };\n/**\r\n * A base class for elements that make use of data.\r\n */\nvar Component = /** @class */function (_super) {\n  __extends(Component, _super);\n  function Component() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    Object.defineProperty(_this, \"_data\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: new ListData()\n    });\n    Object.defineProperty(_this, \"_dataItems\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(_this, \"_mainDataItems\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: _this._dataItems\n    });\n    Object.defineProperty(_this, \"valueFields\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(_this, \"fields\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: [\"id\"]\n    });\n    Object.defineProperty(_this, \"_valueFields\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(_this, \"_valueFieldsF\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(_this, \"_fields\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(_this, \"_fieldsF\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(_this, \"_valuesDirty\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(_this, \"_dataChanged\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(_this, \"_dataGrouped\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    /**\r\n     * Indicates if the component has already been initialized.\r\n     */\n    Object.defineProperty(_this, \"inited\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    return _this;\n  }\n  Object.defineProperty(Component.prototype, \"data\", {\n    /**\r\n     * @return  Data\r\n     */\n    get: function () {\n      return this._data;\n    },\n    /**\r\n     * Component's data.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/data/} for more info\r\n     */\n    set: function (data) {\n      data.incrementRef();\n      this._data.decrementRef();\n      this._data = data;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Component.prototype, \"_dispose\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      _super.prototype._dispose.call(this);\n      this._data.decrementRef();\n    }\n  });\n  Object.defineProperty(Component.prototype, \"_onDataClear\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {}\n  });\n  Object.defineProperty(Component.prototype, \"_afterNew\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var _this = this;\n      _super.prototype._afterNew.call(this);\n      this._data.incrementRef();\n      this._updateFields();\n      this._disposers.push(this.data.events.onAll(function (change) {\n        var dataItems = _this._mainDataItems;\n        _this._markDirtyValues();\n        _this._markDirtyGroup();\n        _this._dataChanged = true;\n        if (change.type === \"clear\") {\n          $array.each(dataItems, function (dataItem) {\n            dataItem.dispose();\n          });\n          dataItems.length = 0;\n          _this._onDataClear();\n        } else if (change.type === \"push\") {\n          var dataItem = new DataItem(_this, change.newValue, _this._makeDataItem(change.newValue));\n          dataItems.push(dataItem);\n          _this.processDataItem(dataItem);\n        } else if (change.type === \"setIndex\") {\n          var dataItem_1 = dataItems[change.index];\n          var properties_1 = _this._makeDataItem(change.newValue);\n          $object.keys(properties_1).forEach(function (key) {\n            dataItem_1.animate({\n              key: key,\n              to: properties_1[key],\n              duration: _this.get(\"interpolationDuration\", 0),\n              easing: _this.get(\"interpolationEasing\")\n            });\n          });\n          dataItem_1.dataContext = change.newValue;\n        } else if (change.type === \"insertIndex\") {\n          var dataItem = new DataItem(_this, change.newValue, _this._makeDataItem(change.newValue));\n          dataItems.splice(change.index, 0, dataItem);\n          _this.processDataItem(dataItem);\n        } else if (change.type === \"removeIndex\") {\n          var dataItem = dataItems[change.index];\n          dataItem.dispose();\n          dataItems.splice(change.index, 1);\n          _this._markDirtyValues();\n        } else {\n          throw new Error(\"Unknown IStreamEvent type\");\n        }\n        _this._afterDataChange();\n      }));\n    }\n  });\n  Object.defineProperty(Component.prototype, \"_updateFields\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var _this = this;\n      if (this.valueFields) {\n        this._valueFields = [];\n        this._valueFieldsF = {};\n        $array.each(this.valueFields, function (key) {\n          var field = _this.get(key + \"Field\");\n          if (field) {\n            _this._valueFields.push(key);\n            _this._valueFieldsF[key] = {\n              fieldKey: key + \"Field\",\n              workingKey: key + \"Working\"\n            };\n          }\n        });\n      }\n      if (this.fields) {\n        this._fields = [];\n        this._fieldsF = {};\n        $array.each(this.fields, function (key) {\n          var field = _this.get(key + \"Field\");\n          if (field) {\n            _this._fields.push(key);\n            _this._fieldsF[key] = key + \"Field\";\n          }\n        });\n      }\n    }\n  });\n  Object.defineProperty(Component.prototype, \"dataItems\", {\n    /**\r\n     * A list of component's data items.\r\n     *\r\n     * @return  Data items\r\n     */\n    get: function () {\n      return this._dataItems;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Component.prototype, \"processDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (_dataItem) {}\n  });\n  Object.defineProperty(Component.prototype, \"_makeDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (data) {\n      var _this = this;\n      //const output: this[\"_dataItemSettings\"] = {};\n      var output = {}; // temporary to solve error\n      if (this._valueFields) {\n        $array.each(this._valueFields, function (key) {\n          var field = _this.get(_this._valueFieldsF[key].fieldKey);\n          output[key] = data[field];\n          output[_this._valueFieldsF[key].workingKey] = output[key];\n        });\n      }\n      if (this._fields) {\n        $array.each(this._fields, function (key) {\n          var field = _this.get(_this._fieldsF[key]);\n          output[key] = data[field];\n        });\n      }\n      return output;\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n  Object.defineProperty(Component.prototype, \"makeDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (data) {\n      var dataItem = new DataItem(this, undefined, data);\n      this.processDataItem(dataItem);\n      return dataItem;\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n  Object.defineProperty(Component.prototype, \"pushDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (data) {\n      var dataItem = this.makeDataItem(data);\n      this._mainDataItems.push(dataItem);\n      return dataItem;\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n  Object.defineProperty(Component.prototype, \"disposeDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (_dataItem) {}\n  });\n  /**\r\n   * Shows component's data item.\r\n   *\r\n   * @param   dataItem   Data item\r\n   * @param   _duration  Animation duration in milliseconds\r\n   * @return             Promise\r\n   */\n  Object.defineProperty(Component.prototype, \"showDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (dataItem, _duration) {\n      return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n          dataItem.set(\"visible\", true);\n          return [2 /*return*/];\n        });\n      });\n    }\n  });\n  /**\r\n   * Hides component's data item.\r\n   *\r\n   * @param   dataItem   Data item\r\n   * @param   _duration  Animation duration in milliseconds\r\n   * @return             Promise\r\n   */\n  Object.defineProperty(Component.prototype, \"hideDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (dataItem, _duration) {\n      return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n          dataItem.set(\"visible\", false);\n          return [2 /*return*/];\n        });\n      });\n    }\n  });\n\n  Object.defineProperty(Component.prototype, \"_clearDirty\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      _super.prototype._clearDirty.call(this);\n      this._valuesDirty = false;\n    }\n  });\n  Object.defineProperty(Component.prototype, \"_afterDataChange\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {}\n  });\n  Object.defineProperty(Component.prototype, \"_afterChanged\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      _super.prototype._afterChanged.call(this);\n      if (this._dataChanged) {\n        var type = \"datavalidated\";\n        if (this.events.isEnabled(type)) {\n          this.events.dispatch(type, {\n            type: type,\n            target: this\n          });\n          this._dataChanged = false;\n        }\n      }\n      this.inited = true;\n    }\n  });\n  Object.defineProperty(Component.prototype, \"_markDirtyValues\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (_dataItem) {\n      this.markDirty();\n      this._valuesDirty = true;\n    }\n  });\n  Object.defineProperty(Component.prototype, \"_markDirtyGroup\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      this._dataGrouped = false;\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n  Object.defineProperty(Component.prototype, \"markDirtySize\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      this._sizeDirty = true;\n      this.markDirty();\n    }\n  });\n  Object.defineProperty(Component, \"className\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: \"Component\"\n  });\n  Object.defineProperty(Component, \"classNames\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: Container.classNames.concat([Component.className])\n  });\n  return Component;\n}(Container);\nexport { Component };","map":{"version":3,"names":["Settings","Container","ListData","$array","$object","DataItem","_super","__extends","component","dataContext","settings","_this","call","Object","defineProperty","_settings","visible","_checkDirty","value","_markDirtyValues","_root","_addAnimation","animationTime","disposeDataItem","prototype","_dispose","duration","setRaw","showDataItem","hideDataItem","get","Component","apply","arguments","_dataItems","_data","set","data","incrementRef","decrementRef","_afterNew","_updateFields","_disposers","push","events","onAll","change","dataItems","_mainDataItems","_markDirtyGroup","_dataChanged","type","each","dataItem","dispose","length","_onDataClear","newValue","_makeDataItem","processDataItem","dataItem_1","index","properties_1","keys","forEach","key","animate","to","easing","splice","Error","_afterDataChange","valueFields","_valueFields","_valueFieldsF","field","fieldKey","workingKey","fields","_fields","_fieldsF","_dataItem","output","undefined","makeDataItem","_duration","_clearDirty","_valuesDirty","_afterChanged","isEnabled","dispatch","target","inited","markDirty","_dataGrouped","_sizeDirty","classNames","concat","className"],"sources":["../../../../../src/.internal/core/render/Component.ts"],"sourcesContent":["import { Settings } from \"../util/Entity\";\nimport { Container, IContainerSettings, IContainerPrivate, IContainerEvents } from \"./Container\";\nimport { ListData } from \"../util/Data\";\nimport * as $array from \"../util/Array\";\nimport * as $object from \"../util/Object\";\nimport type * as $ease from \"../util/Ease\";\nimport type { Bullet } from \"./Bullet\";\n\n/**\n * A base element that holds data bit (data item) for any [[Component]].\n */\nexport class DataItem<P extends IComponentDataItem> extends Settings {\n\tdeclare public _settings: P;\n\n\t/**\n\t * A data item's owener [[Component]].\n\t */\n\tpublic component: Component;\n\n\t/**\n\t * A reference to actual item in source data this item is based on.\n\t */\n\tpublic dataContext: unknown;\n\n\t/**\n\t * @todo requires description\n\t */\n\tpublic bullets: Array<Bullet> | undefined;\n\n\t/**\n\t * A set of \"open\" values.\n\t */\n\tpublic open: { [index: string]: any } | undefined;\n\n\t/**\n\t * A set of \"close\" values.\n\t */\n\tpublic close: { [index: string]: any } | undefined;\n\n\tconstructor(component: Component, dataContext: unknown, settings: P) {\n\t\tsuper(settings);\n\n\t\tthis.dataContext = dataContext;\n\t\tthis.component = component;\n\t\tthis._settings.visible = true;\n\t\tthis._checkDirty();\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic markDirty(): void {\n\t\tthis.component._markDirtyValues(this);\n\t}\n\n\tprotected _startAnimation(): void {\n\t\tthis.component._root._addAnimation(this);\n\t}\n\n\tprotected _animationTime(): number | null {\n\t\treturn this.component._root.animationTime;\n\t}\n\n\tprotected _dispose() {\n\t\tif (this.component) {\n\t\t\tthis.component.disposeDataItem(this);\n\t\t}\n\t\tsuper._dispose();\n\t}\n\n\t/**\n\t * Shows a data item that's currently hidden.\n\t */\n\tpublic show(duration?: number) {\n\t\tthis.setRaw(\"visible\", true);\n\t\tif (this.component) {\n\t\t\tthis.component.showDataItem(this, duration);\n\t\t}\n\t}\n\n\t/**\n\t * Hides a data item that's currently visible.\n\t */\n\tpublic hide(duration?: number) {\n\t\tthis.setRaw(\"visible\", false);\n\t\tif (this.component) {\n\t\t\tthis.component.hideDataItem(this, duration);\n\t\t}\n\t}\n\n\tpublic isHidden() {\n\t\treturn !this.get(\"visible\");\n\t}\n}\n\n\nexport interface IComponentDataItem {\n\tvisible?: boolean;\n}\n\nexport interface IComponentSettings extends IContainerSettings {\n\n\t/**\n\t * A duration of the animation from one setting value to another, in\n\t * milliseconds.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/animations/#Animating_data_values} for more info\n\t */\n\tinterpolationDuration?: number;\n\n\t/**\n\t * Easing function to use for cross setting value animations.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/animations/#Easing_functions} for more info\n\t */\n\tinterpolationEasing?: $ease.Easing;\n\n}\n\nexport interface IComponentPrivate extends IContainerPrivate {\n}\n\nexport interface IComponentEvents extends IContainerEvents {\n\tdatavalidated: {}\n}\n\n/**\n * A base class for elements that make use of data.\n */\nexport abstract class Component extends Container {\n\tpublic static className: string = \"Component\";\n\tpublic static classNames: Array<string> = Container.classNames.concat([Component.className]);\n\n\tdeclare public _settings: IComponentSettings;\n\tdeclare public _privateSettings: IComponentPrivate;\n\tdeclare public _dataItemSettings: IComponentDataItem;\n\tdeclare public _events: IComponentEvents;\n\n\tprotected _data: ListData<unknown> = new ListData();\n\n\tprotected _dataItems: Array<DataItem<this[\"_dataItemSettings\"]>> = [];\n\n\tpublic _mainDataItems = this._dataItems;\n\n\tprotected valueFields: Array<string> = [];\n\tprotected fields: Array<string> = [\"id\"];\n\n\tprotected _valueFields!: Array<string>;\n\tprotected _valueFieldsF!: { [index: string]: { fieldKey: string, workingKey: string } };\n\n\tprotected _fields!: Array<string>;\n\tprotected _fieldsF!: { [index: string]: string };\n\n\tpublic _valuesDirty: boolean = false;\n\n\tprotected _dataChanged: boolean = false;\n\n\tprotected _dataGrouped = false;\t\n\n\t/**\n\t * Indicates if the component has already been initialized.\n\t */\n\tpublic inited: boolean = false;\n\n\t/**\n\t * Component's data.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/data/} for more info\n\t */\n\tpublic set data(data: ListData<unknown>) {\n\t\tdata.incrementRef();\n\t\tthis._data.decrementRef();\n\t\tthis._data = data;\n\t}\n\n\t/**\n\t * @return  Data\n\t */\n\tpublic get data(): ListData<unknown> {\n\t\treturn this._data;\n\t}\n\n\tprotected _dispose() {\n\t\tsuper._dispose();\n\t\tthis._data.decrementRef();\n\t}\n\n\tprotected _onDataClear() {\n\n\t}\n\n\tprotected _afterNew() {\n\t\tsuper._afterNew();\n\n\t\tthis._data.incrementRef();\n\t\tthis._updateFields();\n\n\t\tthis._disposers.push(this.data.events.onAll((change) => {\n\t\t\tconst dataItems = this._mainDataItems;\n\t\t\tthis._markDirtyValues();\n\t\t\tthis._markDirtyGroup();\n\t\t\tthis._dataChanged = true;\n\t\t\tif (change.type === \"clear\") {\n\t\t\t\t$array.each(dataItems, (dataItem) => {\n\t\t\t\t\tdataItem.dispose();\n\t\t\t\t});\n\n\t\t\t\tdataItems.length = 0;\n\t\t\t\tthis._onDataClear();\n\t\t\t} else if (change.type === \"push\") {\n\t\t\t\tconst dataItem = new DataItem(this, change.newValue, this._makeDataItem(change.newValue));\n\t\t\t\tdataItems.push(dataItem);\n\t\t\t\tthis.processDataItem(dataItem);\n\n\t\t\t} else if (change.type === \"setIndex\") {\n\t\t\t\tconst dataItem = dataItems[change.index];\n\t\t\t\tconst properties = this._makeDataItem(change.newValue);\n\n\t\t\t\t$object.keys(properties).forEach((key) => {\n\t\t\t\t\tdataItem.animate({\n\t\t\t\t\t\tkey: key,\n\t\t\t\t\t\tto: properties[key],\n\t\t\t\t\t\tduration: this.get(\"interpolationDuration\", 0),\n\t\t\t\t\t\teasing: this.get(\"interpolationEasing\"),\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tdataItem.dataContext = change.newValue;\n\n\t\t\t} else if (change.type === \"insertIndex\") {\n\t\t\t\tconst dataItem = new DataItem(this, change.newValue, this._makeDataItem(change.newValue));\n\t\t\t\tdataItems.splice(change.index, 0, dataItem);\n\t\t\t\tthis.processDataItem(dataItem);\n\n\t\t\t} else if (change.type === \"removeIndex\") {\n\t\t\t\tconst dataItem = dataItems[change.index];\n\t\t\t\tdataItem.dispose();\n\t\t\t\tdataItems.splice(change.index, 1);\n\t\t\t\tthis._markDirtyValues();\n\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"Unknown IStreamEvent type\");\n\t\t\t}\n\n\t\t\tthis._afterDataChange();\n\t\t}));\n\t}\n\n\tprotected _updateFields() {\n\t\tif (this.valueFields) {\n\t\t\tthis._valueFields = [];\n\t\t\tthis._valueFieldsF = {};\n\n\t\t\t$array.each(this.valueFields as Array<keyof this[\"_settings\"]>, (key) => {\n\t\t\t\tconst field = this.get(<any>(key + \"Field\"));\n\t\t\t\tif (field) {\n\t\t\t\t\tthis._valueFields.push(<any>key);\n\t\t\t\t\tthis._valueFieldsF[key as string] = { fieldKey: key + \"Field\", workingKey: key + \"Working\" };\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (this.fields) {\n\t\t\tthis._fields = [];\n\t\t\tthis._fieldsF = {};\n\n\t\t\t$array.each(this.fields as Array<keyof this[\"_settings\"]>, (key) => {\n\t\t\t\tconst field = this.get(<any>(key + \"Field\"));\n\t\t\t\tif (field) {\n\t\t\t\t\tthis._fields.push(<any>key);\n\t\t\t\t\tthis._fieldsF[key as string] = key + \"Field\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * A list of component's data items.\n\t *\n\t * @return  Data items\n\t */\n\tpublic get dataItems(): Array<DataItem<this[\"_dataItemSettings\"]>> {\n\t\treturn this._dataItems;\n\t}\n\n\tprotected processDataItem(_dataItem: DataItem<this[\"_dataItemSettings\"]>) { }\n\n\n\tpublic _makeDataItem(data: unknown): this[\"_dataItemSettings\"] {\n\t\t//const output: this[\"_dataItemSettings\"] = {};\n\t\tconst output: any = {}; // temporary to solve error\n\t\tif (this._valueFields) {\n\t\t\t$array.each(this._valueFields, (key) => {\n\t\t\t\tconst field = this.get(<any>(this._valueFieldsF[key].fieldKey));\n\t\t\t\toutput[key] = (data as any)[field];\n\n\t\t\t\toutput[this._valueFieldsF[key].workingKey] = output[key];\n\t\t\t});\n\t\t}\n\t\tif (this._fields) {\n\t\t\t$array.each(this._fields, (key) => {\n\t\t\t\tconst field = this.get(<any>(this._fieldsF[key]));\n\t\t\t\toutput[key] = (data as any)[field];\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeDataItem(data: this[\"_dataItemSettings\"]): DataItem<this[\"_dataItemSettings\"]> {\n\t\tlet dataItem = new DataItem(this, undefined, data);\n\t\tthis.processDataItem(dataItem);\n\t\treturn dataItem;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic pushDataItem(data: this[\"_dataItemSettings\"]): DataItem<this[\"_dataItemSettings\"]> {\n\t\tconst dataItem = this.makeDataItem(data);\n\t\tthis._mainDataItems.push(dataItem);\n\t\treturn dataItem;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic disposeDataItem(_dataItem: DataItem<this[\"_dataItemSettings\"]>) { }\n\n\t/**\n\t * Shows component's data item.\n\t *\n\t * @param   dataItem   Data item\n\t * @param   _duration  Animation duration in milliseconds\n\t * @return             Promise\n\t */\n\tpublic async showDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, _duration?: number): Promise<void> {\n\t\tdataItem.set(\"visible\", true);\n\t}\n\n\t/**\n\t * Hides component's data item.\n\t *\n\t * @param   dataItem   Data item\n\t * @param   _duration  Animation duration in milliseconds\n\t * @return             Promise\n\t */\n\tpublic async hideDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, _duration?: number): Promise<void> {\n\t\tdataItem.set(\"visible\", false);\n\t}\n\n\tpublic _clearDirty() {\n\t\tsuper._clearDirty();\n\t\tthis._valuesDirty = false;\n\t}\n\n\tprotected _afterDataChange() {\n\n\t}\n\n\tpublic _afterChanged() {\n\t\tsuper._afterChanged();\n\t\tif (this._dataChanged) {\n\t\t\tconst type = \"datavalidated\";\n\t\t\tif (this.events.isEnabled(type)) {\n\t\t\t\tthis.events.dispatch(type, { type: type, target: this });\n\t\t\t\tthis._dataChanged = false;\n\t\t\t}\n\t\t}\n\n\t\tthis.inited = true;\n\t}\n\n\tpublic _markDirtyValues(_dataItem?: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tthis.markDirty();\n\t\tthis._valuesDirty = true;\n\t}\n\n\tpublic _markDirtyGroup() {\t\t\n\t\tthis._dataGrouped = false;\n\t}\t\n\n\t/**\n\t * @ignore\n\t */\n\tpublic markDirtySize() {\n\t\tthis._sizeDirty = true;\n\t\tthis.markDirty();\n\t}\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}