{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dcurchin/Desktop/final/grocery-shop-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"/Users/dcurchin/Desktop/final/grocery-shop-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncToGenerator from\"/Users/dcurchin/Desktop/final/grocery-shop-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{useQuery}from'react-query';export var useProductsFilters=function useProductsFilters(filters,token){return useQuery(['productsFilters',filters,token],fetchApi,{retry:0,staleTime:60*1000*5,cacheTime:0});};var fetchApi=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(context){var _context$queryKey,_context$queryKey$,name,pageNumber,token,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context$queryKey=_slicedToArray(context.queryKey,3),_context$queryKey$=_context$queryKey[1],name=_context$queryKey$.name,pageNumber=_context$queryKey$.pageNumber,token=_context$queryKey[2];_context.prev=1;_context.next=4;return axios({method:'get',url:\"/api/products/?name=\".concat(name,\"&pageNumber=\").concat(pageNumber),headers:{Authorization:\"\".concat(token)}});case 4:res=_context.sent;if(!(res.status>=200&&res.status<300)){_context.next=7;break;}return _context.abrupt(\"return\",res.data);case 7:_context.next=14;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);if(!axios.isAxiosError(_context.t0)){_context.next=14;break;}if(!(_context.t0&&_context.t0.response)){_context.next=14;break;}throw Error(_context.t0.response.data.message);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function fetchApi(_x){return _ref.apply(this,arguments);};}();","map":{"version":3,"sources":["/Users/dcurchin/Desktop/final/grocery-shop-ui/src/hooks/useProductsFilters.js"],"names":["axios","useQuery","useProductsFilters","filters","token","fetchApi","retry","staleTime","cacheTime","context","queryKey","name","pageNumber","method","url","headers","Authorization","res","status","data","isAxiosError","response","Error","message"],"mappings":"yeAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,aAAzB,CAEA,MAAO,IAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,OAAD,CAAUC,KAAV,QAChCH,CAAAA,QAAQ,CAAC,CAAC,iBAAD,CAAoBE,OAApB,CAA6BC,KAA7B,CAAD,CAAsCC,QAAtC,CAAgD,CACtDC,KAAK,CAAE,CAD+C,CAEtDC,SAAS,CAAE,GAAK,IAAL,CAAY,CAF+B,CAGtDC,SAAS,CAAE,CAH2C,CAAhD,CADwB,EAA3B,CAOP,GAAMH,CAAAA,QAAQ,0FAAG,iBAAOI,OAAP,sNACyBA,OAAO,CAACC,QADjC,4CACJC,IADI,oBACJA,IADI,CACEC,UADF,oBACEA,UADF,CACgBR,KADhB,4DAGKJ,CAAAA,KAAK,CAAC,CACtBa,MAAM,CAAE,KADc,CAEtBC,GAAG,+BAAyBH,IAAzB,wBAA4CC,UAA5C,CAFmB,CAGtBG,OAAO,CAAE,CACPC,aAAa,WAAKZ,KAAL,CADN,CAHa,CAAD,CAHV,QAGPa,GAHO,oBAUTA,GAAG,CAACC,MAAJ,EAAc,GAAd,EAAqBD,GAAG,CAACC,MAAJ,CAAa,GAVzB,0DAWJD,GAAG,CAACE,IAXA,4FAcTnB,KAAK,CAACoB,YAAN,aAdS,+BAeP,aAAO,YAAIC,QAfJ,gCAgBHC,CAAAA,KAAK,CAAC,YAAID,QAAJ,CAAaF,IAAb,CAAkBI,OAAnB,CAhBF,qEAAH,kBAARlB,CAAAA,QAAQ,4CAAd","sourcesContent":["import axios from 'axios';\r\nimport { useQuery } from 'react-query';\r\n\r\nexport const useProductsFilters = (filters, token) =>\r\n  useQuery(['productsFilters', filters, token], fetchApi, {\r\n    retry: 0,\r\n    staleTime: 60 * 1000 * 5,\r\n    cacheTime: 0,\r\n  });\r\n\r\nconst fetchApi = async (context) => {\r\n  const [, { name, pageNumber }, token] = context.queryKey;\r\n  try {\r\n    const res = await axios({\r\n      method: 'get',\r\n      url: `/api/products/?name=${name}&pageNumber=${pageNumber}`,\r\n      headers: {\r\n        Authorization: `${token}`,\r\n      },\r\n    });\r\n    if (res.status >= 200 && res.status < 300) {\r\n      return res.data;\r\n    }\r\n  } catch (err) {\r\n    if (axios.isAxiosError(err)) {\r\n      if (err && err.response) {\r\n        throw Error(err.response.data.message);\r\n      }\r\n    }\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}