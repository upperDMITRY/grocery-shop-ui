{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dcurchin/Desktop/final/grocery-shop-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"/Users/dcurchin/Desktop/final/grocery-shop-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncToGenerator from\"/Users/dcurchin/Desktop/final/grocery-shop-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{useQuery}from'react-query';export var useUser=function useUser(email,token){return useQuery(['user',email,token],getUser,{retry:0,staleTime:60*1000*5,cacheTime:0});};var getUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(context){var _context$queryKey,email,token,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context$queryKey=_slicedToArray(context.queryKey,3),email=_context$queryKey[1],token=_context$queryKey[2];_context.prev=1;_context.next=4;return axios({method:'get',url:\"/api/admin/users?email=\".concat(email),headers:{Authorization:\"\".concat(token)}});case 4:res=_context.sent;if(!(res.status>=200&&res.status<300)){_context.next=7;break;}return _context.abrupt(\"return\",res.data);case 7:_context.next=14;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);if(!axios.isAxiosError(_context.t0)){_context.next=14;break;}if(!(_context.t0&&_context.t0.response)){_context.next=14;break;}throw Error(_context.t0.response.data.message);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function getUser(_x){return _ref.apply(this,arguments);};}();","map":{"version":3,"sources":["/Users/dcurchin/Desktop/final/grocery-shop-ui/src/hooks/useUser.js"],"names":["axios","useQuery","useUser","email","token","getUser","retry","staleTime","cacheTime","context","queryKey","method","url","headers","Authorization","res","status","data","isAxiosError","response","Error","message"],"mappings":"yeAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,aAAzB,CAEA,MAAO,IAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,KAAD,CAAQC,KAAR,QACrBH,CAAAA,QAAQ,CAAC,CAAC,MAAD,CAASE,KAAT,CAAgBC,KAAhB,CAAD,CAAyBC,OAAzB,CAAkC,CACxCC,KAAK,CAAE,CADiC,CAExCC,SAAS,CAAE,GAAK,IAAL,CAAY,CAFiB,CAGxCC,SAAS,CAAE,CAH6B,CAAlC,CADa,EAAhB,CAOP,GAAMH,CAAAA,OAAO,0FAAG,iBAAOI,OAAP,yLACWA,OAAO,CAACC,QADnB,IACLP,KADK,sBACEC,KADF,4DAGMJ,CAAAA,KAAK,CAAC,CACtBW,MAAM,CAAE,KADc,CAEtBC,GAAG,kCAA4BT,KAA5B,CAFmB,CAGtBU,OAAO,CAAE,CACPC,aAAa,WAAKV,KAAL,CADN,CAHa,CAAD,CAHX,QAGNW,GAHM,oBAURA,GAAG,CAACC,MAAJ,EAAc,GAAd,EAAqBD,GAAG,CAACC,MAAJ,CAAa,GAV1B,0DAWHD,GAAG,CAACE,IAXD,4FAcRjB,KAAK,CAACkB,YAAN,aAdQ,+BAeN,aAAO,YAAIC,QAfL,gCAgBFC,CAAAA,KAAK,CAAC,YAAID,QAAJ,CAAaF,IAAb,CAAkBI,OAAnB,CAhBH,qEAAH,kBAAPhB,CAAAA,OAAO,4CAAb","sourcesContent":["import axios from 'axios';\r\nimport { useQuery } from 'react-query';\r\n\r\nexport const useUser = (email, token) =>\r\n  useQuery(['user', email, token], getUser, {\r\n    retry: 0,\r\n    staleTime: 60 * 1000 * 5,\r\n    cacheTime: 0,\r\n  });\r\n\r\nconst getUser = async (context) => {\r\n  const [, email, token] = context.queryKey;\r\n  try {\r\n    const res = await axios({\r\n      method: 'get',\r\n      url: `/api/admin/users?email=${email}`,\r\n      headers: {\r\n        Authorization: `${token}`,\r\n      },\r\n    });\r\n    if (res.status >= 200 && res.status < 300) {\r\n      return res.data;\r\n    }\r\n  } catch (err) {\r\n    if (axios.isAxiosError(err)) {\r\n      if (err && err.response) {\r\n        throw Error(err.response.data.message);\r\n      }\r\n    }\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}