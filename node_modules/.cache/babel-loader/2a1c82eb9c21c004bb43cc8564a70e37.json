{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nconst counter = cart => {\n  const reducer = (acc, item) => acc + item.quantity;\n  return cart.reduce(reducer, 0);\n};\nconst saveInStore = cart => {\n  localStorage.setItem('cart', JSON.stringify(cart));\n};\nexport const initialState = {\n  cartItems: localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : [],\n  counter: 0,\n  anchorEl: null,\n  isEmpty: null,\n  totalQuantity: localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')).reduce((acc, item) => acc + item.quantity, 0) : 0\n};\nexport const cart = createSlice({\n  name: 'cart',\n  initialState,\n  reducers: {\n    setAnchorEl: (state, action) => {\n      state.anchorEl = action.payload;\n    },\n    setIsEmpty: (state, action) => {\n      state.isEmpty = action.payload;\n    },\n    deleteItem: (state, action) => {\n      const {\n        productId,\n        size\n      } = action.payload;\n      const index = state.cartItems.findIndex(item => item.productId === productId && item.size === size);\n      state.cartItems.splice(index, 1);\n      if (state.cartItems.length === 0) {\n        state.anchorEl = null;\n      }\n      state.totalQuantity = counter(state.cartItems);\n      saveInStore(state.cartItems);\n    },\n    addItem: (state, action) => {\n      const match = state.cartItems.find(item => item.productId === action.payload.productId && item.size === action.payload.size);\n      const index = state.cartItems.indexOf(match);\n      match ? state.cartItems[index].quantity += action.payload.quantity : state.cartItems.push(action.payload);\n      state.totalQuantity = counter(state.cartItems);\n      saveInStore(state.cartItems);\n    },\n    rewriteCart: (state, action) => {\n      state.cartItems = action.payload;\n      state.totalQuantity = counter(state.cartItems);\n      saveInStore(state.cartItems);\n    }\n  }\n});\nexport const {\n  setAnchorEl,\n  setIsEmpty,\n  deleteItem,\n  addItem,\n  rewriteCart\n} = cart.actions;\nexport default cart.reducer;","map":{"version":3,"names":["createSlice","counter","cart","reducer","acc","item","quantity","reduce","saveInStore","localStorage","setItem","JSON","stringify","initialState","cartItems","getItem","parse","anchorEl","isEmpty","totalQuantity","name","reducers","setAnchorEl","state","action","payload","setIsEmpty","deleteItem","productId","size","index","findIndex","splice","length","addItem","match","find","indexOf","push","rewriteCart","actions"],"sources":["/Users/dcurchin/Desktop/final/grocery-shop-ui/src/redux/slices/cartSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n\nconst counter = (cart) => {\n  const reducer = (acc, item) => acc + item.quantity;\n  return cart.reduce(reducer, 0);\n};\nconst saveInStore = (cart) => {\n  localStorage.setItem('cart', JSON.stringify(cart));\n};\n\nexport const initialState = {\n  cartItems: localStorage.getItem('cart')\n    ? JSON.parse(localStorage.getItem('cart'))\n    : [],\n  counter: 0,\n  anchorEl: null,\n  isEmpty: null,\n  totalQuantity: localStorage.getItem('cart')\n    ? JSON.parse(localStorage.getItem('cart')).reduce(\n        (acc, item) => acc + item.quantity,\n        0\n      )\n    : 0,\n};\n\nexport const cart = createSlice({\n  name: 'cart',\n  initialState,\n  reducers: {\n    setAnchorEl: (state, action) => {\n      state.anchorEl = action.payload;\n    },\n    setIsEmpty: (state, action) => {\n      state.isEmpty = action.payload;\n    },\n    deleteItem: (state, action) => {\n      const { productId, size } = action.payload;\n      const index = state.cartItems.findIndex(\n        (item) => item.productId === productId && item.size === size\n      );\n      state.cartItems.splice(index, 1);\n      if (state.cartItems.length === 0) {\n        state.anchorEl = null;\n      }\n      state.totalQuantity = counter(state.cartItems);\n      saveInStore(state.cartItems);\n    },\n    addItem: (state, action) => {\n      const match = state.cartItems.find(\n        (item) =>\n          item.productId === action.payload.productId &&\n          item.size === action.payload.size\n      );\n      const index = state.cartItems.indexOf(match);\n      match\n        ? (state.cartItems[index].quantity += action.payload.quantity)\n        : state.cartItems.push(action.payload);\n      state.totalQuantity = counter(state.cartItems);\n      saveInStore(state.cartItems);\n    },\n    rewriteCart: (state, action) => {\n      state.cartItems = action.payload;\n      state.totalQuantity = counter(state.cartItems);\n      saveInStore(state.cartItems);\n    },\n  },\n});\n\nexport const { setAnchorEl, setIsEmpty, deleteItem, addItem, rewriteCart } =\n  cart.actions;\n\nexport default cart.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}