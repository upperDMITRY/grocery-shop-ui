{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dcurchin/Desktop/final/grocery-shop-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/dcurchin/Desktop/final/grocery-shop-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Button,Dialog,DialogActions,DialogContent,DialogContentText}from'@mui/material';import axios from'axios';import{useSelector,useDispatch}from'react-redux';import{setFilters,setOpenDialogRemoveUser,setAdminUsersError}from'../../../redux/slices/adminUsers';import{useUsersFilters}from'../../../hooks/useUsersFilters';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var dialogStyle={paddingLeft:'260px','& .MuiPaper-root':{borderRadius:2,minWidth:'200px',maxWidth:'600px'}};var dialogActionsStyle={display:'flex',justifyContent:'center',paddingBottom:'20px',paddingTop:0};var buttonStyle={padding:'4px 8px',margin:'0 10px'};var DialogRemoveUser=function DialogRemoveUser(){var dispatch=useDispatch();var token=useSelector(function(state){return state.auth.token;});var filters=useSelector(function(state){return state.adminUsers.filters;});var openDialogRemoveUser=useSelector(function(state){return state.adminUsers.openDialogRemoveUser;});var removingUser=useSelector(function(state){return state.adminUsers.removingUser;});var filteredUsers=useUsersFilters(filters,token);var numberOfElements=useSelector(function(state){return state.adminUsers.numberOfElements;});var pageNumber=useSelector(function(state){return state.adminUsers.filters.pageNumber;});var handleRemoveUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios({method:'delete',url:'/api/admin/users',headers:{Authorization:token},data:removingUser.email});case 3:response=_context.sent;if(response.status>=200&&response.status<300){dispatch(setOpenDialogRemoveUser(false));if(numberOfElements===1&&pageNumber>1){dispatch(setFilters({pageNumber:pageNumber-1}));}filteredUsers.refetch();}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);if(axios.isAxiosError(_context.t0)){if(_context.t0&&_context.t0.response){dispatch(setAdminUsersError(_context.t0.response.data.message));}}case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function handleRemoveUser(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Dialog,{sx:dialogStyle,open:openDialogRemoveUser,onClose:function onClose(){dispatch(setOpenDialogRemoveUser(false));},disableScrollLock:true,children:[/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(DialogContentText,{align:\"center\",children:[\"Remove user with email\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:removingUser.email}),/*#__PURE__*/_jsx(\"br\",{}),\"from the database?\"]})}),/*#__PURE__*/_jsxs(DialogActions,{sx:dialogActionsStyle,children:[/*#__PURE__*/_jsx(Button,{sx:buttonStyle,variant:\"outlined\",size:\"small\",onClick:handleRemoveUser,children:\"Yes\"}),/*#__PURE__*/_jsx(Button,{sx:buttonStyle,variant:\"outlined\",size:\"small\",onClick:function onClick(){dispatch(setOpenDialogRemoveUser(false));},autoFocus:true,children:\"No\"})]})]});};export default DialogRemoveUser;","map":{"version":3,"sources":["/Users/dcurchin/Desktop/final/grocery-shop-ui/src/components/adminPanel/users/DialogRemoveUser.jsx"],"names":["Button","Dialog","DialogActions","DialogContent","DialogContentText","axios","useSelector","useDispatch","setFilters","setOpenDialogRemoveUser","setAdminUsersError","useUsersFilters","dialogStyle","paddingLeft","borderRadius","minWidth","maxWidth","dialogActionsStyle","display","justifyContent","paddingBottom","paddingTop","buttonStyle","padding","margin","DialogRemoveUser","dispatch","token","state","auth","filters","adminUsers","openDialogRemoveUser","removingUser","filteredUsers","numberOfElements","pageNumber","handleRemoveUser","method","url","headers","Authorization","data","email","response","status","refetch","isAxiosError","message"],"mappings":"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","sourcesContent":["import {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogContentText,\r\n} from '@mui/material';\r\nimport axios from 'axios';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {\r\n  setFilters,\r\n  setOpenDialogRemoveUser,\r\n  setAdminUsersError,\r\n} from '../../../redux/slices/adminUsers';\r\nimport { useUsersFilters } from '../../../hooks/useUsersFilters';\r\n\r\nconst dialogStyle = {\r\n  paddingLeft: '260px',\r\n  '& .MuiPaper-root': {\r\n    borderRadius: 2,\r\n    minWidth: '200px',\r\n    maxWidth: '600px',\r\n  },\r\n};\r\n\r\nconst dialogActionsStyle = {\r\n  display: 'flex',\r\n  justifyContent: 'center',\r\n  paddingBottom: '20px',\r\n  paddingTop: 0,\r\n};\r\n\r\nconst buttonStyle = {\r\n  padding: '4px 8px',\r\n  margin: '0 10px',\r\n};\r\n\r\nconst DialogRemoveUser = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const token = useSelector((state) => state.auth.token);\r\n  const filters = useSelector((state) => state.adminUsers.filters);\r\n\r\n  const openDialogRemoveUser = useSelector(\r\n    (state) => state.adminUsers.openDialogRemoveUser\r\n  );\r\n\r\n  const removingUser = useSelector((state) => state.adminUsers.removingUser);\r\n\r\n  const filteredUsers = useUsersFilters(filters, token);\r\n\r\n  const numberOfElements = useSelector(\r\n    (state) => state.adminUsers.numberOfElements\r\n  );\r\n\r\n  const pageNumber = useSelector(\r\n    (state) => state.adminUsers.filters.pageNumber\r\n  );\r\n\r\n  const handleRemoveUser = async () => {\r\n    try {\r\n      const response = await axios({\r\n        method: 'delete',\r\n        url: '/api/admin/users',\r\n        headers: {\r\n          Authorization: token,\r\n        },\r\n        data: removingUser.email,\r\n      });\r\n\r\n      if (response.status >= 200 && response.status < 300) {\r\n        dispatch(setOpenDialogRemoveUser(false));\r\n\r\n        if (numberOfElements === 1 && pageNumber > 1) {\r\n          dispatch(setFilters({ pageNumber: pageNumber - 1 }));\r\n        }\r\n\r\n        filteredUsers.refetch();\r\n      }\r\n    } catch (err) {\r\n      if (axios.isAxiosError(err)) {\r\n        if (err && err.response) {\r\n          dispatch(setAdminUsersError(err.response.data.message));\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      sx={dialogStyle}\r\n      open={openDialogRemoveUser}\r\n      onClose={() => {\r\n        dispatch(setOpenDialogRemoveUser(false));\r\n      }}\r\n      disableScrollLock\r\n    >\r\n      <DialogContent>\r\n        <DialogContentText align=\"center\">\r\n          Remove user with email\r\n          <br />\r\n          <b>{removingUser.email}</b>\r\n          <br />\r\n          from the database?\r\n        </DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions sx={dialogActionsStyle}>\r\n        <Button\r\n          sx={buttonStyle}\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          onClick={handleRemoveUser}\r\n        >\r\n          Yes\r\n        </Button>\r\n        <Button\r\n          sx={buttonStyle}\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          onClick={() => {\r\n            dispatch(setOpenDialogRemoveUser(false));\r\n          }}\r\n          autoFocus\r\n        >\r\n          No\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default DialogRemoveUser;\r\n"]},"metadata":{},"sourceType":"module"}