{"ast":null,"code":"import { Container } from \"./render/Container\";\nimport { HorizontalLayout } from \"./render/HorizontalLayout\";\nimport { VerticalLayout } from \"./render/VerticalLayout\";\nimport { GridLayout } from \"./render/GridLayout\";\nimport { Disposer } from \"./util/Disposer\";\nimport { ResizeSensor } from \"./util/ResizeSensor\";\nimport { InterfaceColors } from \"./util/InterfaceColors\";\nimport { Graphics } from \"./render/Graphics\";\nimport { Rectangle } from \"./render/Rectangle\";\nimport { Tooltip } from \"./render/Tooltip\";\nimport { NumberFormatter } from \"./util/NumberFormatter\";\nimport { DateFormatter } from \"./util/DateFormatter\";\nimport { DurationFormatter } from \"./util/DurationFormatter\";\nimport { Language } from \"./util/Language\";\nimport { EventDispatcher } from \"./util/EventDispatcher\";\nimport { DefaultTheme } from \"../themes/DefaultTheme\";\nimport { CanvasRenderer } from \"./render/backend/CanvasRenderer\";\nimport { p100, percent } from \"./util/Percent\";\nimport { color } from \"./util/Color\";\nimport { populateString } from \"./util/PopulateString\";\nimport { registry } from \"./Registry\";\nimport * as $order from \"./util/Order\";\nimport * as $array from \"./util/Array\";\nimport * as $object from \"./util/Object\";\nimport * as $utils from \"./util/Utils\";\nimport en from \"../../locales/en\";\nfunction rAF(fps, callback) {\n  if (fps == null) {\n    requestAnimationFrame(callback);\n  } else {\n    setTimeout(function () {\n      requestAnimationFrame(callback);\n    }, 1000 / fps);\n  }\n}\n// TODO implement Disposer\n/**\r\n * Root element of the chart.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/getting-started/#Root_element} for more info\r\n */\nvar Root = /** @class */function () {\n  function Root(id, isReal) {\n    /**\r\n     * A reference to original chart container (div element).\r\n     */\n    Object.defineProperty(this, \"dom\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_inner\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_isDirty\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, \"_isDirtyParents\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, \"_dirty\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: {}\n    });\n    Object.defineProperty(this, \"_dirtyParents\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: {}\n    });\n    Object.defineProperty(this, \"_dirtyBounds\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: {}\n    });\n    Object.defineProperty(this, \"_dirtyPositions\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: {}\n    });\n    Object.defineProperty(this, \"_ticker\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: null\n    });\n    Object.defineProperty(this, \"_tickers\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: []\n    });\n    /**\r\n     * Root's event dispatcher.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/events/} for more info\r\n     */\n    Object.defineProperty(this, \"events\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: new EventDispatcher()\n    });\n    /**\r\n     * @todo needs description\r\n     */\n    Object.defineProperty(this, \"animationTime\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: null\n    });\n    Object.defineProperty(this, \"_animations\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, \"_renderer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: new CanvasRenderer()\n    });\n    Object.defineProperty(this, \"_rootContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * Main content container.\r\n     */\n    Object.defineProperty(this, \"container\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * A [[Container]] used to display tooltips in.\r\n     */\n    Object.defineProperty(this, \"tooltipContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_tooltip\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    // Locale-related\n    /**\r\n     * @ignore\r\n     */\n    Object.defineProperty(this, \"language\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: Language.new(this, {})\n    });\n    /**\r\n     * Locale used by the chart.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/locales/}\r\n     */\n    Object.defineProperty(this, \"locale\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: en\n    });\n    // Date-time related\n    /**\r\n     * Use UTC when formatting date/time.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/#UTC_and_time_zones} for more info\r\n     */\n    Object.defineProperty(this, \"utc\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    /**\r\n     * Use specific time zone when formatting date/time.\r\n     *\r\n     * @ignore timezones are not yet supported\r\n     */\n    Object.defineProperty(this, \"timezone\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: null\n    });\n    /**\r\n     * The maximum FPS that the Root will run at.\r\n     *\r\n     * If `undefined` it will run at the highest FPS.\r\n     */\n    Object.defineProperty(this, \"fps\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * Number formatter.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-numbers/} for more info\r\n     */\n    Object.defineProperty(this, \"numberFormatter\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: NumberFormatter.new(this, {})\n    });\n    /**\r\n     * Date/time formatter.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\r\n     */\n    Object.defineProperty(this, \"dateFormatter\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: DateFormatter.new(this, {})\n    });\n    /**\r\n     * Duration formatter.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\r\n     */\n    Object.defineProperty(this, \"durationFormatter\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: DurationFormatter.new(this, {})\n    });\n    // Accessibility\n    /**\r\n     * Global tab index for using for the whole chart\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\r\n     */\n    Object.defineProperty(this, \"tabindex\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    //@todo maybe make this better\n    Object.defineProperty(this, \"_tabindexes\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, \"_focusElementDirty\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, \"_focusElementContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_focusedSprite\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_keyboardDragPoint\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_tooltipElementContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_readerAlertElement\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_logo\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * Used for dynamically-created CSS and JavaScript with strict source policies.\r\n     */\n    Object.defineProperty(this, \"nonce\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * Special color set to be used for various controls.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/#Interface_colors} for more info\r\n     */\n    Object.defineProperty(this, \"interfaceColors\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * An instance of vertical layout object that can be used to set `layout` setting\r\n     * of a [[Container]].\r\n     *\r\n     * @default VerticalLayout.new()\r\n     */\n    Object.defineProperty(this, \"verticalLayout\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: VerticalLayout.new(this, {})\n    });\n    /**\r\n     * An instance of horizontal layout object that can be used to set `layout` setting\r\n     * of a [[Container]].\r\n     *\r\n     * @default HorizontalLayout.new()\r\n     */\n    Object.defineProperty(this, \"horizontalLayout\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: HorizontalLayout.new(this, {})\n    });\n    /**\r\n     * An instance of grid layout object that can be used to set `layout` setting\r\n     * of a [[Container]].\r\n     *\r\n     * @default VerticalLayout.new()\r\n     */\n    Object.defineProperty(this, \"gridLayout\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: GridLayout.new(this, {})\n    });\n    /**\r\n     * Indicates whether chart should resized automatically when parent container\r\n     * width and/or height changes.\r\n     *\r\n     * If disabled (`autoResize = false`) you can make the chart resize manually\r\n     * by calling root element's `resize()` method.\r\n     */\n    Object.defineProperty(this, \"autoResize\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: true\n    });\n    Object.defineProperty(this, \"_isDisposed\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, \"_disposers\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, \"_resizeSensorDisposer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"_tooltips\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: []\n    });\n    if (!isReal) {\n      throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\n    }\n    var dom;\n    if (id instanceof HTMLElement) {\n      dom = id;\n    } else {\n      dom = document.getElementById(id);\n    }\n    $array.each(registry.rootElements, function (root) {\n      if (root.dom === dom) {\n        throw new Error(\"You cannot have multiple Roots on the same DOM node\");\n      }\n    });\n    this.interfaceColors = InterfaceColors.new(this, {});\n    if (dom === null) {\n      throw new Error(\"Could not find HTML element with id `\" + id + \"`\");\n    }\n    this.dom = dom;\n    var inner = document.createElement(\"div\");\n    inner.style.position = \"relative\";\n    dom.appendChild(inner);\n    this._inner = inner;\n    registry.rootElements.push(this);\n  }\n  Object.defineProperty(Root, \"new\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (id) {\n      var root = new Root(id, true);\n      root._init();\n      return root;\n    }\n  });\n  Object.defineProperty(Root.prototype, \"moveDOM\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (id) {\n      var dom;\n      if (id instanceof HTMLElement) {\n        dom = id;\n      } else {\n        dom = document.getElementById(id);\n      }\n      if (dom) {\n        while (this.dom.childNodes.length > 0) {\n          dom.appendChild(this.dom.childNodes[0]);\n        }\n        this.dom = dom;\n        this._initResizeSensor();\n        this.resize();\n      }\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_handleLogo\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      if (this._logo) {\n        if (this._rootContainer.getPrivate(\"width\", 0) <= 150 || this._rootContainer.getPrivate(\"height\", 0) <= 60) {\n          this._logo.hide();\n        } else {\n          this._logo.show();\n        }\n      }\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_showBranding\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      if (!this._logo) {\n        var logo = this.tooltipContainer.children.push(Container.new(this, {\n          interactive: true,\n          interactiveChildren: false,\n          position: \"absolute\",\n          setStateOnChildren: true,\n          paddingTop: 9,\n          paddingRight: 9,\n          paddingBottom: 9,\n          paddingLeft: 9,\n          scale: .6,\n          y: percent(100),\n          centerY: p100,\n          tooltipText: \"Created using amCharts 5\",\n          tooltipX: p100,\n          cursorOverStyle: \"pointer\",\n          background: Rectangle.new(this, {\n            fill: color(0x474758),\n            fillOpacity: 0,\n            tooltipY: 5\n          })\n        }));\n        var tooltip = Tooltip.new(this, {\n          pointerOrientation: \"horizontal\",\n          paddingTop: 4,\n          paddingRight: 7,\n          paddingBottom: 4,\n          paddingLeft: 7\n        });\n        tooltip.label.setAll({\n          fontSize: 12\n        });\n        tooltip.get(\"background\").setAll({\n          fill: this.interfaceColors.get(\"background\"),\n          stroke: this.interfaceColors.get(\"grid\"),\n          strokeOpacity: 0.3\n        });\n        logo.set(\"tooltip\", tooltip);\n        logo.events.on(\"click\", function () {\n          window.open(\"https://www.amcharts.com/\", \"_blank\");\n        });\n        logo.states.create(\"hover\", {});\n        var m = logo.children.push(Graphics.new(this, {\n          stroke: color(0xcccccc),\n          strokeWidth: 3,\n          svgPath: \"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6\"\n        }));\n        m.states.create(\"hover\", {\n          stroke: color(0x3CABFF)\n        });\n        var a = logo.children.push(Graphics.new(this, {\n          stroke: color(0x888888),\n          strokeWidth: 3,\n          svgPath: \"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0\"\n        }));\n        a.states.create(\"hover\", {\n          stroke: color(0x474758)\n        });\n        //logo.set(\"tooltip\", this._tooltip);\n        //logo.setPrivate(\"tooltipTarget\", logo.get(\"background\"));\n        this._logo = logo;\n        this._handleLogo();\n      }\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_init\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var _this = this;\n      var renderer = this._renderer;\n      var rootContainer = Container.new(this, {\n        visible: true,\n        width: this.dom.clientWidth,\n        height: this.dom.clientHeight\n      });\n      this._rootContainer = rootContainer;\n      this._rootContainer._defaultThemes.push(DefaultTheme.new(this));\n      var container = rootContainer.children.push(Container.new(this, {\n        visible: true,\n        width: p100,\n        height: p100\n      }));\n      this.container = container;\n      renderer.resize(this.dom.clientWidth, this.dom.clientHeight);\n      //@todo: better appendChild - refer\n      this._inner.appendChild(renderer.view);\n      // TODO: TMP TMP TMP for testing only, remove\n      //document.body.appendChild((<any>renderer)._ghostView);\n      this._initResizeSensor();\n      // Create element which is used to make announcements to screen reader\n      var readerAlertElement = document.createElement(\"div\");\n      readerAlertElement.setAttribute(\"role\", \"alert\");\n      readerAlertElement.style.zIndex = \"-100000\";\n      readerAlertElement.style.opacity = \"0\";\n      readerAlertElement.style.position = \"absolute\";\n      readerAlertElement.style.top = \"0\";\n      this._readerAlertElement = readerAlertElement;\n      this._inner.appendChild(this._readerAlertElement);\n      var focusElementContainer = document.createElement(\"div\");\n      focusElementContainer.style.position = \"absolute\";\n      focusElementContainer.style.pointerEvents = \"none\";\n      focusElementContainer.style.top = \"0px\";\n      focusElementContainer.style.left = \"0px\";\n      focusElementContainer.style.overflow = \"hidden\";\n      focusElementContainer.style.width = this.dom.clientWidth + \"px\";\n      focusElementContainer.style.height = this.dom.clientHeight + \"px\";\n      $utils.setInteractive(focusElementContainer, false);\n      this._focusElementContainer = focusElementContainer;\n      this._inner.appendChild(this._focusElementContainer);\n      this._tooltipElementContainer = document.createElement(\"div\");\n      this._inner.appendChild(this._tooltipElementContainer);\n      // Add keyboard events for accessibility, e.g. simulating drag with arrow\n      // keys and click with ENTER\n      if ($utils.supports(\"keyboardevents\")) {\n        this._disposers.push($utils.addEventListener(document, \"keydown\", function (ev) {\n          var focusedSprite = _this._focusedSprite;\n          if (focusedSprite) {\n            if (ev.keyCode == 27) {\n              // ESC pressed - lose current focus\n              $utils.blur();\n              _this._focusedSprite = undefined;\n            }\n            var dragOffsetX = 0;\n            var dragOffsetY = 0;\n            // TODO: figure out if using bogus MouseEvent is fine, or it will\n            // fail on some platforms\n            switch (ev.keyCode) {\n              case 13:\n                ev.preventDefault();\n                var downEvent = renderer.getEvent(new MouseEvent(\"click\"));\n                focusedSprite.events.dispatch(\"click\", {\n                  type: \"click\",\n                  originalEvent: downEvent.event,\n                  point: downEvent.point,\n                  simulated: true,\n                  target: focusedSprite\n                });\n                return;\n              case 37:\n                dragOffsetX = -6;\n                break;\n              case 39:\n                dragOffsetX = 6;\n                break;\n              case 38:\n                dragOffsetY = -6;\n                break;\n              case 40:\n                dragOffsetY = 6;\n                break;\n              default:\n                return;\n            }\n            if (dragOffsetX != 0 || dragOffsetY != 0) {\n              ev.preventDefault();\n              if (!focusedSprite.isDragging()) {\n                // Start dragging\n                _this._keyboardDragPoint = {\n                  x: 0,\n                  y: 0\n                };\n                var downEvent = renderer.getEvent(new MouseEvent(\"mousedown\", {\n                  clientX: 0,\n                  clientY: 0\n                }));\n                if (focusedSprite.events.isEnabled(\"pointerdown\")) {\n                  focusedSprite.events.dispatch(\"pointerdown\", {\n                    type: \"pointerdown\",\n                    originalEvent: downEvent.event,\n                    point: downEvent.point,\n                    simulated: true,\n                    target: focusedSprite\n                  });\n                }\n              } else {\n                // Move focus marker\n                //this._positionFocusElement(focusedSprite);\n              }\n              // Move incrementally\n              var dragPoint = _this._keyboardDragPoint;\n              dragPoint.x += dragOffsetX;\n              dragPoint.y += dragOffsetY;\n              var moveEvent = renderer.getEvent(new MouseEvent(\"mousemove\", {\n                clientX: dragPoint.x,\n                clientY: dragPoint.y\n              }), false);\n              if (focusedSprite.events.isEnabled(\"globalpointermove\")) {\n                focusedSprite.events.dispatch(\"globalpointermove\", {\n                  type: \"globalpointermove\",\n                  originalEvent: moveEvent.event,\n                  point: moveEvent.point,\n                  simulated: true,\n                  target: focusedSprite\n                });\n              }\n            }\n          }\n        }));\n        document.addEventListener(\"keyup\", function (ev) {\n          if (_this._focusedSprite) {\n            var focusedSprite = _this._focusedSprite;\n            var keyCode = ev.keyCode;\n            switch (keyCode) {\n              case 37:\n              case 39:\n              case 38:\n              case 40:\n                if (focusedSprite.isDragging()) {\n                  // Simulate drag stop\n                  var dragPoint = _this._keyboardDragPoint;\n                  var upEvent = renderer.getEvent(new MouseEvent(\"mouseup\", {\n                    clientX: dragPoint.x,\n                    clientY: dragPoint.y\n                  }));\n                  if (focusedSprite.events.isEnabled(\"globalpointerup\")) {\n                    focusedSprite.events.dispatch(\"globalpointerup\", {\n                      type: \"globalpointerup\",\n                      originalEvent: upEvent.event,\n                      point: upEvent.point,\n                      simulated: true,\n                      target: focusedSprite\n                    });\n                  }\n                  //this._positionFocusElement(focusedSprite);\n                  _this._keyboardDragPoint = undefined;\n                  // @todo dispatch mouseup event instead of calling dragStop?\n                  // this._dispatchEvent(\"globalpointerup\", target, upEvent);\n                  return;\n                } else if (focusedSprite.get(\"focusableGroup\")) {\n                  // Find next item in focusable group\n                  var group_1 = focusedSprite.get(\"focusableGroup\");\n                  var items = _this._tabindexes.filter(function (item) {\n                    return item.get(\"focusableGroup\") == group_1;\n                  });\n                  var index = items.indexOf(focusedSprite);\n                  var lastIndex = items.length - 1;\n                  index += keyCode == 39 || keyCode == 40 ? 1 : -1;\n                  if (index < 0) {\n                    index = lastIndex;\n                  } else if (index > lastIndex) {\n                    index = 0;\n                  }\n                  $utils.focus(items[index].getPrivate(\"focusElement\"));\n                }\n                break;\n            }\n          }\n        });\n      }\n      this._startTicker();\n      this.setThemes([]);\n      this._addTooltip();\n      if (!this._hasLicense()) {\n        this._showBranding();\n      }\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_initResizeSensor\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var _this = this;\n      if (this._resizeSensorDisposer) {\n        this._resizeSensorDisposer.dispose();\n      }\n      this._resizeSensorDisposer = new ResizeSensor(this.dom, function () {\n        if (_this.autoResize) {\n          _this.resize();\n        }\n      });\n      this._disposers.push(this._resizeSensorDisposer);\n    }\n  });\n  /**\r\n   * If automatic resizing of char is disabled (`root.autoResize = false`), it\r\n   * can be resized manually by calling this method.\r\n   */\n  Object.defineProperty(Root.prototype, \"resize\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var dom = this.dom;\n      var w = dom.clientWidth;\n      var h = dom.clientHeight;\n      if (w > 0 && h > 0) {\n        var focusElementContainer = this._focusElementContainer;\n        focusElementContainer.style.width = w + \"px\";\n        focusElementContainer.style.height = h + \"px\";\n        this._renderer.resize(w, h);\n        var rootContainer = this._rootContainer;\n        rootContainer.setPrivate(\"width\", w);\n        rootContainer.setPrivate(\"height\", h);\n        this._render();\n        this._handleLogo();\n      }\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_render\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      this._renderer.render(this._rootContainer._display);\n      if (this._focusElementDirty) {\n        this._updateCurrentFocus();\n        this._focusElementDirty = false;\n      }\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_runTickers\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (currentTime) {\n      $array.each(this._tickers, function (f) {\n        f(currentTime);\n      });\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_runAnimations\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (currentTime) {\n      $array.keepIf(this._animations, function (animation) {\n        return !animation._runAnimation(currentTime);\n      });\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_runDirties\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var _this = this;\n      //console.log(\"tick **************************************************************\");\n      var allParents = {};\n      while (this._isDirtyParents) {\n        // This must be before calling _prepareChildren\n        this._isDirtyParents = false;\n        $object.keys(this._dirtyParents).forEach(function (key) {\n          var parent = _this._dirtyParents[key];\n          delete _this._dirtyParents[key];\n          if (!parent.isDisposed()) {\n            allParents[parent.uid] = parent;\n            parent._prepareChildren();\n          }\n        });\n      }\n      $object.keys(allParents).forEach(function (key) {\n        allParents[key]._updateChildren();\n      });\n      var objects = [];\n      //\t\tconsole.log(\"_beforeChanged\")\n      $object.keys(this._dirty).forEach(function (key) {\n        var entity = _this._dirty[key];\n        if (entity.isDisposed()) {\n          delete _this._dirty[entity.uid];\n        } else {\n          objects.push(entity);\n          entity._beforeChanged();\n        }\n      });\n      //\t\tconsole.log(\"_changed\")\n      objects.forEach(function (entity) {\n        entity._changed();\n        delete _this._dirty[entity.uid];\n        entity._clearDirty();\n      });\n      this._isDirty = false;\n      var depths = {};\n      var bounds = [];\n      $object.keys(this._dirtyBounds).forEach(function (key) {\n        var entity = _this._dirtyBounds[key];\n        delete _this._dirtyBounds[key];\n        if (!entity.isDisposed()) {\n          depths[entity.uid] = entity.depth();\n          bounds.push(entity);\n        }\n      });\n      // High depth -> low depth\n      bounds.sort(function (x, y) {\n        return $order.compare(depths[y.uid], depths[x.uid]);\n      });\n      //\t\tconsole.log(\"_updateBounds\")\n      bounds.forEach(function (entity) {\n        entity._updateBounds();\n      });\n      //\t\tconsole.log(\"_updatePosition\")\n      var dirtyPositions = this._dirtyPositions;\n      $object.keys(dirtyPositions).forEach(function (key) {\n        var sprite = dirtyPositions[key];\n        delete dirtyPositions[key];\n        if (!sprite.isDisposed()) {\n          sprite._updatePosition();\n        }\n      });\n      //\t\tconsole.log(\"_afterChanged\")\n      objects.forEach(function (entity) {\n        entity._afterChanged();\n      });\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_runTicker\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (currentTime) {\n      if (!this.isDisposed()) {\n        this.animationTime = currentTime;\n        if (this.events.isEnabled(\"framestarted\")) {\n          this.events.dispatch(\"framestarted\", {\n            type: \"framestarted\",\n            target: this,\n            timestamp: currentTime\n          });\n        }\n        this._runTickers(currentTime);\n        this._runAnimations(currentTime);\n        this._runDirties();\n        this._render();\n        if (this.events.isEnabled(\"frameended\")) {\n          this.events.dispatch(\"frameended\", {\n            type: \"frameended\",\n            target: this,\n            timestamp: currentTime\n          });\n        }\n        // No more work to do\n        if (this._tickers.length === 0 && this._animations.length === 0 && !this._isDirty) {\n          this._ticker = null;\n          this.animationTime = null;\n        } else {\n          rAF(this.fps, this._ticker);\n        }\n      }\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_startTicker\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var _this = this;\n      if (this._ticker === null) {\n        this.animationTime = null;\n        this._ticker = function (currentTime) {\n          _this._runTicker(currentTime);\n        };\n        rAF(this.fps, this._ticker);\n      }\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_addDirtyEntity\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (entity) {\n      if (this._dirty[entity.uid] === undefined) {\n        this._isDirty = true;\n        this._dirty[entity.uid] = entity;\n        this._startTicker();\n      }\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_addDirtyParent\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (parent) {\n      if (this._dirtyParents[parent.uid] === undefined) {\n        this._isDirty = true;\n        this._isDirtyParents = true;\n        this._dirtyParents[parent.uid] = parent;\n        this._startTicker();\n      }\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_addDirtyBounds\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (entity) {\n      if (this._dirtyBounds[entity.uid] === undefined) {\n        this._isDirty = true;\n        this._dirtyBounds[entity.uid] = entity;\n        this._startTicker();\n      }\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_addDirtyPosition\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (sprite) {\n      if (this._dirtyPositions[sprite.uid] === undefined) {\n        this._isDirty = true;\n        this._dirtyPositions[sprite.uid] = sprite;\n        this._startTicker();\n      }\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_addAnimation\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (animation) {\n      // TODO use numeric id instead\n      if (this._animations.indexOf(animation) === -1) {\n        this._animations.push(animation);\n        this._startTicker();\n      }\n    }\n  });\n  Object.defineProperty(Root.prototype, \"eachFrame\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (f) {\n      var _this = this;\n      this._tickers.push(f);\n      this._startTicker();\n      return new Disposer(function () {\n        $array.removeFirst(_this._tickers, f);\n      });\n    }\n  });\n  /**\r\n   * Returns width of the target container, in pixels.\r\n   *\r\n   * @return Width\r\n   */\n  Object.defineProperty(Root.prototype, \"width\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      return this.dom.clientWidth;\n    }\n  });\n  /**\r\n   * Returns height of the target container, in pixels.\r\n   *\r\n   * @return Height\r\n   */\n  Object.defineProperty(Root.prototype, \"height\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      return this.dom.clientHeight;\n    }\n  });\n  /**\r\n   * Disposes root and all the content in it.\r\n   */\n  Object.defineProperty(Root.prototype, \"dispose\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      if (!this._isDisposed) {\n        this._isDisposed = true;\n        this._rootContainer.dispose();\n        this._renderer.dispose();\n        this.horizontalLayout.dispose();\n        this.verticalLayout.dispose();\n        this.interfaceColors.dispose();\n        $array.each(this._disposers, function (x) {\n          x.dispose();\n        });\n        if (this._inner) {\n          $utils.removeElement(this._inner);\n        }\n        $array.remove(registry.rootElements, this);\n      }\n    }\n  });\n  /**\r\n   * Returns `true` if root element is disposed.\r\n   *\r\n   * @return Disposed?\r\n   */\n  Object.defineProperty(Root.prototype, \"isDisposed\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      return this._isDisposed;\n    }\n  });\n  /**\r\n   * Triggers screen reader read out a message.\r\n   *\r\n   * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\r\n   * @param  text  Alert text\r\n   */\n  Object.defineProperty(Root.prototype, \"readerAlert\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (text) {\n      this._readerAlertElement.innerHTML = text;\n    }\n  });\n  /**\r\n   * Sets themes to be used for the chart.\r\n   *\r\n   * @see {@link https://www.amcharts.com/docs/v5/concepts/themes/} for more info\r\n   * @param  themes  A list of themes\r\n   */\n  Object.defineProperty(Root.prototype, \"setThemes\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (themes) {\n      this._rootContainer.set(\"themes\", themes);\n      // otherwise new themes are not applied\n      var tooltipContainer = this.tooltipContainer;\n      if (tooltipContainer) {\n        tooltipContainer._applyThemes();\n      }\n      // @todo review this\n      var interfaceColors = this.interfaceColors;\n      if (interfaceColors) {\n        interfaceColors._applyThemes();\n      }\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_addTooltip\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      if (!this.tooltipContainer) {\n        var tooltipContainer = this._rootContainer.children.push(Container.new(this, {\n          position: \"absolute\",\n          isMeasured: false,\n          width: p100,\n          height: p100,\n          layer: 100\n        }));\n        this.tooltipContainer = tooltipContainer;\n        var tooltip = Tooltip.new(this, {});\n        this.container.set(\"tooltip\", tooltip);\n        tooltip.hide(0);\n        this._tooltip = tooltip;\n      }\n    }\n  });\n  /**\r\n   * Accesibility\r\n   */\n  Object.defineProperty(Root.prototype, \"_registerTabindexOrder\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (target) {\n      if (target.get(\"focusable\")) {\n        $array.pushOne(this._tabindexes, target);\n      } else {\n        $array.remove(this._tabindexes, target);\n      }\n      this._invalidateTabindexes();\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_unregisterTabindexOrder\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (target) {\n      $array.remove(this._tabindexes, target);\n      this._invalidateTabindexes();\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_invalidateTabindexes\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var _this = this;\n      this._tabindexes.sort(function (a, b) {\n        var aindex = a.get(\"tabindexOrder\", 0);\n        var bindex = b.get(\"tabindexOrder\", 0);\n        if (aindex == bindex) {\n          return 0;\n        } else if (aindex > bindex) {\n          return 1;\n        } else {\n          return -1;\n        }\n      });\n      var groups = [];\n      $array.each(this._tabindexes, function (item, index) {\n        if (!item.getPrivate(\"focusElement\")) {\n          _this._makeFocusElement(index, item);\n        } else {\n          _this._moveFocusElement(index, item);\n        }\n        var group = item.get(\"focusableGroup\");\n        if (group) {\n          if (groups.indexOf(group) !== -1) {\n            // Non-first element in the group, make it not directly focusable\n            item.getPrivate(\"focusElement\").setAttribute(\"tabindex\", \"-1\");\n          } else {\n            groups.push(group);\n          }\n        }\n      });\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_updateCurrentFocus\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      if (this._focusedSprite) {\n        this._decorateFocusElement(this._focusedSprite);\n        this._positionFocusElement(this._focusedSprite);\n      }\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_decorateFocusElement\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (target, focusElement) {\n      // Decorate with proper accessibility attributes\n      if (!focusElement) {\n        focusElement = target.getPrivate(\"focusElement\");\n      }\n      if (!focusElement) {\n        return;\n      }\n      if (target.get(\"visible\") && target.get(\"role\") != \"tooltip\" && !target.isHidden()) {\n        if (focusElement.getAttribute(\"tabindex\") != \"-1\") {\n          focusElement.setAttribute(\"tabindex\", \"\" + this.tabindex);\n        }\n      } else {\n        focusElement.removeAttribute(\"tabindex\");\n      }\n      var role = target.get(\"role\");\n      if (role) {\n        focusElement.setAttribute(\"role\", role);\n      } else {\n        focusElement.removeAttribute(\"role\");\n      }\n      var ariaLabel = target.get(\"ariaLabel\");\n      if (ariaLabel) {\n        var label = populateString(target, ariaLabel);\n        focusElement.setAttribute(\"aria-label\", label);\n      } else {\n        focusElement.removeAttribute(\"aria-label\");\n      }\n      var ariaLive = target.get(\"ariaLive\");\n      if (ariaLive) {\n        focusElement.setAttribute(\"aria-live\", ariaLive);\n      } else {\n        focusElement.removeAttribute(\"aria-live\");\n      }\n      var ariaChecked = target.get(\"ariaChecked\");\n      if (ariaChecked != null) {\n        focusElement.setAttribute(\"aria-checked\", ariaChecked ? \"true\" : \"false\");\n      } else {\n        focusElement.removeAttribute(\"aria-checked\");\n      }\n      if (target.get(\"ariaHidden\")) {\n        focusElement.setAttribute(\"aria-hidden\", \"hidden\");\n      } else {\n        focusElement.removeAttribute(\"aria-hidden\");\n      }\n      var ariaOrientation = target.get(\"ariaOrientation\");\n      if (ariaOrientation) {\n        focusElement.setAttribute(\"aria-orientation\", ariaOrientation);\n      } else {\n        focusElement.removeAttribute(\"aria-orientation\");\n      }\n      var ariaValueNow = target.get(\"ariaValueNow\");\n      if (ariaValueNow) {\n        focusElement.setAttribute(\"aria-valuenow\", ariaValueNow);\n      } else {\n        focusElement.removeAttribute(\"aria-valuenow\");\n      }\n      var ariaValueText = target.get(\"ariaValueText\");\n      if (ariaValueText) {\n        focusElement.setAttribute(\"aria-valuetext\", ariaValueText);\n      } else {\n        focusElement.removeAttribute(\"aria-valuetext\");\n      }\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_makeFocusElement\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (index, target) {\n      var _this = this;\n      if (target.getPrivate(\"focusElement\")) {\n        return;\n      }\n      // Init\n      var focusElement = document.createElement(\"div\");\n      if (target.get(\"role\") != \"tooltip\") {\n        focusElement.tabIndex = this.tabindex;\n      }\n      focusElement.style.position = \"absolute\";\n      $utils.setInteractive(focusElement, false);\n      target.setPrivate(\"focusElement\", focusElement);\n      this._decorateFocusElement(target);\n      focusElement.addEventListener(\"focus\", function (ev) {\n        _this._handleFocus(ev, index);\n      });\n      focusElement.addEventListener(\"blur\", function (ev) {\n        _this._handleBlur(ev, index);\n      });\n      this._moveFocusElement(index, target);\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_removeFocusElement\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (target) {\n      // Init\n      var container = this._focusElementContainer;\n      var focusElement = target.getPrivate(\"focusElement\");\n      container.removeChild(focusElement);\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_moveFocusElement\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (index, target) {\n      // Get container\n      var container = this._focusElementContainer;\n      var focusElement = target.getPrivate(\"focusElement\");\n      if (focusElement === this._focusElementContainer.children[index]) {\n        // Nothing to do\n        return;\n      }\n      var next = this._focusElementContainer.children[index + 1];\n      if (next) {\n        container.insertBefore(focusElement, next);\n      } else {\n        container.append(focusElement);\n      }\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_positionFocusElement\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (target) {\n      var bounds = target.globalBounds();\n      var width = bounds.right == bounds.left ? target.width() : bounds.right - bounds.left;\n      var height = bounds.top == bounds.bottom ? target.height() : bounds.bottom - bounds.top;\n      var focusElement = target.getPrivate(\"focusElement\");\n      focusElement.style.top = bounds.top - 2 + \"px\";\n      focusElement.style.left = bounds.left - 2 + \"px\";\n      focusElement.style.width = width + 4 + \"px\";\n      focusElement.style.height = height + 4 + \"px\";\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_handleFocus\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (ev, index) {\n      // Get element\n      var focused = this._tabindexes[index];\n      // Size and position\n      this._positionFocusElement(focused);\n      //this._decorateFocusElement(focused);\n      this._focusedSprite = focused;\n      if (focused.events.isEnabled(\"focus\")) {\n        focused.events.dispatch(\"focus\", {\n          type: \"focus\",\n          originalEvent: ev,\n          target: focused\n        });\n      }\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_handleBlur\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (ev, _index) {\n      var focused = this._focusedSprite;\n      if (focused && focused.events.isEnabled(\"blur\")) {\n        focused.events.dispatch(\"blur\", {\n          type: \"blur\",\n          originalEvent: ev,\n          target: focused\n        });\n      }\n      this._focusedSprite = undefined;\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n  Object.defineProperty(Root.prototype, \"updateTooltip\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (target) {\n      var text = target._getText();\n      var tooltipElement = target.getPrivate(\"tooltipElement\");\n      if (target.get(\"role\") == \"tooltip\" && text != \"\") {\n        if (!tooltipElement) {\n          tooltipElement = this._makeTooltipElement(target);\n        }\n        if (tooltipElement.innerHTML != text) {\n          tooltipElement.innerHTML = text;\n        }\n      } else if (tooltipElement) {\n        tooltipElement.remove();\n        target.removePrivate(\"tooltipElement\");\n      }\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_makeTooltipElement\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (target) {\n      var container = this._tooltipElementContainer;\n      var tooltipElement = document.createElement(\"div\");\n      tooltipElement.style.position = \"absolute\";\n      tooltipElement.style.opacity = \"0.0000001\";\n      $utils.setInteractive(tooltipElement, false);\n      this._decorateFocusElement(target, tooltipElement);\n      container.append(tooltipElement);\n      target.setPrivate(\"tooltipElement\", tooltipElement);\n      return tooltipElement;\n    }\n  });\n  Object.defineProperty(Root.prototype, \"_invalidateAccessibility\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (target) {\n      this._focusElementDirty = true;\n      var focusElement = target.getPrivate(\"focusElement\");\n      if (target.get(\"focusable\")) {\n        if (focusElement) {\n          this._decorateFocusElement(target);\n          this._positionFocusElement(target);\n        }\n        // else {\n        // \tthis._renderer._makeFocusElement(0, this);\n        // }\n      } else if (focusElement) {\n        this._removeFocusElement(target);\n      }\n      //this.updateCurrentFocus();\n    }\n  });\n  /**\r\n   * Returns `true` if `target` is currently focused.\r\n   *\r\n   * @param   target  Target\r\n   * @return          Focused?\r\n   */\n  Object.defineProperty(Root.prototype, \"focused\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (target) {\n      return this._focusedSprite === target;\n    }\n  });\n  /**\r\n   * Converts document coordinates to coordinates withing root element.\r\n   *\r\n   * @param   point  Document point\r\n   * @return         Root point\r\n   */\n  Object.defineProperty(Root.prototype, \"documentPointToRoot\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (point) {\n      var bbox = this.dom.getBoundingClientRect();\n      return {\n        x: point.x - bbox.left,\n        y: point.y - bbox.top\n      };\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n  Object.defineProperty(Root.prototype, \"addDisposer\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (disposer) {\n      this._disposers.push(disposer);\n      return disposer;\n    }\n  });\n  /**\r\n  * To all the clever heads out there. Yes, we did not make any attempts to\r\n  * scramble this.\r\n  *\r\n  * This is a part of a tool meant for our users to manage their commercial\r\n  * licenses for removal of amCharts branding from charts.\r\n  *\r\n  * The only legit way to do so is to purchase a commercial license for amCharts:\r\n  * https://www.amcharts.com/online-store/\r\n  *\r\n  * Removing or altering this code, or disabling amCharts branding in any other\r\n  * way is against the license and thus illegal.\r\n  */\n  Object.defineProperty(Root.prototype, \"_hasLicense\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      for (var i = 0; i < registry.licenses.length; i++) {\n        if (registry.licenses[i].match(/^AM5C.{5,}/i)) {\n          return true;\n        }\n      }\n      return false;\n    }\n  });\n  return Root;\n}();\nexport { Root };","map":{"version":3,"names":["Container","HorizontalLayout","VerticalLayout","GridLayout","Disposer","ResizeSensor","InterfaceColors","Graphics","Rectangle","Tooltip","NumberFormatter","DateFormatter","DurationFormatter","Language","EventDispatcher","DefaultTheme","CanvasRenderer","p100","percent","color","populateString","registry","$order","$array","$object","$utils","en","rAF","fps","callback","requestAnimationFrame","setTimeout","Root","id","isReal","Object","defineProperty","new","Error","dom","HTMLElement","document","getElementById","each","rootElements","root","interfaceColors","inner","createElement","style","position","appendChild","_inner","push","value","_init","childNodes","length","_initResizeSensor","resize","_logo","_rootContainer","getPrivate","hide","show","logo","tooltipContainer","children","interactive","interactiveChildren","setStateOnChildren","paddingTop","paddingRight","paddingBottom","paddingLeft","scale","y","centerY","tooltipText","tooltipX","cursorOverStyle","background","fill","fillOpacity","tooltipY","tooltip","pointerOrientation","label","setAll","fontSize","get","stroke","strokeOpacity","set","events","on","window","open","states","create","m","strokeWidth","svgPath","a","_handleLogo","_this","renderer","_renderer","rootContainer","visible","width","clientWidth","height","clientHeight","_defaultThemes","container","view","readerAlertElement","setAttribute","zIndex","opacity","top","_readerAlertElement","focusElementContainer","pointerEvents","left","overflow","setInteractive","_focusElementContainer","_tooltipElementContainer","supports","_disposers","addEventListener","ev","focusedSprite","_focusedSprite","keyCode","blur","undefined","dragOffsetX","dragOffsetY","preventDefault","downEvent","getEvent","MouseEvent","dispatch","type","originalEvent","event","point","simulated","target","isDragging","_keyboardDragPoint","x","clientX","clientY","isEnabled","dragPoint","moveEvent","upEvent","group_1","items","_tabindexes","filter","item","index","indexOf","lastIndex","focus","_startTicker","setThemes","_addTooltip","_hasLicense","_showBranding","_resizeSensorDisposer","dispose","autoResize","w","h","setPrivate","_render","render","_display","_focusElementDirty","_updateCurrentFocus","currentTime","_tickers","f","keepIf","_animations","animation","_runAnimation","allParents","_isDirtyParents","keys","_dirtyParents","forEach","key","parent","isDisposed","uid","_prepareChildren","_updateChildren","objects","_dirty","entity","_beforeChanged","_changed","_clearDirty","_isDirty","depths","bounds","_dirtyBounds","depth","sort","compare","_updateBounds","dirtyPositions","_dirtyPositions","sprite","_updatePosition","_afterChanged","animationTime","timestamp","_runTickers","_runAnimations","_runDirties","_ticker","_runTicker","removeFirst","_isDisposed","horizontalLayout","verticalLayout","removeElement","remove","text","innerHTML","themes","_applyThemes","isMeasured","layer","_tooltip","pushOne","_invalidateTabindexes","b","aindex","bindex","groups","_makeFocusElement","_moveFocusElement","group","_decorateFocusElement","_positionFocusElement","focusElement","isHidden","getAttribute","tabindex","removeAttribute","role","ariaLabel","ariaLive","ariaChecked","ariaOrientation","ariaValueNow","ariaValueText","tabIndex","_handleFocus","_handleBlur","removeChild","next","insertBefore","append","globalBounds","right","bottom","focused","_index","_getText","tooltipElement","_makeTooltipElement","removePrivate","_removeFocusElement","bbox","getBoundingClientRect","disposer","i","licenses","match"],"sources":["../../../../src/.internal/core/Root.ts"],"sourcesContent":["import type { IAnimation } from \"./util/Animation\";\nimport type { Entity } from \"./util/Entity\";\nimport type { Sprite } from \"./render/Sprite\";\nimport type { Text } from \"./render/Text\";\nimport type { Theme } from \"./Theme\";\nimport type { IPoint } from \"./util/IPoint\";\nimport type { IRenderer } from \"./render/backend/Renderer\";\n\nimport { Container } from \"./render/Container\";\nimport { HorizontalLayout } from \"./render/HorizontalLayout\";\nimport { VerticalLayout } from \"./render/VerticalLayout\";\nimport { GridLayout } from \"./render/GridLayout\";\nimport { IDisposer, Disposer } from \"./util/Disposer\";\nimport { ResizeSensor } from \"./util/ResizeSensor\";\nimport { InterfaceColors } from \"./util/InterfaceColors\";\nimport { Graphics } from \"./render/Graphics\";\nimport { Rectangle } from \"./render/Rectangle\";\nimport { Tooltip } from \"./render/Tooltip\";\nimport { NumberFormatter } from \"./util/NumberFormatter\";\nimport { DateFormatter } from \"./util/DateFormatter\";\nimport { DurationFormatter } from \"./util/DurationFormatter\";\nimport { ILocale, Language } from \"./util/Language\";\nimport { Events, EventDispatcher } from \"./util/EventDispatcher\";\nimport { DefaultTheme } from \"../themes/DefaultTheme\";\nimport { CanvasRenderer } from \"./render/backend/CanvasRenderer\";\nimport { p100, percent } from \"./util/Percent\";\nimport { color } from \"./util/Color\";\nimport { populateString } from \"./util/PopulateString\";\nimport { registry } from \"./Registry\";\n\nimport * as $order from \"./util/Order\";\nimport * as $array from \"./util/Array\";\nimport * as $object from \"./util/Object\";\nimport * as $utils from \"./util/Utils\";\n\nimport en from \"../../locales/en\";\n\n\nfunction rAF(fps: number | undefined, callback: (currentTime: number) => void): void {\n\tif (fps == null) {\n\t\trequestAnimationFrame(callback);\n\n\t} else {\n\t\tsetTimeout(() => {\n\t\t\trequestAnimationFrame(callback);\n\t\t}, 1000 / fps);\n\t}\n}\n\n\n/**\n * @ignore\n */\ninterface IParent extends Entity {\n\t_prepareChildren(): void;\n\t_updateChildren(): void;\n}\n\ninterface IBounds extends Entity {\n\tdepth(): number;\n\t_updateBounds(): void;\n}\n\n\nexport interface IRootEvents {\n\tframestarted: {\n\t\ttimestamp: number;\n\t};\n\tframeended: {\n\t\ttimestamp: number;\n\t};\n}\n\n\n// TODO implement Disposer\n/**\n * Root element of the chart.\n *\n * @see {@link https://www.amcharts.com/docs/v5/getting-started/#Root_element} for more info\n */\nexport class Root implements IDisposer {\n\n\t/**\n\t * A reference to original chart container (div element).\n\t */\n\tpublic dom: HTMLElement;\n\tpublic _inner: HTMLElement;\n\n\tprotected _isDirty: boolean = false;\n\tprotected _isDirtyParents: boolean = false;\n\tprotected _dirty: { [id: number]: Entity } = {};\n\tprotected _dirtyParents: { [id: number]: IParent } = {};\n\tprotected _dirtyBounds: { [id: number]: IBounds } = {};\n\tprotected _dirtyPositions: { [id: number]: Sprite } = {};\n\n\tprotected _ticker: ((currentTime: number) => void) | null = null;\n\tprotected _tickers: Array<(currentTime: number) => void> = [];\n\n\t/**\n\t * Root's event dispatcher.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/events/} for more info\n\t */\n\tpublic events: EventDispatcher<Events<this, IRootEvents>> = new EventDispatcher();\n\n\t/**\n\t * @todo needs description\n\t */\n\tpublic animationTime: number | null = null;\n\n\tprivate _animations: Array<IAnimation> = [];\n\n\tpublic _renderer: IRenderer = new CanvasRenderer();\n\n\tpublic _rootContainer!: Container;\n\n\t/**\n\t * Main content container.\n\t */\n\tpublic container!: Container;\n\n\t/**\n\t * A [[Container]] used to display tooltips in.\n\t */\n\tpublic tooltipContainer!: Container\n\n\tpublic _tooltip!: Tooltip;\n\n\t// Locale-related\n\n\t/**\n\t * @ignore\n\t */\n\tpublic language: Language = Language.new(this, {});\n\n\t/**\n\t * Locale used by the chart.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/locales/}\n\t */\n\tpublic locale: ILocale = en;\n\n\t// Date-time related\n\n\t/**\n\t * Use UTC when formatting date/time.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/#UTC_and_time_zones} for more info\n\t */\n\tpublic utc: boolean = false;\n\n\t/**\n\t * Use specific time zone when formatting date/time.\n\t *\n\t * @ignore timezones are not yet supported\n\t */\n\tpublic timezone: string | null = null;\n\n\t/**\n\t * The maximum FPS that the Root will run at.\n\t *\n\t * If `undefined` it will run at the highest FPS.\n\t */\n\tpublic fps: number | undefined;\n\n\t/**\n\t * Number formatter.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-numbers/} for more info\n\t */\n\tpublic numberFormatter: NumberFormatter = NumberFormatter.new(this, {});\n\n\t/**\n\t * Date/time formatter.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\n\t */\n\tpublic dateFormatter: DateFormatter = DateFormatter.new(this, {});\n\n\t/**\n\t * Duration formatter.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\n\t */\n\tpublic durationFormatter: DurationFormatter = DurationFormatter.new(this, {});\n\n\n\t// Accessibility\n\n\t/**\n\t * Global tab index for using for the whole chart\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\n\t */\n\tpublic tabindex: number = 0;\n\n\t//@todo maybe make this better\n\tprotected _tabindexes: Sprite[] = [];\n\n\tprotected _focusElementDirty: boolean = false;\n\tprotected _focusElementContainer: HTMLDivElement | undefined;\n\tprotected _focusedSprite: Sprite | undefined;\n\tprotected _keyboardDragPoint: IPoint | undefined;\n\tprotected _tooltipElementContainer: HTMLDivElement | undefined;\n\tprotected _readerAlertElement: HTMLDivElement | undefined;\n\n\tpublic _logo?: Container;\n\n\t/**\n\t * Used for dynamically-created CSS and JavaScript with strict source policies.\n\t */\n\tpublic nonce?: string;\n\n\t/**\n\t * Special color set to be used for various controls.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/#Interface_colors} for more info\n\t */\n\tpublic interfaceColors: InterfaceColors;\n\n\t/**\n\t * An instance of vertical layout object that can be used to set `layout` setting\n\t * of a [[Container]].\n\t *\n\t * @default VerticalLayout.new()\n\t */\n\tpublic verticalLayout: VerticalLayout = VerticalLayout.new(this, {});\n\n\t/**\n\t * An instance of horizontal layout object that can be used to set `layout` setting\n\t * of a [[Container]].\n\t *\n\t * @default HorizontalLayout.new()\n\t */\n\tpublic horizontalLayout: VerticalLayout = HorizontalLayout.new(this, {});\n\n\t/**\n\t * An instance of grid layout object that can be used to set `layout` setting\n\t * of a [[Container]].\n\t *\n\t * @default VerticalLayout.new()\n\t */\n\tpublic gridLayout: VerticalLayout = GridLayout.new(this, {});\n\n\t/**\n\t * Indicates whether chart should resized automatically when parent container\n\t * width and/or height changes.\n\t *\n\t * If disabled (`autoResize = false`) you can make the chart resize manually\n\t * by calling root element's `resize()` method.\n\t */\n\tpublic autoResize: boolean = true;\n\n\tprotected _isDisposed: boolean = false;\n\tprotected _disposers: Array<IDisposer> = [];\n\n\tprotected _resizeSensorDisposer?: IDisposer;\n\n\tpublic _tooltips: Array<Tooltip> = [];\n\n\tprotected constructor(id: string | HTMLElement, isReal: boolean) {\n\n\t\tif (!isReal) {\n\t\t\tthrow new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\n\t\t}\n\n\t\tlet dom: HTMLElement | null;\n\n\t\tif (id instanceof HTMLElement) {\n\t\t\tdom = id;\n\t\t}\n\t\telse {\n\t\t\tdom = document.getElementById(id);\n\t\t}\n\n\t\t$array.each(registry.rootElements, (root) => {\n\t\t\tif (root.dom === dom) {\n\t\t\t\tthrow new Error(\"You cannot have multiple Roots on the same DOM node\");\n\t\t\t}\n\t\t});\n\n\t\tthis.interfaceColors = InterfaceColors.new(this, {});\n\n\t\tif (dom === null) {\n\t\t\tthrow new Error(\"Could not find HTML element with id `\" + id + \"`\");\n\t\t}\n\n\t\tthis.dom = dom;\n\n\t\tlet inner: HTMLDivElement = document.createElement(\"div\");\n\t\tinner.style.position = \"relative\";\n\t\tdom.appendChild(inner);\n\n\t\tthis._inner = inner;\n\n\t\tregistry.rootElements.push(this);\n\t}\n\n\tpublic static new(id: string | HTMLElement): Root {\n\t\tconst root = new Root(id, true);\n\t\troot._init();\n\t\treturn root;\n\t}\n\n\tpublic moveDOM(id: string | HTMLElement): void {\n\t\tlet dom: HTMLElement | null;\n\n\t\tif (id instanceof HTMLElement) {\n\t\t\tdom = id;\n\t\t}\n\t\telse {\n\t\t\tdom = document.getElementById(id);\n\t\t}\n\n\t\tif (dom) {\n\t\t\twhile (this.dom.childNodes.length > 0) {\n\t\t\t\tdom.appendChild(this.dom.childNodes[0]);\n\t\t\t}\n\t\t\tthis.dom = dom;\n\t\t\tthis._initResizeSensor();\n\t\t\tthis.resize();\n\t\t}\n\n\t}\n\n\n\tprotected _handleLogo(): void {\n\t\tif (this._logo) {\n\t\t\tif (this._rootContainer.getPrivate(\"width\", 0) <= 150 || this._rootContainer.getPrivate(\"height\", 0) <= 60) {\n\t\t\t\tthis._logo.hide();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._logo.show();\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _showBranding(): void {\n\t\tif (!this._logo) {\n\t\t\tconst logo = this.tooltipContainer.children.push(Container.new(this, {\n\t\t\t\tinteractive: true,\n\t\t\t\tinteractiveChildren: false,\n\t\t\t\tposition: \"absolute\",\n\t\t\t\tsetStateOnChildren: true,\n\t\t\t\tpaddingTop: 9,\n\t\t\t\tpaddingRight: 9,\n\t\t\t\tpaddingBottom: 9,\n\t\t\t\tpaddingLeft: 9,\n\t\t\t\tscale: .6,\n\t\t\t\ty: percent(100),\n\t\t\t\tcenterY: p100,\n\t\t\t\ttooltipText: \"Created using amCharts 5\",\n\t\t\t\ttooltipX: p100,\n\t\t\t\tcursorOverStyle: \"pointer\",\n\t\t\t\tbackground: Rectangle.new(this, {\n\t\t\t\t\tfill: color(0x474758),\n\t\t\t\t\tfillOpacity: 0,\n\t\t\t\t\ttooltipY: 5\n\t\t\t\t})\n\t\t\t}));\n\n\t\t\tconst tooltip = Tooltip.new(this, {\n\t\t\t\tpointerOrientation: \"horizontal\",\n\t\t\t\tpaddingTop: 4,\n\t\t\t\tpaddingRight: 7,\n\t\t\t\tpaddingBottom: 4,\n\t\t\t\tpaddingLeft: 7\n\t\t\t});\n\t\t\ttooltip.label.setAll({\n\t\t\t\tfontSize: 12\n\t\t\t});\n\t\t\ttooltip.get(\"background\")!.setAll({\n\t\t\t\tfill: this.interfaceColors.get(\"background\"),\n\t\t\t\tstroke: this.interfaceColors.get(\"grid\"),\n\t\t\t\tstrokeOpacity: 0.3\n\t\t\t})\n\t\t\tlogo.set(\"tooltip\", tooltip);\n\n\t\t\tlogo.events.on(\"click\", () => {\n\t\t\t\twindow.open(\"https://www.amcharts.com/\", \"_blank\");\n\t\t\t});\n\n\t\t\tlogo.states.create(\"hover\", {});\n\n\t\t\tconst m = logo.children.push(Graphics.new(this, {\n\t\t\t\tstroke: color(0xcccccc),\n\t\t\t\tstrokeWidth: 3,\n\t\t\t\tsvgPath: \"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6\"\n\t\t\t}));\n\n\t\t\tm.states.create(\"hover\", { stroke: color(0x3CABFF) });\n\n\t\t\tconst a = logo.children.push(Graphics.new(this, {\n\t\t\t\tstroke: color(0x888888),\n\t\t\t\tstrokeWidth: 3,\n\t\t\t\tsvgPath: \"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0\"\n\t\t\t}));\n\n\t\t\ta.states.create(\"hover\", { stroke: color(0x474758) });\n\n\t\t\t//logo.set(\"tooltip\", this._tooltip);\n\t\t\t//logo.setPrivate(\"tooltipTarget\", logo.get(\"background\"));\n\t\t\tthis._logo = logo;\n\n\t\t\tthis._handleLogo();\n\t\t}\n\t}\n\n\tprotected _init(): void {\n\t\tconst renderer = this._renderer;\n\t\tconst rootContainer = Container.new(this, { visible: true, width: this.dom.clientWidth, height: this.dom.clientHeight });\n\t\tthis._rootContainer = rootContainer;\n\t\tthis._rootContainer._defaultThemes.push(DefaultTheme.new(this));\n\n\t\tconst container = rootContainer.children.push(Container.new(this, { visible: true, width: p100, height: p100 }));\n\t\tthis.container = container;\n\n\t\trenderer.resize(this.dom.clientWidth, this.dom.clientHeight);\n\n\t\t//@todo: better appendChild - refer\n\t\tthis._inner.appendChild(renderer.view);\n\n\t\t// TODO: TMP TMP TMP for testing only, remove\n\t\t//document.body.appendChild((<any>renderer)._ghostView);\n\n\t\tthis._initResizeSensor();\n\n\t\t// Create element which is used to make announcements to screen reader\n\t\tconst readerAlertElement = document.createElement(\"div\");\n\t\treaderAlertElement.setAttribute(\"role\", \"alert\");\n\t\treaderAlertElement.style.zIndex = \"-100000\";\n\t\treaderAlertElement.style.opacity = \"0\";\n\t\treaderAlertElement.style.position = \"absolute\";\n\t\treaderAlertElement.style.top = \"0\";\n\t\tthis._readerAlertElement = readerAlertElement;\n\t\tthis._inner.appendChild(this._readerAlertElement);\n\n\t\tconst focusElementContainer = document.createElement(\"div\");\n\t\tfocusElementContainer.style.position = \"absolute\";\n\t\tfocusElementContainer.style.pointerEvents = \"none\";\n\t\tfocusElementContainer.style.top = \"0px\";\n\t\tfocusElementContainer.style.left = \"0px\";\n\t\tfocusElementContainer.style.overflow = \"hidden\";\n\t\tfocusElementContainer.style.width = this.dom.clientWidth + \"px\";\n\t\tfocusElementContainer.style.height = this.dom.clientHeight + \"px\";\n\t\t$utils.setInteractive(focusElementContainer, false);\n\t\tthis._focusElementContainer = focusElementContainer;\n\t\tthis._inner.appendChild(this._focusElementContainer);\n\n\t\tthis._tooltipElementContainer = document.createElement(\"div\");\n\t\tthis._inner.appendChild(this._tooltipElementContainer);\n\n\t\t// Add keyboard events for accessibility, e.g. simulating drag with arrow\n\t\t// keys and click with ENTER\n\t\tif ($utils.supports(\"keyboardevents\")) {\n\t\t\tthis._disposers.push($utils.addEventListener(document, \"keydown\", (ev: KeyboardEvent) => {\n\t\t\t\tconst focusedSprite = this._focusedSprite;\n\t\t\t\tif (focusedSprite) {\n\t\t\t\t\tif (ev.keyCode == 27) {\n\t\t\t\t\t\t// ESC pressed - lose current focus\n\t\t\t\t\t\t$utils.blur();\n\t\t\t\t\t\tthis._focusedSprite = undefined;\n\t\t\t\t\t}\n\t\t\t\t\tlet dragOffsetX = 0;\n\t\t\t\t\tlet dragOffsetY = 0;\n\t\t\t\t\t// TODO: figure out if using bogus MouseEvent is fine, or it will\n\t\t\t\t\t// fail on some platforms\n\t\t\t\t\tswitch (ev.keyCode) {\n\t\t\t\t\t\tcase 13:\n\t\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t\t\tconst downEvent = renderer.getEvent(new MouseEvent(\"click\"));\n\t\t\t\t\t\t\tfocusedSprite.events.dispatch(\"click\", {\n\t\t\t\t\t\t\t\ttype: \"click\",\n\t\t\t\t\t\t\t\toriginalEvent: downEvent.event,\n\t\t\t\t\t\t\t\tpoint: downEvent.point,\n\t\t\t\t\t\t\t\tsimulated: true,\n\t\t\t\t\t\t\t\ttarget: focusedSprite\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\tcase 37:\n\t\t\t\t\t\t\tdragOffsetX = -6;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 39:\n\t\t\t\t\t\t\tdragOffsetX = 6;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 38:\n\t\t\t\t\t\t\tdragOffsetY = -6;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 40:\n\t\t\t\t\t\t\tdragOffsetY = 6;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (dragOffsetX != 0 || dragOffsetY != 0) {\n\t\t\t\t\t\tev.preventDefault();\n\n\t\t\t\t\t\tif (!focusedSprite.isDragging()) {\n\t\t\t\t\t\t\t// Start dragging\n\t\t\t\t\t\t\tthis._keyboardDragPoint = {\n\t\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\t\ty: 0\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst downEvent = renderer.getEvent(new MouseEvent(\"mousedown\", {\n\t\t\t\t\t\t\t\tclientX: 0,\n\t\t\t\t\t\t\t\tclientY: 0\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\t\tif (focusedSprite.events.isEnabled(\"pointerdown\")) {\n\t\t\t\t\t\t\t\tfocusedSprite.events.dispatch(\"pointerdown\", {\n\t\t\t\t\t\t\t\t\ttype: \"pointerdown\",\n\t\t\t\t\t\t\t\t\toriginalEvent: downEvent.event,\n\t\t\t\t\t\t\t\t\tpoint: downEvent.point,\n\t\t\t\t\t\t\t\t\tsimulated: true,\n\t\t\t\t\t\t\t\t\ttarget: focusedSprite\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// Move focus marker\n\t\t\t\t\t\t\t//this._positionFocusElement(focusedSprite);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Move incrementally\n\t\t\t\t\t\tconst dragPoint = this._keyboardDragPoint!;\n\t\t\t\t\t\tdragPoint.x += dragOffsetX;\n\t\t\t\t\t\tdragPoint.y += dragOffsetY;\n\t\t\t\t\t\tconst moveEvent = renderer.getEvent(new MouseEvent(\"mousemove\", {\n\t\t\t\t\t\t\tclientX: dragPoint.x,\n\t\t\t\t\t\t\tclientY: dragPoint.y\n\t\t\t\t\t\t}), false);\n\n\t\t\t\t\t\tif (focusedSprite.events.isEnabled(\"globalpointermove\")) {\n\t\t\t\t\t\t\tfocusedSprite.events.dispatch(\"globalpointermove\", {\n\t\t\t\t\t\t\t\ttype: \"globalpointermove\",\n\t\t\t\t\t\t\t\toriginalEvent: moveEvent.event,\n\t\t\t\t\t\t\t\tpoint: moveEvent.point,\n\t\t\t\t\t\t\t\tsimulated: true,\n\t\t\t\t\t\t\t\ttarget: focusedSprite\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tdocument.addEventListener(\"keyup\", (ev: KeyboardEvent) => {\n\t\t\t\tif (this._focusedSprite) {\n\t\t\t\t\tconst focusedSprite = this._focusedSprite;\n\t\t\t\t\tconst keyCode = ev.keyCode;\n\t\t\t\t\tswitch (keyCode) {\n\t\t\t\t\t\tcase 37:\n\t\t\t\t\t\tcase 39:\n\t\t\t\t\t\tcase 38:\n\t\t\t\t\t\tcase 40:\n\t\t\t\t\t\t\tif (focusedSprite.isDragging()) {\n\t\t\t\t\t\t\t\t// Simulate drag stop\n\t\t\t\t\t\t\t\tconst dragPoint = this._keyboardDragPoint!;\n\t\t\t\t\t\t\t\tconst upEvent = renderer.getEvent(new MouseEvent(\"mouseup\", {\n\t\t\t\t\t\t\t\t\tclientX: dragPoint.x,\n\t\t\t\t\t\t\t\t\tclientY: dragPoint.y\n\t\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\t\t\tif (focusedSprite.events.isEnabled(\"globalpointerup\")) {\n\t\t\t\t\t\t\t\t\tfocusedSprite.events.dispatch(\"globalpointerup\", {\n\t\t\t\t\t\t\t\t\t\ttype: \"globalpointerup\",\n\t\t\t\t\t\t\t\t\t\toriginalEvent: upEvent.event,\n\t\t\t\t\t\t\t\t\t\tpoint: upEvent.point,\n\t\t\t\t\t\t\t\t\t\tsimulated: true,\n\t\t\t\t\t\t\t\t\t\ttarget: focusedSprite\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t//this._positionFocusElement(focusedSprite);\n\t\t\t\t\t\t\t\tthis._keyboardDragPoint = undefined;\n\t\t\t\t\t\t\t\t// @todo dispatch mouseup event instead of calling dragStop?\n\t\t\t\t\t\t\t\t// this._dispatchEvent(\"globalpointerup\", target, upEvent);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(focusedSprite.get(\"focusableGroup\")) {\n\t\t\t\t\t\t\t\t// Find next item in focusable group\n\t\t\t\t\t\t\t\tconst group = focusedSprite.get(\"focusableGroup\");\n\t\t\t\t\t\t\t\tconst items = this._tabindexes.filter(item => item.get(\"focusableGroup\") == group);\n\t\t\t\t\t\t\t\tlet index = items.indexOf(focusedSprite);\n\t\t\t\t\t\t\t\tconst lastIndex = items.length - 1;\n\t\t\t\t\t\t\t\tindex += (keyCode == 39 || keyCode == 40) ? 1 : -1;\n\t\t\t\t\t\t\t\tif (index < 0) {\n\t\t\t\t\t\t\t\t\tindex = lastIndex;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if (index > lastIndex) {\n\t\t\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$utils.focus(items[index].getPrivate(\"focusElement\")!);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis._startTicker();\n\t\tthis.setThemes([]);\n\n\t\tthis._addTooltip();\n\n\t\tif (!this._hasLicense()) {\n\t\t\tthis._showBranding();\n\t\t}\n\t}\n\n\tprivate _initResizeSensor(): void {\n\t\tif (this._resizeSensorDisposer) {\n\t\t\tthis._resizeSensorDisposer.dispose();\n\t\t}\n\t\tthis._resizeSensorDisposer = new ResizeSensor(this.dom, () => {\n\t\t\tif (this.autoResize) {\n\t\t\t\tthis.resize();\n\t\t\t}\n\t\t});\n\t\tthis._disposers.push(this._resizeSensorDisposer);\n\t}\n\n\t/**\n\t * If automatic resizing of char is disabled (`root.autoResize = false`), it\n\t * can be resized manually by calling this method.\n\t */\n\tpublic resize(): void {\n\t\tconst dom = this.dom;\n\t\tconst w = dom.clientWidth;\n\t\tconst h = dom.clientHeight;\n\t\tif (w > 0 && h > 0) {\n\t\t\tconst focusElementContainer = this._focusElementContainer!;\n\n\t\t\tfocusElementContainer.style.width = w + \"px\";\n\t\t\tfocusElementContainer.style.height = h + \"px\";\n\n\t\t\tthis._renderer.resize(w, h);\n\n\t\t\tconst rootContainer = this._rootContainer;\n\n\t\t\trootContainer.setPrivate(\"width\", w);\n\t\t\trootContainer.setPrivate(\"height\", h);\n\t\t\tthis._render();\n\t\t\tthis._handleLogo();\n\t\t}\n\t}\n\n\tprivate _render() {\n\t\tthis._renderer.render(this._rootContainer._display);\n\n\t\tif (this._focusElementDirty) {\n\t\t\tthis._updateCurrentFocus();\n\t\t\tthis._focusElementDirty = false;\n\t\t}\n\t}\n\n\tprivate _runTickers(currentTime: number) {\n\t\t$array.each(this._tickers, (f) => {\n\t\t\tf(currentTime);\n\t\t});\n\t}\n\n\tprivate _runAnimations(currentTime: number) {\n\t\t$array.keepIf(this._animations, (animation) => {\n\t\t\treturn !animation._runAnimation(currentTime);\n\t\t});\n\t}\n\n\tprivate _runDirties() {\n\t\t//console.log(\"tick **************************************************************\");\n\t\tlet allParents: { [id: number]: IParent } = {};\n\n\t\twhile (this._isDirtyParents) {\n\t\t\t// This must be before calling _prepareChildren\n\t\t\tthis._isDirtyParents = false;\n\n\t\t\t$object.keys(this._dirtyParents).forEach((key) => {\n\t\t\t\tconst parent = this._dirtyParents[key];\n\n\t\t\t\tdelete this._dirtyParents[key];\n\n\t\t\t\tif (!parent.isDisposed()) {\n\t\t\t\t\tallParents[parent.uid] = parent;\n\t\t\t\t\tparent._prepareChildren();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$object.keys(allParents).forEach((key) => {\n\t\t\tallParents[key]._updateChildren();\n\t\t});\n\n\t\tconst objects: Array<Entity> = [];\n\n\t\t//\t\tconsole.log(\"_beforeChanged\")\n\t\t$object.keys(this._dirty).forEach((key) => {\n\t\t\tconst entity = this._dirty[key];\n\n\t\t\tif (entity.isDisposed()) {\n\t\t\t\tdelete this._dirty[entity.uid];\n\n\t\t\t} else {\n\t\t\t\tobjects.push(entity);\n\t\t\t\tentity._beforeChanged();\n\t\t\t}\n\t\t});\n\n\t\t//\t\tconsole.log(\"_changed\")\n\t\tobjects.forEach((entity) => {\n\t\t\tentity._changed();\n\t\t\tdelete this._dirty[entity.uid];\n\t\t\tentity._clearDirty();\n\t\t});\n\n\t\tthis._isDirty = false;\n\n\t\tconst depths: { [id: number]: number } = {};\n\t\tconst bounds: Array<IBounds> = [];\n\n\t\t$object.keys(this._dirtyBounds).forEach((key) => {\n\t\t\tconst entity = this._dirtyBounds[key];\n\n\t\t\tdelete this._dirtyBounds[key];\n\n\t\t\tif (!entity.isDisposed()) {\n\t\t\t\tdepths[entity.uid] = entity.depth();\n\t\t\t\tbounds.push(entity);\n\t\t\t}\n\t\t});\n\n\t\t// High depth -> low depth\n\t\tbounds.sort((x, y) => {\n\t\t\treturn $order.compare(depths[y.uid], depths[x.uid]);\n\t\t});\n\n\t\t//\t\tconsole.log(\"_updateBounds\")\n\t\tbounds.forEach((entity) => {\n\t\t\tentity._updateBounds();\n\t\t});\n\n\t\t//\t\tconsole.log(\"_updatePosition\")\n\t\tconst dirtyPositions = this._dirtyPositions;\n\t\t$object.keys(dirtyPositions).forEach((key) => {\n\t\t\tconst sprite = dirtyPositions[key];\n\n\t\t\tdelete dirtyPositions[key];\n\n\t\t\tif (!sprite.isDisposed()) {\n\t\t\t\tsprite._updatePosition();\n\t\t\t}\n\t\t});\n\n\t\t//\t\tconsole.log(\"_afterChanged\")\n\t\tobjects.forEach((entity) => {\n\t\t\tentity._afterChanged();\n\t\t});\n\n\t}\n\n\tprivate _runTicker(currentTime: number) {\n\t\tif (!this.isDisposed()) {\n\t\t\tthis.animationTime = currentTime;\n\n\t\t\tif (this.events.isEnabled(\"framestarted\")) {\n\t\t\t\tthis.events.dispatch(\"framestarted\", {\n\t\t\t\t\ttype: \"framestarted\",\n\t\t\t\t\ttarget: this,\n\t\t\t\t\ttimestamp: currentTime,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis._runTickers(currentTime);\n\t\t\tthis._runAnimations(currentTime);\n\t\t\tthis._runDirties();\n\t\t\tthis._render();\n\n\t\t\tif (this.events.isEnabled(\"frameended\")) {\n\t\t\t\tthis.events.dispatch(\"frameended\", {\n\t\t\t\t\ttype: \"frameended\",\n\t\t\t\t\ttarget: this,\n\t\t\t\t\ttimestamp: currentTime,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// No more work to do\n\t\t\tif (this._tickers.length === 0 &&\n\t\t\t\tthis._animations.length === 0 &&\n\t\t\t\t!this._isDirty) {\n\n\t\t\t\tthis._ticker = null;\n\t\t\t\tthis.animationTime = null;\n\n\t\t\t} else {\n\t\t\t\trAF(this.fps, this._ticker!);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _startTicker() {\n\t\tif (this._ticker === null) {\n\t\t\tthis.animationTime = null;\n\n\t\t\tthis._ticker = (currentTime) => {\n\t\t\t\tthis._runTicker(currentTime);\n\t\t\t};\n\n\t\t\trAF(this.fps, this._ticker!);\n\t\t}\n\t}\n\n\tpublic _addDirtyEntity(entity: Entity) {\n\t\tif (this._dirty[entity.uid] === undefined) {\n\t\t\tthis._isDirty = true;\n\t\t\tthis._dirty[entity.uid] = entity;\n\t\t\tthis._startTicker();\n\t\t}\n\t}\n\n\tpublic _addDirtyParent(parent: IParent) {\n\t\tif (this._dirtyParents[parent.uid] === undefined) {\n\t\t\tthis._isDirty = true;\n\t\t\tthis._isDirtyParents = true;\n\t\t\tthis._dirtyParents[parent.uid] = parent;\n\t\t\tthis._startTicker();\n\t\t}\n\t}\n\n\tpublic _addDirtyBounds(entity: IBounds) {\n\t\tif (this._dirtyBounds[entity.uid] === undefined) {\n\t\t\tthis._isDirty = true;\n\t\t\tthis._dirtyBounds[entity.uid] = entity;\n\t\t\tthis._startTicker();\n\t\t}\n\t}\n\n\tpublic _addDirtyPosition(sprite: Sprite) {\n\t\tif (this._dirtyPositions[sprite.uid] === undefined) {\n\t\t\tthis._isDirty = true;\n\t\t\tthis._dirtyPositions[sprite.uid] = sprite;\n\t\t\tthis._startTicker();\n\t\t}\n\t}\n\n\tpublic _addAnimation(animation: IAnimation) {\n\t\t// TODO use numeric id instead\n\t\tif (this._animations.indexOf(animation) === -1) {\n\t\t\tthis._animations.push(animation);\n\t\t\tthis._startTicker();\n\t\t}\n\t}\n\n\tpublic eachFrame(f: (currentTime: number) => void): IDisposer {\n\t\tthis._tickers.push(f);\n\t\tthis._startTicker();\n\n\t\treturn new Disposer(() => {\n\t\t\t$array.removeFirst(this._tickers, f);\n\t\t});\n\t}\n\n\t/**\n\t * Returns width of the target container, in pixels.\n\t *\n\t * @return Width\n\t */\n\tpublic width(): number {\n\t\treturn this.dom.clientWidth;\n\t}\n\n\t/**\n\t * Returns height of the target container, in pixels.\n\t *\n\t * @return Height\n\t */\n\tpublic height(): number {\n\t\treturn this.dom.clientHeight;\n\t}\n\n\t/**\n\t * Disposes root and all the content in it.\n\t */\n\tpublic dispose(): void {\n\t\tif (!this._isDisposed) {\n\t\t\tthis._isDisposed = true;\n\n\t\t\tthis._rootContainer.dispose();\n\t\t\tthis._renderer.dispose();\n\t\t\tthis.horizontalLayout.dispose();\n\t\t\tthis.verticalLayout.dispose();\n\t\t\tthis.interfaceColors.dispose();\n\n\t\t\t$array.each(this._disposers, (x) => {\n\t\t\t\tx.dispose();\n\t\t\t});\n\n\t\t\tif (this._inner) {\n\t\t\t\t$utils.removeElement(this._inner);\n\t\t\t}\n\n\t\t\t$array.remove(registry.rootElements, this);\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true` if root element is disposed.\n\t *\n\t * @return Disposed?\n\t */\n\tpublic isDisposed(): boolean {\n\t\treturn this._isDisposed;\n\t}\n\n\t/**\n\t * Triggers screen reader read out a message.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\n\t * @param  text  Alert text\n\t */\n\tpublic readerAlert(text: string): void {\n\t\tthis._readerAlertElement!.innerHTML = text;\n\t}\n\n\t/**\n\t * Sets themes to be used for the chart.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/themes/} for more info\n\t * @param  themes  A list of themes\n\t */\n\tpublic setThemes(themes: Array<Theme>): void {\n\t\tthis._rootContainer.set(\"themes\", themes);\n\n\t\t// otherwise new themes are not applied\n\t\tconst tooltipContainer = this.tooltipContainer;\n\t\tif (tooltipContainer) {\n\t\t\ttooltipContainer._applyThemes();\n\t\t}\n\n\t\t// @todo review this\n\t\tconst interfaceColors = this.interfaceColors;\n\t\tif (interfaceColors) {\n\t\t\tinterfaceColors._applyThemes();\n\t\t}\n\t}\n\n\tprotected _addTooltip() {\n\t\tif (!this.tooltipContainer) {\n\t\t\tconst tooltipContainer = this._rootContainer.children.push(Container.new(this, { position: \"absolute\", isMeasured: false, width: p100, height: p100, layer: 100 }));\n\t\t\tthis.tooltipContainer = tooltipContainer;\n\n\t\t\tconst tooltip = Tooltip.new(this, {});\n\t\t\tthis.container.set(\"tooltip\", tooltip);\n\t\t\ttooltip.hide(0);\n\t\t\tthis._tooltip = tooltip;\n\t\t}\n\t}\n\n\t/**\n\t * Accesibility\n\t */\n\n\tpublic _registerTabindexOrder(target: Sprite): void {\n\t\tif (target.get(\"focusable\")) {\n\t\t\t$array.pushOne(this._tabindexes, target);\n\t\t}\n\t\telse {\n\t\t\t$array.remove(this._tabindexes, target);\n\t\t}\n\t\tthis._invalidateTabindexes();\n\t}\n\n\tpublic _unregisterTabindexOrder(target: Sprite): void {\n\t\t$array.remove(this._tabindexes, target);\n\t\tthis._invalidateTabindexes();\n\t}\n\n\tpublic _invalidateTabindexes(): void {\n\n\t\tthis._tabindexes.sort((a: Sprite, b: Sprite) => {\n\t\t\tconst aindex = a.get(\"tabindexOrder\", 0);\n\t\t\tconst bindex = b.get(\"tabindexOrder\", 0);\n\t\t\tif (aindex == bindex) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\telse if (aindex > bindex) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t});\n\n\t\tconst groups: Array<string | number> = [];\n\t\t$array.each(this._tabindexes, (item, index) => {\n\t\t\tif (!item.getPrivate(\"focusElement\")) {\n\t\t\t\tthis._makeFocusElement(index, item);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._moveFocusElement(index, item);\n\t\t\t}\n\t\t\tconst group = item.get(\"focusableGroup\");\n\t\t\tif (group) {\n\t\t\t\tif (groups.indexOf(group) !== -1) {\n\t\t\t\t\t// Non-first element in the group, make it not directly focusable\n\t\t\t\t\titem.getPrivate(\"focusElement\")!.setAttribute(\"tabindex\", \"-1\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tgroups.push(group);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t}\n\n\tpublic _updateCurrentFocus(): void {\n\t\tif (this._focusedSprite) {\n\t\t\tthis._decorateFocusElement(this._focusedSprite);\n\t\t\tthis._positionFocusElement(this._focusedSprite);\n\t\t}\n\t}\n\n\tpublic _decorateFocusElement(target: Sprite, focusElement?: HTMLDivElement): void {\n\n\t\t// Decorate with proper accessibility attributes\n\t\tif (!focusElement) {\n\t\t\tfocusElement = target.getPrivate(\"focusElement\")!;\n\t\t}\n\n\t\tif (!focusElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (target.get(\"visible\") && target.get(\"role\") != \"tooltip\" && !target.isHidden()) {\n\t\t\tif (focusElement.getAttribute(\"tabindex\") != \"-1\") {\n\t\t\t\tfocusElement.setAttribute(\"tabindex\", \"\" + this.tabindex);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"tabindex\")\n\t\t}\n\n\t\tconst role = target.get(\"role\");\n\t\tif (role) {\n\t\t\tfocusElement.setAttribute(\"role\", role);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"role\");\n\t\t}\n\n\t\tconst ariaLabel = target.get(\"ariaLabel\");\n\t\tif (ariaLabel) {\n\t\t\tconst label = populateString(target, ariaLabel);\n\t\t\tfocusElement.setAttribute(\"aria-label\", label);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-label\");\n\t\t}\n\n\t\tconst ariaLive = target.get(\"ariaLive\");\n\t\tif (ariaLive) {\n\t\t\tfocusElement.setAttribute(\"aria-live\", ariaLive);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-live\");\n\t\t}\n\n\t\tconst ariaChecked = target.get(\"ariaChecked\");\n\t\tif (ariaChecked != null) {\n\t\t\tfocusElement.setAttribute(\"aria-checked\", ariaChecked ? \"true\" : \"false\");\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-checked\");\n\t\t}\n\n\t\tif (target.get(\"ariaHidden\")) {\n\t\t\tfocusElement.setAttribute(\"aria-hidden\", \"hidden\");\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-hidden\");\n\t\t}\n\n\t\tconst ariaOrientation = target.get(\"ariaOrientation\");\n\t\tif (ariaOrientation) {\n\t\t\tfocusElement.setAttribute(\"aria-orientation\", ariaOrientation);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-orientation\");\n\t\t}\n\n\t\tconst ariaValueNow = target.get(\"ariaValueNow\");\n\t\tif (ariaValueNow) {\n\t\t\tfocusElement.setAttribute(\"aria-valuenow\", ariaValueNow);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-valuenow\");\n\t\t}\n\n\t\tconst ariaValueText = target.get(\"ariaValueText\");\n\t\tif (ariaValueText) {\n\t\t\tfocusElement.setAttribute(\"aria-valuetext\", ariaValueText);\n\t\t}\n\t\telse {\n\t\t\tfocusElement.removeAttribute(\"aria-valuetext\");\n\t\t}\n\t}\n\n\tpublic _makeFocusElement(index: number, target: Sprite): void {\n\n\t\tif (target.getPrivate(\"focusElement\")) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Init\n\t\tconst focusElement = document.createElement(\"div\");\n\t\tif (target.get(\"role\") != \"tooltip\") {\n\t\t\tfocusElement.tabIndex = this.tabindex;\n\t\t}\n\t\tfocusElement.style.position = \"absolute\";\n\t\t$utils.setInteractive(focusElement, false);\n\n\t\ttarget.setPrivate(\"focusElement\", focusElement);\n\n\t\tthis._decorateFocusElement(target);\n\n\t\tfocusElement.addEventListener(\"focus\", (ev: FocusEvent) => {\n\t\t\tthis._handleFocus(ev, index);\n\t\t});\n\n\t\tfocusElement.addEventListener(\"blur\", (ev: FocusEvent) => {\n\t\t\tthis._handleBlur(ev, index);\n\t\t});\n\n\t\tthis._moveFocusElement(index, target);\n\n\t}\n\n\tpublic _removeFocusElement(target: Sprite): void {\n\n\t\t// Init\n\t\tconst container = this._focusElementContainer!;\n\t\tconst focusElement = target.getPrivate(\"focusElement\")!;\n\t\tcontainer.removeChild(focusElement);\n\n\t}\n\n\tprotected _moveFocusElement(index: number, target: Sprite): void {\n\n\t\t// Get container\n\t\tconst container = this._focusElementContainer!;\n\t\tconst focusElement = target.getPrivate(\"focusElement\")!;\n\n\t\tif (focusElement === this._focusElementContainer!.children[index]) {\n\t\t\t// Nothing to do\n\t\t\treturn;\n\t\t}\n\n\t\tconst next = this._focusElementContainer!.children[index + 1];\n\t\tif (next) {\n\t\t\tcontainer.insertBefore(focusElement, next);\n\t\t}\n\t\telse {\n\t\t\tcontainer.append(focusElement);\n\t\t}\n\t}\n\n\tprotected _positionFocusElement(target: Sprite): void {\n\t\tconst bounds = target.globalBounds();\n\n\t\tconst width = bounds.right == bounds.left ? target.width() : bounds.right - bounds.left;\n\t\tconst height = bounds.top == bounds.bottom ? target.height() : bounds.bottom - bounds.top;\n\n\t\tconst focusElement = target.getPrivate(\"focusElement\")!;\n\t\tfocusElement.style.top = (bounds.top - 2) + \"px\";\n\t\tfocusElement.style.left = (bounds.left - 2) + \"px\";\n\t\tfocusElement.style.width = (width + 4) + \"px\";\n\t\tfocusElement.style.height = (height + 4) + \"px\";\n\n\t}\n\n\tprotected _handleFocus(ev: FocusEvent, index: number): void {\n\t\t// Get element\n\t\tconst focused = this._tabindexes[index];\n\n\t\t// Size and position\n\t\tthis._positionFocusElement(focused);\n\t\t//this._decorateFocusElement(focused);\n\n\t\tthis._focusedSprite = focused;\n\n\t\tif (focused.events.isEnabled(\"focus\")) {\n\t\t\tfocused.events.dispatch(\"focus\", {\n\t\t\t\ttype: \"focus\",\n\t\t\t\toriginalEvent: ev,\n\t\t\t\ttarget: focused\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected _handleBlur(ev: FocusEvent, _index: number): void {\n\t\tconst focused = this._focusedSprite;\n\t\tif (focused && focused.events.isEnabled(\"blur\")) {\n\t\t\tfocused.events.dispatch(\"blur\", {\n\t\t\t\ttype: \"blur\",\n\t\t\t\toriginalEvent: ev,\n\t\t\t\ttarget: focused\n\t\t\t});\n\t\t}\n\t\tthis._focusedSprite = undefined;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateTooltip(target: Text): void {\n\t\tconst text = target._getText();\n\t\tlet tooltipElement = target.getPrivate(\"tooltipElement\");\n\t\tif (target.get(\"role\") == \"tooltip\" && text != \"\") {\n\t\t\tif (!tooltipElement) {\n\t\t\t\ttooltipElement = this._makeTooltipElement(target);\n\t\t\t}\n\t\t\tif (tooltipElement.innerHTML != text) {\n\t\t\t\ttooltipElement.innerHTML = text!;\n\t\t\t}\n\t\t}\n\t\telse if (tooltipElement) {\n\t\t\ttooltipElement.remove();\n\t\t\ttarget.removePrivate(\"tooltipElement\");\n\t\t}\n\t}\n\n\tpublic _makeTooltipElement(target: Text): HTMLDivElement {\n\t\tconst container = this._tooltipElementContainer!;\n\t\tconst tooltipElement = document.createElement(\"div\");\n\t\ttooltipElement.style.position = \"absolute\";\n\t\ttooltipElement.style.opacity = \"0.0000001\";\n\n\t\t$utils.setInteractive(tooltipElement, false);\n\n\t\tthis._decorateFocusElement(target, tooltipElement);\n\t\tcontainer.append(tooltipElement);\n\t\ttarget.setPrivate(\"tooltipElement\", tooltipElement);\n\t\treturn tooltipElement;\n\t}\n\n\tpublic _invalidateAccessibility(target: Sprite): void {\n\t\tthis._focusElementDirty = true;\n\t\tconst focusElement = target.getPrivate(\"focusElement\");\n\t\tif (target.get(\"focusable\")) {\n\t\t\tif (focusElement) {\n\t\t\t\tthis._decorateFocusElement(target);\n\t\t\t\tthis._positionFocusElement(target);\n\t\t\t}\n\t\t\t// else {\n\t\t\t// \tthis._renderer._makeFocusElement(0, this);\n\t\t\t// }\n\t\t}\n\t\telse if (focusElement) {\n\t\t\tthis._removeFocusElement(target);\n\t\t}\n\t\t//this.updateCurrentFocus();\n\t}\n\n\t/**\n\t * Returns `true` if `target` is currently focused.\n\t *\n\t * @param   target  Target\n\t * @return          Focused?\n\t */\n\tpublic focused(target: Sprite): boolean {\n\t\treturn this._focusedSprite === target;\n\t}\n\n\t/**\n\t * Converts document coordinates to coordinates withing root element.\n\t *\n\t * @param   point  Document point\n\t * @return         Root point\n\t */\n\tpublic documentPointToRoot(point: IPoint): IPoint {\n\t\tconst bbox = this.dom.getBoundingClientRect();\n\t\treturn {\n\t\t\tx: point.x - bbox.left,\n\t\t\ty: point.y - bbox.top\n\t\t};\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic addDisposer<T extends IDisposer>(disposer: T): T {\n\t\tthis._disposers.push(disposer);\n\t\treturn disposer;\n\t}\n\n\t/**\n * To all the clever heads out there. Yes, we did not make any attempts to\n * scramble this.\n *\n * This is a part of a tool meant for our users to manage their commercial\n * licenses for removal of amCharts branding from charts.\n *\n * The only legit way to do so is to purchase a commercial license for amCharts:\n * https://www.amcharts.com/online-store/\n *\n * Removing or altering this code, or disabling amCharts branding in any other\n * way is against the license and thus illegal.\n */\n\tprotected _hasLicense(): boolean {\n\t\tfor (let i = 0; i < registry.licenses.length; i++) {\n\t\t\tif (registry.licenses[i].match(/^AM5C.{5,}/i)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n}\n"],"mappings":"AAQA,SAASA,SAAS,QAAQ,oBAAoB;AAC9C,SAASC,gBAAgB,QAAQ,2BAA2B;AAC5D,SAASC,cAAc,QAAQ,yBAAyB;AACxD,SAASC,UAAU,QAAQ,qBAAqB;AAChD,SAAoBC,QAAQ,QAAQ,iBAAiB;AACrD,SAASC,YAAY,QAAQ,qBAAqB;AAClD,SAASC,eAAe,QAAQ,wBAAwB;AACxD,SAASC,QAAQ,QAAQ,mBAAmB;AAC5C,SAASC,SAAS,QAAQ,oBAAoB;AAC9C,SAASC,OAAO,QAAQ,kBAAkB;AAC1C,SAASC,eAAe,QAAQ,wBAAwB;AACxD,SAASC,aAAa,QAAQ,sBAAsB;AACpD,SAASC,iBAAiB,QAAQ,0BAA0B;AAC5D,SAAkBC,QAAQ,QAAQ,iBAAiB;AACnD,SAAiBC,eAAe,QAAQ,wBAAwB;AAChE,SAASC,YAAY,QAAQ,wBAAwB;AACrD,SAASC,cAAc,QAAQ,iCAAiC;AAChE,SAASC,IAAI,EAAEC,OAAO,QAAQ,gBAAgB;AAC9C,SAASC,KAAK,QAAQ,cAAc;AACpC,SAASC,cAAc,QAAQ,uBAAuB;AACtD,SAASC,QAAQ,QAAQ,YAAY;AAErC,OAAO,KAAKC,MAAM,MAAM,cAAc;AACtC,OAAO,KAAKC,MAAM,MAAM,cAAc;AACtC,OAAO,KAAKC,OAAO,MAAM,eAAe;AACxC,OAAO,KAAKC,MAAM,MAAM,cAAc;AAEtC,OAAOC,EAAE,MAAM,kBAAkB;AAGjC,SAASC,GAAGA,CAACC,GAAuB,EAAEC,QAAuC;EAC5E,IAAID,GAAG,IAAI,IAAI,EAAE;IAChBE,qBAAqB,CAACD,QAAQ,CAAC;GAE/B,MAAM;IACNE,UAAU,CAAC;MACVD,qBAAqB,CAACD,QAAQ,CAAC;IAChC,CAAC,EAAE,IAAI,GAAGD,GAAG,CAAC;;AAEhB;AA2BA;AACA;;;;;AAKA,IAAAI,IAAA;EAoLC,SAAAA,KAAsBC,EAAwB,EAAEC,MAAe;IAlL/D;;;IAGAC,MAAA,CAAAC,cAAA;;;;;;IACAD,MAAA,CAAAC,cAAA;;;;;;IAEAD,MAAA,CAAAC,cAAA;;;;aAA8B;;IAC9BD,MAAA,CAAAC,cAAA;;;;aAAqC;;IACrCD,MAAA,CAAAC,cAAA;;;;aAA6C;;IAC7CD,MAAA,CAAAC,cAAA;;;;aAAqD;;IACrDD,MAAA,CAAAC,cAAA;;;;aAAoD;;IACpDD,MAAA,CAAAC,cAAA;;;;aAAsD;;IAEtDD,MAAA,CAAAC,cAAA;;;;aAA4D;;IAC5DD,MAAA,CAAAC,cAAA;;;;aAA2D;;IAE3D;;;;;IAKAD,MAAA,CAAAC,cAAA;;;;aAA4D,IAAItB,eAAe;;IAE/E;;;IAGAqB,MAAA,CAAAC,cAAA;;;;aAAsC;;IAEtCD,MAAA,CAAAC,cAAA;;;;aAAyC;;IAEzCD,MAAA,CAAAC,cAAA;;;;aAA8B,IAAIpB,cAAc;;IAEhDmB,MAAA,CAAAC,cAAA;;;;;;IAEA;;;IAGAD,MAAA,CAAAC,cAAA;;;;;;IAEA;;;IAGAD,MAAA,CAAAC,cAAA;;;;;;IAEAD,MAAA,CAAAC,cAAA;;;;;;IAEA;IAEA;;;IAGAD,MAAA,CAAAC,cAAA;;;;aAA4BvB,QAAQ,CAACwB,GAAG,CAAC,IAAI,EAAE,EAAE;;IAEjD;;;;;IAKAF,MAAA,CAAAC,cAAA;;;;aAAyBV;;IAEzB;IAEA;;;;;IAKAS,MAAA,CAAAC,cAAA;;;;aAAsB;;IAEtB;;;;;IAKAD,MAAA,CAAAC,cAAA;;;;aAAiC;;IAEjC;;;;;IAKAD,MAAA,CAAAC,cAAA;;;;;;IAEA;;;;;IAKAD,MAAA,CAAAC,cAAA;;;;aAA0C1B,eAAe,CAAC2B,GAAG,CAAC,IAAI,EAAE,EAAE;;IAEtE;;;;;IAKAF,MAAA,CAAAC,cAAA;;;;aAAsCzB,aAAa,CAAC0B,GAAG,CAAC,IAAI,EAAE,EAAE;;IAEhE;;;;;IAKAF,MAAA,CAAAC,cAAA;;;;aAA8CxB,iBAAiB,CAACyB,GAAG,CAAC,IAAI,EAAE,EAAE;;IAG5E;IAEA;;;;;IAKAF,MAAA,CAAAC,cAAA;;;;aAA0B;;IAE1B;IACAD,MAAA,CAAAC,cAAA;;;;aAAkC;;IAElCD,MAAA,CAAAC,cAAA;;;;aAAwC;;IACxCD,MAAA,CAAAC,cAAA;;;;;;IACAD,MAAA,CAAAC,cAAA;;;;;;IACAD,MAAA,CAAAC,cAAA;;;;;;IACAD,MAAA,CAAAC,cAAA;;;;;;IACAD,MAAA,CAAAC,cAAA;;;;;;IAEAD,MAAA,CAAAC,cAAA;;;;;;IAEA;;;IAGAD,MAAA,CAAAC,cAAA;;;;;;IAEA;;;;;IAKAD,MAAA,CAAAC,cAAA;;;;;;IAEA;;;;;;IAMAD,MAAA,CAAAC,cAAA;;;;aAAwClC,cAAc,CAACmC,GAAG,CAAC,IAAI,EAAE,EAAE;;IAEnE;;;;;;IAMAF,MAAA,CAAAC,cAAA;;;;aAA0CnC,gBAAgB,CAACoC,GAAG,CAAC,IAAI,EAAE,EAAE;;IAEvE;;;;;;IAMAF,MAAA,CAAAC,cAAA;;;;aAAoCjC,UAAU,CAACkC,GAAG,CAAC,IAAI,EAAE,EAAE;;IAE3D;;;;;;;IAOAF,MAAA,CAAAC,cAAA;;;;aAA6B;;IAE7BD,MAAA,CAAAC,cAAA;;;;aAAiC;;IACjCD,MAAA,CAAAC,cAAA;;;;aAAyC;;IAEzCD,MAAA,CAAAC,cAAA;;;;;;IAEAD,MAAA,CAAAC,cAAA;;;;aAAmC;;IAIlC,IAAI,CAACF,MAAM,EAAE;MACZ,MAAM,IAAII,KAAK,CAAC,yDAAyD,CAAC;;IAG3E,IAAIC,GAAuB;IAE3B,IAAIN,EAAE,YAAYO,WAAW,EAAE;MAC9BD,GAAG,GAAGN,EAAE;KACR,MACI;MACJM,GAAG,GAAGE,QAAQ,CAACC,cAAc,CAACT,EAAE,CAAC;;IAGlCV,MAAM,CAACoB,IAAI,CAACtB,QAAQ,CAACuB,YAAY,EAAE,UAACC,IAAI;MACvC,IAAIA,IAAI,CAACN,GAAG,KAAKA,GAAG,EAAE;QACrB,MAAM,IAAID,KAAK,CAAC,qDAAqD,CAAC;;IAExE,CAAC,CAAC;IAEF,IAAI,CAACQ,eAAe,GAAGxC,eAAe,CAAC+B,GAAG,CAAC,IAAI,EAAE,EAAE,CAAC;IAEpD,IAAIE,GAAG,KAAK,IAAI,EAAE;MACjB,MAAM,IAAID,KAAK,CAAC,uCAAuC,GAAGL,EAAE,GAAG,GAAG,CAAC;;IAGpE,IAAI,CAACM,GAAG,GAAGA,GAAG;IAEd,IAAIQ,KAAK,GAAmBN,QAAQ,CAACO,aAAa,CAAC,KAAK,CAAC;IACzDD,KAAK,CAACE,KAAK,CAACC,QAAQ,GAAG,UAAU;IACjCX,GAAG,CAACY,WAAW,CAACJ,KAAK,CAAC;IAEtB,IAAI,CAACK,MAAM,GAAGL,KAAK;IAEnB1B,QAAQ,CAACuB,YAAY,CAACS,IAAI,CAAC,IAAI,CAAC;EACjC;;;;;WAEA,SAAAC,CAAkBrB,EAAwB;MACzC,IAAMY,IAAI,GAAG,IAAIb,IAAI,CAACC,EAAE,EAAE,IAAI,CAAC;MAC/BY,IAAI,CAACU,KAAK,EAAE;MACZ,OAAOV,IAAI;IACZ;;;;;;WAEA,SAAAS,CAAerB,EAAwB;MACtC,IAAIM,GAAuB;MAE3B,IAAIN,EAAE,YAAYO,WAAW,EAAE;QAC9BD,GAAG,GAAGN,EAAE;OACR,MACI;QACJM,GAAG,GAAGE,QAAQ,CAACC,cAAc,CAACT,EAAE,CAAC;;MAGlC,IAAIM,GAAG,EAAE;QACR,OAAO,IAAI,CAACA,GAAG,CAACiB,UAAU,CAACC,MAAM,GAAG,CAAC,EAAE;UACtClB,GAAG,CAACY,WAAW,CAAC,IAAI,CAACZ,GAAG,CAACiB,UAAU,CAAC,CAAC,CAAC,CAAC;;QAExC,IAAI,CAACjB,GAAG,GAAGA,GAAG;QACd,IAAI,CAACmB,iBAAiB,EAAE;QACxB,IAAI,CAACC,MAAM,EAAE;;IAGf;;;;;;WAGA,SAAAL,CAAA;MACC,IAAI,IAAI,CAACM,KAAK,EAAE;QACf,IAAI,IAAI,CAACC,cAAc,CAACC,UAAU,CAAC,OAAO,EAAE,CAAC,CAAC,IAAI,GAAG,IAAI,IAAI,CAACD,cAAc,CAACC,UAAU,CAAC,QAAQ,EAAE,CAAC,CAAC,IAAI,EAAE,EAAE;UAC3G,IAAI,CAACF,KAAK,CAACG,IAAI,EAAE;SACjB,MACI;UACJ,IAAI,CAACH,KAAK,CAACI,IAAI,EAAE;;;IAGpB;;;;;;WAEA,SAAAV,CAAA;MACC,IAAI,CAAC,IAAI,CAACM,KAAK,EAAE;QAChB,IAAMK,IAAI,GAAG,IAAI,CAACC,gBAAgB,CAACC,QAAQ,CAACd,IAAI,CAACrD,SAAS,CAACqC,GAAG,CAAC,IAAI,EAAE;UACpE+B,WAAW,EAAE,IAAI;UACjBC,mBAAmB,EAAE,KAAK;UAC1BnB,QAAQ,EAAE,UAAU;UACpBoB,kBAAkB,EAAE,IAAI;UACxBC,UAAU,EAAE,CAAC;UACbC,YAAY,EAAE,CAAC;UACfC,aAAa,EAAE,CAAC;UAChBC,WAAW,EAAE,CAAC;UACdC,KAAK,EAAE,EAAE;UACTC,CAAC,EAAE1D,OAAO,CAAC,GAAG,CAAC;UACf2D,OAAO,EAAE5D,IAAI;UACb6D,WAAW,EAAE,0BAA0B;UACvCC,QAAQ,EAAE9D,IAAI;UACd+D,eAAe,EAAE,SAAS;UAC1BC,UAAU,EAAEzE,SAAS,CAAC6B,GAAG,CAAC,IAAI,EAAE;YAC/B6C,IAAI,EAAE/D,KAAK,CAAC,QAAQ,CAAC;YACrBgE,WAAW,EAAE,CAAC;YACdC,QAAQ,EAAE;WACV;SACD,CAAC,CAAC;QAEH,IAAMC,OAAO,GAAG5E,OAAO,CAAC4B,GAAG,CAAC,IAAI,EAAE;UACjCiD,kBAAkB,EAAE,YAAY;UAChCf,UAAU,EAAE,CAAC;UACbC,YAAY,EAAE,CAAC;UACfC,aAAa,EAAE,CAAC;UAChBC,WAAW,EAAE;SACb,CAAC;QACFW,OAAO,CAACE,KAAK,CAACC,MAAM,CAAC;UACpBC,QAAQ,EAAE;SACV,CAAC;QACFJ,OAAO,CAACK,GAAG,CAAC,YAAY,CAAE,CAACF,MAAM,CAAC;UACjCN,IAAI,EAAE,IAAI,CAACpC,eAAe,CAAC4C,GAAG,CAAC,YAAY,CAAC;UAC5CC,MAAM,EAAE,IAAI,CAAC7C,eAAe,CAAC4C,GAAG,CAAC,MAAM,CAAC;UACxCE,aAAa,EAAE;SACf,CAAC;QACF3B,IAAI,CAAC4B,GAAG,CAAC,SAAS,EAAER,OAAO,CAAC;QAE5BpB,IAAI,CAAC6B,MAAM,CAACC,EAAE,CAAC,OAAO,EAAE;UACvBC,MAAM,CAACC,IAAI,CAAC,2BAA2B,EAAE,QAAQ,CAAC;QACnD,CAAC,CAAC;QAEFhC,IAAI,CAACiC,MAAM,CAACC,MAAM,CAAC,OAAO,EAAE,EAAE,CAAC;QAE/B,IAAMC,CAAC,GAAGnC,IAAI,CAACE,QAAQ,CAACd,IAAI,CAAC9C,QAAQ,CAAC8B,GAAG,CAAC,IAAI,EAAE;UAC/CsD,MAAM,EAAExE,KAAK,CAAC,QAAQ,CAAC;UACvBkF,WAAW,EAAE,CAAC;UACdC,OAAO,EAAE;SACT,CAAC,CAAC;QAEHF,CAAC,CAACF,MAAM,CAACC,MAAM,CAAC,OAAO,EAAE;UAAER,MAAM,EAAExE,KAAK,CAAC,QAAQ;QAAC,CAAE,CAAC;QAErD,IAAMoF,CAAC,GAAGtC,IAAI,CAACE,QAAQ,CAACd,IAAI,CAAC9C,QAAQ,CAAC8B,GAAG,CAAC,IAAI,EAAE;UAC/CsD,MAAM,EAAExE,KAAK,CAAC,QAAQ,CAAC;UACvBkF,WAAW,EAAE,CAAC;UACdC,OAAO,EAAE;SACT,CAAC,CAAC;QAEHC,CAAC,CAACL,MAAM,CAACC,MAAM,CAAC,OAAO,EAAE;UAAER,MAAM,EAAExE,KAAK,CAAC,QAAQ;QAAC,CAAE,CAAC;QAErD;QACA;QACA,IAAI,CAACyC,KAAK,GAAGK,IAAI;QAEjB,IAAI,CAACuC,WAAW,EAAE;;IAEpB;;;;;;WAEA,SAAAlD,CAAA;MAAA,IAAAmD,KAAA;MACC,IAAMC,QAAQ,GAAG,IAAI,CAACC,SAAS;MAC/B,IAAMC,aAAa,GAAG5G,SAAS,CAACqC,GAAG,CAAC,IAAI,EAAE;QAAEwE,OAAO,EAAE,IAAI;QAAEC,KAAK,EAAE,IAAI,CAACvE,GAAG,CAACwE,WAAW;QAAEC,MAAM,EAAE,IAAI,CAACzE,GAAG,CAAC0E;MAAY,CAAE,CAAC;MACxH,IAAI,CAACpD,cAAc,GAAG+C,aAAa;MACnC,IAAI,CAAC/C,cAAc,CAACqD,cAAc,CAAC7D,IAAI,CAACtC,YAAY,CAACsB,GAAG,CAAC,IAAI,CAAC,CAAC;MAE/D,IAAM8E,SAAS,GAAGP,aAAa,CAACzC,QAAQ,CAACd,IAAI,CAACrD,SAAS,CAACqC,GAAG,CAAC,IAAI,EAAE;QAAEwE,OAAO,EAAE,IAAI;QAAEC,KAAK,EAAE7F,IAAI;QAAE+F,MAAM,EAAE/F;MAAI,CAAE,CAAC,CAAC;MAChH,IAAI,CAACkG,SAAS,GAAGA,SAAS;MAE1BT,QAAQ,CAAC/C,MAAM,CAAC,IAAI,CAACpB,GAAG,CAACwE,WAAW,EAAE,IAAI,CAACxE,GAAG,CAAC0E,YAAY,CAAC;MAE5D;MACA,IAAI,CAAC7D,MAAM,CAACD,WAAW,CAACuD,QAAQ,CAACU,IAAI,CAAC;MAEtC;MACA;MAEA,IAAI,CAAC1D,iBAAiB,EAAE;MAExB;MACA,IAAM2D,kBAAkB,GAAG5E,QAAQ,CAACO,aAAa,CAAC,KAAK,CAAC;MACxDqE,kBAAkB,CAACC,YAAY,CAAC,MAAM,EAAE,OAAO,CAAC;MAChDD,kBAAkB,CAACpE,KAAK,CAACsE,MAAM,GAAG,SAAS;MAC3CF,kBAAkB,CAACpE,KAAK,CAACuE,OAAO,GAAG,GAAG;MACtCH,kBAAkB,CAACpE,KAAK,CAACC,QAAQ,GAAG,UAAU;MAC9CmE,kBAAkB,CAACpE,KAAK,CAACwE,GAAG,GAAG,GAAG;MAClC,IAAI,CAACC,mBAAmB,GAAGL,kBAAkB;MAC7C,IAAI,CAACjE,MAAM,CAACD,WAAW,CAAC,IAAI,CAACuE,mBAAmB,CAAC;MAEjD,IAAMC,qBAAqB,GAAGlF,QAAQ,CAACO,aAAa,CAAC,KAAK,CAAC;MAC3D2E,qBAAqB,CAAC1E,KAAK,CAACC,QAAQ,GAAG,UAAU;MACjDyE,qBAAqB,CAAC1E,KAAK,CAAC2E,aAAa,GAAG,MAAM;MAClDD,qBAAqB,CAAC1E,KAAK,CAACwE,GAAG,GAAG,KAAK;MACvCE,qBAAqB,CAAC1E,KAAK,CAAC4E,IAAI,GAAG,KAAK;MACxCF,qBAAqB,CAAC1E,KAAK,CAAC6E,QAAQ,GAAG,QAAQ;MAC/CH,qBAAqB,CAAC1E,KAAK,CAAC6D,KAAK,GAAG,IAAI,CAACvE,GAAG,CAACwE,WAAW,GAAG,IAAI;MAC/DY,qBAAqB,CAAC1E,KAAK,CAAC+D,MAAM,GAAG,IAAI,CAACzE,GAAG,CAAC0E,YAAY,GAAG,IAAI;MACjExF,MAAM,CAACsG,cAAc,CAACJ,qBAAqB,EAAE,KAAK,CAAC;MACnD,IAAI,CAACK,sBAAsB,GAAGL,qBAAqB;MACnD,IAAI,CAACvE,MAAM,CAACD,WAAW,CAAC,IAAI,CAAC6E,sBAAsB,CAAC;MAEpD,IAAI,CAACC,wBAAwB,GAAGxF,QAAQ,CAACO,aAAa,CAAC,KAAK,CAAC;MAC7D,IAAI,CAACI,MAAM,CAACD,WAAW,CAAC,IAAI,CAAC8E,wBAAwB,CAAC;MAEtD;MACA;MACA,IAAIxG,MAAM,CAACyG,QAAQ,CAAC,gBAAgB,CAAC,EAAE;QACtC,IAAI,CAACC,UAAU,CAAC9E,IAAI,CAAC5B,MAAM,CAAC2G,gBAAgB,CAAC3F,QAAQ,EAAE,SAAS,EAAE,UAAC4F,EAAiB;UACnF,IAAMC,aAAa,GAAG7B,KAAI,CAAC8B,cAAc;UACzC,IAAID,aAAa,EAAE;YAClB,IAAID,EAAE,CAACG,OAAO,IAAI,EAAE,EAAE;cACrB;cACA/G,MAAM,CAACgH,IAAI,EAAE;cACbhC,KAAI,CAAC8B,cAAc,GAAGG,SAAS;;YAEhC,IAAIC,WAAW,GAAG,CAAC;YACnB,IAAIC,WAAW,GAAG,CAAC;YACnB;YACA;YACA,QAAQP,EAAE,CAACG,OAAO;cACjB,KAAK,EAAE;gBACNH,EAAE,CAACQ,cAAc,EAAE;gBACnB,IAAMC,SAAS,GAAGpC,QAAQ,CAACqC,QAAQ,CAAC,IAAIC,UAAU,CAAC,OAAO,CAAC,CAAC;gBAC5DV,aAAa,CAACxC,MAAM,CAACmD,QAAQ,CAAC,OAAO,EAAE;kBACtCC,IAAI,EAAE,OAAO;kBACbC,aAAa,EAAEL,SAAS,CAACM,KAAK;kBAC9BC,KAAK,EAAEP,SAAS,CAACO,KAAK;kBACtBC,SAAS,EAAE,IAAI;kBACfC,MAAM,EAAEjB;iBACR,CAAC;gBACF;cACD,KAAK,EAAE;gBACNK,WAAW,GAAG,CAAC,CAAC;gBAChB;cACD,KAAK,EAAE;gBACNA,WAAW,GAAG,CAAC;gBACf;cACD,KAAK,EAAE;gBACNC,WAAW,GAAG,CAAC,CAAC;gBAChB;cACD,KAAK,EAAE;gBACNA,WAAW,GAAG,CAAC;gBACf;cACD;gBACC;;YAGF,IAAID,WAAW,IAAI,CAAC,IAAIC,WAAW,IAAI,CAAC,EAAE;cACzCP,EAAE,CAACQ,cAAc,EAAE;cAEnB,IAAI,CAACP,aAAa,CAACkB,UAAU,EAAE,EAAE;gBAChC;gBACA/C,KAAI,CAACgD,kBAAkB,GAAG;kBACzBC,CAAC,EAAE,CAAC;kBACJ9E,CAAC,EAAE;iBACH;gBAED,IAAMkE,SAAS,GAAGpC,QAAQ,CAACqC,QAAQ,CAAC,IAAIC,UAAU,CAAC,WAAW,EAAE;kBAC/DW,OAAO,EAAE,CAAC;kBACVC,OAAO,EAAE;iBACT,CAAC,CAAC;gBAEH,IAAItB,aAAa,CAACxC,MAAM,CAAC+D,SAAS,CAAC,aAAa,CAAC,EAAE;kBAClDvB,aAAa,CAACxC,MAAM,CAACmD,QAAQ,CAAC,aAAa,EAAE;oBAC5CC,IAAI,EAAE,aAAa;oBACnBC,aAAa,EAAEL,SAAS,CAACM,KAAK;oBAC9BC,KAAK,EAAEP,SAAS,CAACO,KAAK;oBACtBC,SAAS,EAAE,IAAI;oBACfC,MAAM,EAAEjB;mBACR,CAAC;;eAGH,MACI;gBACJ;gBACA;cAAA;cAGD;cACA,IAAMwB,SAAS,GAAGrD,KAAI,CAACgD,kBAAmB;cAC1CK,SAAS,CAACJ,CAAC,IAAIf,WAAW;cAC1BmB,SAAS,CAAClF,CAAC,IAAIgE,WAAW;cAC1B,IAAMmB,SAAS,GAAGrD,QAAQ,CAACqC,QAAQ,CAAC,IAAIC,UAAU,CAAC,WAAW,EAAE;gBAC/DW,OAAO,EAAEG,SAAS,CAACJ,CAAC;gBACpBE,OAAO,EAAEE,SAAS,CAAClF;eACnB,CAAC,EAAE,KAAK,CAAC;cAEV,IAAI0D,aAAa,CAACxC,MAAM,CAAC+D,SAAS,CAAC,mBAAmB,CAAC,EAAE;gBACxDvB,aAAa,CAACxC,MAAM,CAACmD,QAAQ,CAAC,mBAAmB,EAAE;kBAClDC,IAAI,EAAE,mBAAmB;kBACzBC,aAAa,EAAEY,SAAS,CAACX,KAAK;kBAC9BC,KAAK,EAAEU,SAAS,CAACV,KAAK;kBACtBC,SAAS,EAAE,IAAI;kBACfC,MAAM,EAAEjB;iBACR,CAAC;;;;QAKN,CAAC,CAAC,CAAC;QAEH7F,QAAQ,CAAC2F,gBAAgB,CAAC,OAAO,EAAE,UAACC,EAAiB;UACpD,IAAI5B,KAAI,CAAC8B,cAAc,EAAE;YACxB,IAAMD,aAAa,GAAG7B,KAAI,CAAC8B,cAAc;YACzC,IAAMC,OAAO,GAAGH,EAAE,CAACG,OAAO;YAC1B,QAAQA,OAAO;cACd,KAAK,EAAE;cACP,KAAK,EAAE;cACP,KAAK,EAAE;cACP,KAAK,EAAE;gBACN,IAAIF,aAAa,CAACkB,UAAU,EAAE,EAAE;kBAC/B;kBACA,IAAMM,SAAS,GAAGrD,KAAI,CAACgD,kBAAmB;kBAC1C,IAAMO,OAAO,GAAGtD,QAAQ,CAACqC,QAAQ,CAAC,IAAIC,UAAU,CAAC,SAAS,EAAE;oBAC3DW,OAAO,EAAEG,SAAS,CAACJ,CAAC;oBACpBE,OAAO,EAAEE,SAAS,CAAClF;mBACnB,CAAC,CAAC;kBAEH,IAAI0D,aAAa,CAACxC,MAAM,CAAC+D,SAAS,CAAC,iBAAiB,CAAC,EAAE;oBACtDvB,aAAa,CAACxC,MAAM,CAACmD,QAAQ,CAAC,iBAAiB,EAAE;sBAChDC,IAAI,EAAE,iBAAiB;sBACvBC,aAAa,EAAEa,OAAO,CAACZ,KAAK;sBAC5BC,KAAK,EAAEW,OAAO,CAACX,KAAK;sBACpBC,SAAS,EAAE,IAAI;sBACfC,MAAM,EAAEjB;qBACR,CAAC;;kBAEH;kBACA7B,KAAI,CAACgD,kBAAkB,GAAGf,SAAS;kBACnC;kBACA;kBACA;iBACA,MACI,IAAGJ,aAAa,CAAC5C,GAAG,CAAC,gBAAgB,CAAC,EAAE;kBAC5C;kBACA,IAAMuE,OAAK,GAAG3B,aAAa,CAAC5C,GAAG,CAAC,gBAAgB,CAAC;kBACjD,IAAMwE,KAAK,GAAGzD,KAAI,CAAC0D,WAAW,CAACC,MAAM,CAAC,UAAAC,IAAI;oBAAI,OAAAA,IAAI,CAAC3E,GAAG,CAAC,gBAAgB,CAAC,IAAIuE,OAAK;kBAAnC,CAAmC,CAAC;kBAClF,IAAIK,KAAK,GAAGJ,KAAK,CAACK,OAAO,CAACjC,aAAa,CAAC;kBACxC,IAAMkC,SAAS,GAAGN,KAAK,CAACzG,MAAM,GAAG,CAAC;kBAClC6G,KAAK,IAAK9B,OAAO,IAAI,EAAE,IAAIA,OAAO,IAAI,EAAE,GAAI,CAAC,GAAG,CAAC,CAAC;kBAClD,IAAI8B,KAAK,GAAG,CAAC,EAAE;oBACdA,KAAK,GAAGE,SAAS;mBACjB,MACI,IAAIF,KAAK,GAAGE,SAAS,EAAE;oBAC3BF,KAAK,GAAG,CAAC;;kBAEV7I,MAAM,CAACgJ,KAAK,CAACP,KAAK,CAACI,KAAK,CAAC,CAACxG,UAAU,CAAC,cAAc,CAAE,CAAC;;gBAEvD;;;QAGJ,CAAC,CAAC;;MAGH,IAAI,CAAC4G,YAAY,EAAE;MACnB,IAAI,CAACC,SAAS,CAAC,EAAE,CAAC;MAElB,IAAI,CAACC,WAAW,EAAE;MAElB,IAAI,CAAC,IAAI,CAACC,WAAW,EAAE,EAAE;QACxB,IAAI,CAACC,aAAa,EAAE;;IAEtB;;;;;;WAEA,SAAAxH,CAAA;MAAA,IAAAmD,KAAA;MACC,IAAI,IAAI,CAACsE,qBAAqB,EAAE;QAC/B,IAAI,CAACA,qBAAqB,CAACC,OAAO,EAAE;;MAErC,IAAI,CAACD,qBAAqB,GAAG,IAAI1K,YAAY,CAAC,IAAI,CAACkC,GAAG,EAAE;QACvD,IAAIkE,KAAI,CAACwE,UAAU,EAAE;UACpBxE,KAAI,CAAC9C,MAAM,EAAE;;MAEf,CAAC,CAAC;MACF,IAAI,CAACwE,UAAU,CAAC9E,IAAI,CAAC,IAAI,CAAC0H,qBAAqB,CAAC;IACjD;;EAEA;;;;;;;;WAIA,SAAAzH,CAAA;MACC,IAAMf,GAAG,GAAG,IAAI,CAACA,GAAG;MACpB,IAAM2I,CAAC,GAAG3I,GAAG,CAACwE,WAAW;MACzB,IAAMoE,CAAC,GAAG5I,GAAG,CAAC0E,YAAY;MAC1B,IAAIiE,CAAC,GAAG,CAAC,IAAIC,CAAC,GAAG,CAAC,EAAE;QACnB,IAAMxD,qBAAqB,GAAG,IAAI,CAACK,sBAAuB;QAE1DL,qBAAqB,CAAC1E,KAAK,CAAC6D,KAAK,GAAGoE,CAAC,GAAG,IAAI;QAC5CvD,qBAAqB,CAAC1E,KAAK,CAAC+D,MAAM,GAAGmE,CAAC,GAAG,IAAI;QAE7C,IAAI,CAACxE,SAAS,CAAChD,MAAM,CAACuH,CAAC,EAAEC,CAAC,CAAC;QAE3B,IAAMvE,aAAa,GAAG,IAAI,CAAC/C,cAAc;QAEzC+C,aAAa,CAACwE,UAAU,CAAC,OAAO,EAAEF,CAAC,CAAC;QACpCtE,aAAa,CAACwE,UAAU,CAAC,QAAQ,EAAED,CAAC,CAAC;QACrC,IAAI,CAACE,OAAO,EAAE;QACd,IAAI,CAAC7E,WAAW,EAAE;;IAEpB;;;;;;WAEA,SAAAlD,CAAA;MACC,IAAI,CAACqD,SAAS,CAAC2E,MAAM,CAAC,IAAI,CAACzH,cAAc,CAAC0H,QAAQ,CAAC;MAEnD,IAAI,IAAI,CAACC,kBAAkB,EAAE;QAC5B,IAAI,CAACC,mBAAmB,EAAE;QAC1B,IAAI,CAACD,kBAAkB,GAAG,KAAK;;IAEjC;;;;;;WAEA,SAAAlI,CAAoBoI,WAAmB;MACtCnK,MAAM,CAACoB,IAAI,CAAC,IAAI,CAACgJ,QAAQ,EAAE,UAACC,CAAC;QAC5BA,CAAC,CAACF,WAAW,CAAC;MACf,CAAC,CAAC;IACH;;;;;;WAEA,SAAApI,CAAuBoI,WAAmB;MACzCnK,MAAM,CAACsK,MAAM,CAAC,IAAI,CAACC,WAAW,EAAE,UAACC,SAAS;QACzC,OAAO,CAACA,SAAS,CAACC,aAAa,CAACN,WAAW,CAAC;MAC7C,CAAC,CAAC;IACH;;;;;;WAEA,SAAApI,CAAA;MAAA,IAAAmD,KAAA;MACC;MACA,IAAIwF,UAAU,GAA8B,EAAE;MAE9C,OAAO,IAAI,CAACC,eAAe,EAAE;QAC5B;QACA,IAAI,CAACA,eAAe,GAAG,KAAK;QAE5B1K,OAAO,CAAC2K,IAAI,CAAC,IAAI,CAACC,aAAa,CAAC,CAACC,OAAO,CAAC,UAACC,GAAG;UAC5C,IAAMC,MAAM,GAAG9F,KAAI,CAAC2F,aAAa,CAACE,GAAG,CAAC;UAEtC,OAAO7F,KAAI,CAAC2F,aAAa,CAACE,GAAG,CAAC;UAE9B,IAAI,CAACC,MAAM,CAACC,UAAU,EAAE,EAAE;YACzBP,UAAU,CAACM,MAAM,CAACE,GAAG,CAAC,GAAGF,MAAM;YAC/BA,MAAM,CAACG,gBAAgB,EAAE;;QAE3B,CAAC,CAAC;;MAGHlL,OAAO,CAAC2K,IAAI,CAACF,UAAU,CAAC,CAACI,OAAO,CAAC,UAACC,GAAG;QACpCL,UAAU,CAACK,GAAG,CAAC,CAACK,eAAe,EAAE;MAClC,CAAC,CAAC;MAEF,IAAMC,OAAO,GAAkB,EAAE;MAEjC;MACApL,OAAO,CAAC2K,IAAI,CAAC,IAAI,CAACU,MAAM,CAAC,CAACR,OAAO,CAAC,UAACC,GAAG;QACrC,IAAMQ,MAAM,GAAGrG,KAAI,CAACoG,MAAM,CAACP,GAAG,CAAC;QAE/B,IAAIQ,MAAM,CAACN,UAAU,EAAE,EAAE;UACxB,OAAO/F,KAAI,CAACoG,MAAM,CAACC,MAAM,CAACL,GAAG,CAAC;SAE9B,MAAM;UACNG,OAAO,CAACvJ,IAAI,CAACyJ,MAAM,CAAC;UACpBA,MAAM,CAACC,cAAc,EAAE;;MAEzB,CAAC,CAAC;MAEF;MACAH,OAAO,CAACP,OAAO,CAAC,UAACS,MAAM;QACtBA,MAAM,CAACE,QAAQ,EAAE;QACjB,OAAOvG,KAAI,CAACoG,MAAM,CAACC,MAAM,CAACL,GAAG,CAAC;QAC9BK,MAAM,CAACG,WAAW,EAAE;MACrB,CAAC,CAAC;MAEF,IAAI,CAACC,QAAQ,GAAG,KAAK;MAErB,IAAMC,MAAM,GAA6B,EAAE;MAC3C,IAAMC,MAAM,GAAmB,EAAE;MAEjC5L,OAAO,CAAC2K,IAAI,CAAC,IAAI,CAACkB,YAAY,CAAC,CAAChB,OAAO,CAAC,UAACC,GAAG;QAC3C,IAAMQ,MAAM,GAAGrG,KAAI,CAAC4G,YAAY,CAACf,GAAG,CAAC;QAErC,OAAO7F,KAAI,CAAC4G,YAAY,CAACf,GAAG,CAAC;QAE7B,IAAI,CAACQ,MAAM,CAACN,UAAU,EAAE,EAAE;UACzBW,MAAM,CAACL,MAAM,CAACL,GAAG,CAAC,GAAGK,MAAM,CAACQ,KAAK,EAAE;UACnCF,MAAM,CAAC/J,IAAI,CAACyJ,MAAM,CAAC;;MAErB,CAAC,CAAC;MAEF;MACAM,MAAM,CAACG,IAAI,CAAC,UAAC7D,CAAC,EAAE9E,CAAC;QAChB,OAAOtD,MAAM,CAACkM,OAAO,CAACL,MAAM,CAACvI,CAAC,CAAC6H,GAAG,CAAC,EAAEU,MAAM,CAACzD,CAAC,CAAC+C,GAAG,CAAC,CAAC;MACpD,CAAC,CAAC;MAEF;MACAW,MAAM,CAACf,OAAO,CAAC,UAACS,MAAM;QACrBA,MAAM,CAACW,aAAa,EAAE;MACvB,CAAC,CAAC;MAEF;MACA,IAAMC,cAAc,GAAG,IAAI,CAACC,eAAe;MAC3CnM,OAAO,CAAC2K,IAAI,CAACuB,cAAc,CAAC,CAACrB,OAAO,CAAC,UAACC,GAAG;QACxC,IAAMsB,MAAM,GAAGF,cAAc,CAACpB,GAAG,CAAC;QAElC,OAAOoB,cAAc,CAACpB,GAAG,CAAC;QAE1B,IAAI,CAACsB,MAAM,CAACpB,UAAU,EAAE,EAAE;UACzBoB,MAAM,CAACC,eAAe,EAAE;;MAE1B,CAAC,CAAC;MAEF;MACAjB,OAAO,CAACP,OAAO,CAAC,UAACS,MAAM;QACtBA,MAAM,CAACgB,aAAa,EAAE;MACvB,CAAC,CAAC;IAEH;;;;;;WAEA,SAAAxK,CAAmBoI,WAAmB;MACrC,IAAI,CAAC,IAAI,CAACc,UAAU,EAAE,EAAE;QACvB,IAAI,CAACuB,aAAa,GAAGrC,WAAW;QAEhC,IAAI,IAAI,CAAC5F,MAAM,CAAC+D,SAAS,CAAC,cAAc,CAAC,EAAE;UAC1C,IAAI,CAAC/D,MAAM,CAACmD,QAAQ,CAAC,cAAc,EAAE;YACpCC,IAAI,EAAE,cAAc;YACpBK,MAAM,EAAE,IAAI;YACZyE,SAAS,EAAEtC;WACX,CAAC;;QAGH,IAAI,CAACuC,WAAW,CAACvC,WAAW,CAAC;QAC7B,IAAI,CAACwC,cAAc,CAACxC,WAAW,CAAC;QAChC,IAAI,CAACyC,WAAW,EAAE;QAClB,IAAI,CAAC9C,OAAO,EAAE;QAEd,IAAI,IAAI,CAACvF,MAAM,CAAC+D,SAAS,CAAC,YAAY,CAAC,EAAE;UACxC,IAAI,CAAC/D,MAAM,CAACmD,QAAQ,CAAC,YAAY,EAAE;YAClCC,IAAI,EAAE,YAAY;YAClBK,MAAM,EAAE,IAAI;YACZyE,SAAS,EAAEtC;WACX,CAAC;;QAGH;QACA,IAAI,IAAI,CAACC,QAAQ,CAAClI,MAAM,KAAK,CAAC,IAC7B,IAAI,CAACqI,WAAW,CAACrI,MAAM,KAAK,CAAC,IAC7B,CAAC,IAAI,CAACyJ,QAAQ,EAAE;UAEhB,IAAI,CAACkB,OAAO,GAAG,IAAI;UACnB,IAAI,CAACL,aAAa,GAAG,IAAI;SAEzB,MAAM;UACNpM,GAAG,CAAC,IAAI,CAACC,GAAG,EAAE,IAAI,CAACwM,OAAQ,CAAC;;;IAG/B;;;;;;WAEA,SAAA9K,CAAA;MAAA,IAAAmD,KAAA;MACC,IAAI,IAAI,CAAC2H,OAAO,KAAK,IAAI,EAAE;QAC1B,IAAI,CAACL,aAAa,GAAG,IAAI;QAEzB,IAAI,CAACK,OAAO,GAAG,UAAC1C,WAAW;UAC1BjF,KAAI,CAAC4H,UAAU,CAAC3C,WAAW,CAAC;QAC7B,CAAC;QAED/J,GAAG,CAAC,IAAI,CAACC,GAAG,EAAE,IAAI,CAACwM,OAAQ,CAAC;;IAE9B;;;;;;WAEA,SAAA9K,CAAuBwJ,MAAc;MACpC,IAAI,IAAI,CAACD,MAAM,CAACC,MAAM,CAACL,GAAG,CAAC,KAAK/D,SAAS,EAAE;QAC1C,IAAI,CAACwE,QAAQ,GAAG,IAAI;QACpB,IAAI,CAACL,MAAM,CAACC,MAAM,CAACL,GAAG,CAAC,GAAGK,MAAM;QAChC,IAAI,CAACpC,YAAY,EAAE;;IAErB;;;;;;WAEA,SAAApH,CAAuBiJ,MAAe;MACrC,IAAI,IAAI,CAACH,aAAa,CAACG,MAAM,CAACE,GAAG,CAAC,KAAK/D,SAAS,EAAE;QACjD,IAAI,CAACwE,QAAQ,GAAG,IAAI;QACpB,IAAI,CAAChB,eAAe,GAAG,IAAI;QAC3B,IAAI,CAACE,aAAa,CAACG,MAAM,CAACE,GAAG,CAAC,GAAGF,MAAM;QACvC,IAAI,CAAC7B,YAAY,EAAE;;IAErB;;;;;;WAEA,SAAApH,CAAuBwJ,MAAe;MACrC,IAAI,IAAI,CAACO,YAAY,CAACP,MAAM,CAACL,GAAG,CAAC,KAAK/D,SAAS,EAAE;QAChD,IAAI,CAACwE,QAAQ,GAAG,IAAI;QACpB,IAAI,CAACG,YAAY,CAACP,MAAM,CAACL,GAAG,CAAC,GAAGK,MAAM;QACtC,IAAI,CAACpC,YAAY,EAAE;;IAErB;;;;;;WAEA,SAAApH,CAAyBsK,MAAc;MACtC,IAAI,IAAI,CAACD,eAAe,CAACC,MAAM,CAACnB,GAAG,CAAC,KAAK/D,SAAS,EAAE;QACnD,IAAI,CAACwE,QAAQ,GAAG,IAAI;QACpB,IAAI,CAACS,eAAe,CAACC,MAAM,CAACnB,GAAG,CAAC,GAAGmB,MAAM;QACzC,IAAI,CAAClD,YAAY,EAAE;;IAErB;;;;;;WAEA,SAAApH,CAAqByI,SAAqB;MACzC;MACA,IAAI,IAAI,CAACD,WAAW,CAACvB,OAAO,CAACwB,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE;QAC/C,IAAI,CAACD,WAAW,CAACzI,IAAI,CAAC0I,SAAS,CAAC;QAChC,IAAI,CAACrB,YAAY,EAAE;;IAErB;;;;;;WAEA,SAAApH,CAAiBsI,CAAgC;MAAjD,IAAAnF,KAAA;MACC,IAAI,CAACkF,QAAQ,CAACtI,IAAI,CAACuI,CAAC,CAAC;MACrB,IAAI,CAAClB,YAAY,EAAE;MAEnB,OAAO,IAAItK,QAAQ,CAAC;QACnBmB,MAAM,CAAC+M,WAAW,CAAC7H,KAAI,CAACkF,QAAQ,EAAEC,CAAC,CAAC;MACrC,CAAC,CAAC;IACH;;EAEA;;;;;;;;;WAKA,SAAAtI,CAAA;MACC,OAAO,IAAI,CAACf,GAAG,CAACwE,WAAW;IAC5B;;EAEA;;;;;;;;;WAKA,SAAAzD,CAAA;MACC,OAAO,IAAI,CAACf,GAAG,CAAC0E,YAAY;IAC7B;;EAEA;;;;;;;WAGA,SAAA3D,CAAA;MACC,IAAI,CAAC,IAAI,CAACiL,WAAW,EAAE;QACtB,IAAI,CAACA,WAAW,GAAG,IAAI;QAEvB,IAAI,CAAC1K,cAAc,CAACmH,OAAO,EAAE;QAC7B,IAAI,CAACrE,SAAS,CAACqE,OAAO,EAAE;QACxB,IAAI,CAACwD,gBAAgB,CAACxD,OAAO,EAAE;QAC/B,IAAI,CAACyD,cAAc,CAACzD,OAAO,EAAE;QAC7B,IAAI,CAAClI,eAAe,CAACkI,OAAO,EAAE;QAE9BzJ,MAAM,CAACoB,IAAI,CAAC,IAAI,CAACwF,UAAU,EAAE,UAACuB,CAAC;UAC9BA,CAAC,CAACsB,OAAO,EAAE;QACZ,CAAC,CAAC;QAEF,IAAI,IAAI,CAAC5H,MAAM,EAAE;UAChB3B,MAAM,CAACiN,aAAa,CAAC,IAAI,CAACtL,MAAM,CAAC;;QAGlC7B,MAAM,CAACoN,MAAM,CAACtN,QAAQ,CAACuB,YAAY,EAAE,IAAI,CAAC;;IAE5C;;EAEA;;;;;;;;;WAKA,SAAAU,CAAA;MACC,OAAO,IAAI,CAACiL,WAAW;IACxB;;EAEA;;;;;;;;;;WAMA,SAAAjL,CAAmBsL,IAAY;MAC9B,IAAI,CAAClH,mBAAoB,CAACmH,SAAS,GAAGD,IAAI;IAC3C;;EAEA;;;;;;;;;;WAMA,SAAAtL,CAAiBwL,MAAoB;MACpC,IAAI,CAACjL,cAAc,CAACgC,GAAG,CAAC,QAAQ,EAAEiJ,MAAM,CAAC;MAEzC;MACA,IAAM5K,gBAAgB,GAAG,IAAI,CAACA,gBAAgB;MAC9C,IAAIA,gBAAgB,EAAE;QACrBA,gBAAgB,CAAC6K,YAAY,EAAE;;MAGhC;MACA,IAAMjM,eAAe,GAAG,IAAI,CAACA,eAAe;MAC5C,IAAIA,eAAe,EAAE;QACpBA,eAAe,CAACiM,YAAY,EAAE;;IAEhC;;;;;;WAEA,SAAAzL,CAAA;MACC,IAAI,CAAC,IAAI,CAACY,gBAAgB,EAAE;QAC3B,IAAMA,gBAAgB,GAAG,IAAI,CAACL,cAAc,CAACM,QAAQ,CAACd,IAAI,CAACrD,SAAS,CAACqC,GAAG,CAAC,IAAI,EAAE;UAAEa,QAAQ,EAAE,UAAU;UAAE8L,UAAU,EAAE,KAAK;UAAElI,KAAK,EAAE7F,IAAI;UAAE+F,MAAM,EAAE/F,IAAI;UAAEgO,KAAK,EAAE;QAAG,CAAE,CAAC,CAAC;QACnK,IAAI,CAAC/K,gBAAgB,GAAGA,gBAAgB;QAExC,IAAMmB,OAAO,GAAG5E,OAAO,CAAC4B,GAAG,CAAC,IAAI,EAAE,EAAE,CAAC;QACrC,IAAI,CAAC8E,SAAS,CAACtB,GAAG,CAAC,SAAS,EAAER,OAAO,CAAC;QACtCA,OAAO,CAACtB,IAAI,CAAC,CAAC,CAAC;QACf,IAAI,CAACmL,QAAQ,GAAG7J,OAAO;;IAEzB;;EAEA;;;;;;;WAIA,SAAA/B,CAA8BiG,MAAc;MAC3C,IAAIA,MAAM,CAAC7D,GAAG,CAAC,WAAW,CAAC,EAAE;QAC5BnE,MAAM,CAAC4N,OAAO,CAAC,IAAI,CAAChF,WAAW,EAAEZ,MAAM,CAAC;OACxC,MACI;QACJhI,MAAM,CAACoN,MAAM,CAAC,IAAI,CAACxE,WAAW,EAAEZ,MAAM,CAAC;;MAExC,IAAI,CAAC6F,qBAAqB,EAAE;IAC7B;;;;;;WAEA,SAAA9L,CAAgCiG,MAAc;MAC7ChI,MAAM,CAACoN,MAAM,CAAC,IAAI,CAACxE,WAAW,EAAEZ,MAAM,CAAC;MACvC,IAAI,CAAC6F,qBAAqB,EAAE;IAC7B;;;;;;WAEA,SAAA9L,CAAA;MAAA,IAAAmD,KAAA;MAEC,IAAI,CAAC0D,WAAW,CAACoD,IAAI,CAAC,UAAChH,CAAS,EAAE8I,CAAS;QAC1C,IAAMC,MAAM,GAAG/I,CAAC,CAACb,GAAG,CAAC,eAAe,EAAE,CAAC,CAAC;QACxC,IAAM6J,MAAM,GAAGF,CAAC,CAAC3J,GAAG,CAAC,eAAe,EAAE,CAAC,CAAC;QACxC,IAAI4J,MAAM,IAAIC,MAAM,EAAE;UACrB,OAAO,CAAC;SACR,MACI,IAAID,MAAM,GAAGC,MAAM,EAAE;UACzB,OAAO,CAAC;SACR,MACI;UACJ,OAAO,CAAC,CAAC;;MAEX,CAAC,CAAC;MAEF,IAAMC,MAAM,GAA2B,EAAE;MACzCjO,MAAM,CAACoB,IAAI,CAAC,IAAI,CAACwH,WAAW,EAAE,UAACE,IAAI,EAAEC,KAAK;QACzC,IAAI,CAACD,IAAI,CAACvG,UAAU,CAAC,cAAc,CAAC,EAAE;UACrC2C,KAAI,CAACgJ,iBAAiB,CAACnF,KAAK,EAAED,IAAI,CAAC;SACnC,MACI;UACJ5D,KAAI,CAACiJ,iBAAiB,CAACpF,KAAK,EAAED,IAAI,CAAC;;QAEpC,IAAMsF,KAAK,GAAGtF,IAAI,CAAC3E,GAAG,CAAC,gBAAgB,CAAC;QACxC,IAAIiK,KAAK,EAAE;UACV,IAAIH,MAAM,CAACjF,OAAO,CAACoF,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE;YACjC;YACAtF,IAAI,CAACvG,UAAU,CAAC,cAAc,CAAE,CAACwD,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;WAC/D,MACI;YACJkI,MAAM,CAACnM,IAAI,CAACsM,KAAK,CAAC;;;MAGrB,CAAC,CAAC;IAEH;;;;;;WAEA,SAAArM,CAAA;MACC,IAAI,IAAI,CAACiF,cAAc,EAAE;QACxB,IAAI,CAACqH,qBAAqB,CAAC,IAAI,CAACrH,cAAc,CAAC;QAC/C,IAAI,CAACsH,qBAAqB,CAAC,IAAI,CAACtH,cAAc,CAAC;;IAEjD;;;;;;WAEA,SAAAjF,CAA6BiG,MAAc,EAAEuG,YAA6B;MAEzE;MACA,IAAI,CAACA,YAAY,EAAE;QAClBA,YAAY,GAAGvG,MAAM,CAACzF,UAAU,CAAC,cAAc,CAAE;;MAGlD,IAAI,CAACgM,YAAY,EAAE;QAClB;;MAGD,IAAIvG,MAAM,CAAC7D,GAAG,CAAC,SAAS,CAAC,IAAI6D,MAAM,CAAC7D,GAAG,CAAC,MAAM,CAAC,IAAI,SAAS,IAAI,CAAC6D,MAAM,CAACwG,QAAQ,EAAE,EAAE;QACnF,IAAID,YAAY,CAACE,YAAY,CAAC,UAAU,CAAC,IAAI,IAAI,EAAE;UAClDF,YAAY,CAACxI,YAAY,CAAC,UAAU,EAAE,EAAE,GAAG,IAAI,CAAC2I,QAAQ,CAAC;;OAE1D,MACI;QACJH,YAAY,CAACI,eAAe,CAAC,UAAU,CAAC;;MAGzC,IAAMC,IAAI,GAAG5G,MAAM,CAAC7D,GAAG,CAAC,MAAM,CAAC;MAC/B,IAAIyK,IAAI,EAAE;QACTL,YAAY,CAACxI,YAAY,CAAC,MAAM,EAAE6I,IAAI,CAAC;OACvC,MACI;QACJL,YAAY,CAACI,eAAe,CAAC,MAAM,CAAC;;MAGrC,IAAME,SAAS,GAAG7G,MAAM,CAAC7D,GAAG,CAAC,WAAW,CAAC;MACzC,IAAI0K,SAAS,EAAE;QACd,IAAM7K,KAAK,GAAGnE,cAAc,CAACmI,MAAM,EAAE6G,SAAS,CAAC;QAC/CN,YAAY,CAACxI,YAAY,CAAC,YAAY,EAAE/B,KAAK,CAAC;OAC9C,MACI;QACJuK,YAAY,CAACI,eAAe,CAAC,YAAY,CAAC;;MAG3C,IAAMG,QAAQ,GAAG9G,MAAM,CAAC7D,GAAG,CAAC,UAAU,CAAC;MACvC,IAAI2K,QAAQ,EAAE;QACbP,YAAY,CAACxI,YAAY,CAAC,WAAW,EAAE+I,QAAQ,CAAC;OAChD,MACI;QACJP,YAAY,CAACI,eAAe,CAAC,WAAW,CAAC;;MAG1C,IAAMI,WAAW,GAAG/G,MAAM,CAAC7D,GAAG,CAAC,aAAa,CAAC;MAC7C,IAAI4K,WAAW,IAAI,IAAI,EAAE;QACxBR,YAAY,CAACxI,YAAY,CAAC,cAAc,EAAEgJ,WAAW,GAAG,MAAM,GAAG,OAAO,CAAC;OACzE,MACI;QACJR,YAAY,CAACI,eAAe,CAAC,cAAc,CAAC;;MAG7C,IAAI3G,MAAM,CAAC7D,GAAG,CAAC,YAAY,CAAC,EAAE;QAC7BoK,YAAY,CAACxI,YAAY,CAAC,aAAa,EAAE,QAAQ,CAAC;OAClD,MACI;QACJwI,YAAY,CAACI,eAAe,CAAC,aAAa,CAAC;;MAG5C,IAAMK,eAAe,GAAGhH,MAAM,CAAC7D,GAAG,CAAC,iBAAiB,CAAC;MACrD,IAAI6K,eAAe,EAAE;QACpBT,YAAY,CAACxI,YAAY,CAAC,kBAAkB,EAAEiJ,eAAe,CAAC;OAC9D,MACI;QACJT,YAAY,CAACI,eAAe,CAAC,kBAAkB,CAAC;;MAGjD,IAAMM,YAAY,GAAGjH,MAAM,CAAC7D,GAAG,CAAC,cAAc,CAAC;MAC/C,IAAI8K,YAAY,EAAE;QACjBV,YAAY,CAACxI,YAAY,CAAC,eAAe,EAAEkJ,YAAY,CAAC;OACxD,MACI;QACJV,YAAY,CAACI,eAAe,CAAC,eAAe,CAAC;;MAG9C,IAAMO,aAAa,GAAGlH,MAAM,CAAC7D,GAAG,CAAC,eAAe,CAAC;MACjD,IAAI+K,aAAa,EAAE;QAClBX,YAAY,CAACxI,YAAY,CAAC,gBAAgB,EAAEmJ,aAAa,CAAC;OAC1D,MACI;QACJX,YAAY,CAACI,eAAe,CAAC,gBAAgB,CAAC;;IAEhD;;;;;;WAEA,SAAA5M,CAAyBgH,KAAa,EAAEf,MAAc;MAAtD,IAAA9C,KAAA;MAEC,IAAI8C,MAAM,CAACzF,UAAU,CAAC,cAAc,CAAC,EAAE;QACtC;;MAGD;MACA,IAAMgM,YAAY,GAAGrN,QAAQ,CAACO,aAAa,CAAC,KAAK,CAAC;MAClD,IAAIuG,MAAM,CAAC7D,GAAG,CAAC,MAAM,CAAC,IAAI,SAAS,EAAE;QACpCoK,YAAY,CAACY,QAAQ,GAAG,IAAI,CAACT,QAAQ;;MAEtCH,YAAY,CAAC7M,KAAK,CAACC,QAAQ,GAAG,UAAU;MACxCzB,MAAM,CAACsG,cAAc,CAAC+H,YAAY,EAAE,KAAK,CAAC;MAE1CvG,MAAM,CAAC6B,UAAU,CAAC,cAAc,EAAE0E,YAAY,CAAC;MAE/C,IAAI,CAACF,qBAAqB,CAACrG,MAAM,CAAC;MAElCuG,YAAY,CAAC1H,gBAAgB,CAAC,OAAO,EAAE,UAACC,EAAc;QACrD5B,KAAI,CAACkK,YAAY,CAACtI,EAAE,EAAEiC,KAAK,CAAC;MAC7B,CAAC,CAAC;MAEFwF,YAAY,CAAC1H,gBAAgB,CAAC,MAAM,EAAE,UAACC,EAAc;QACpD5B,KAAI,CAACmK,WAAW,CAACvI,EAAE,EAAEiC,KAAK,CAAC;MAC5B,CAAC,CAAC;MAEF,IAAI,CAACoF,iBAAiB,CAACpF,KAAK,EAAEf,MAAM,CAAC;IAEtC;;;;;;WAEA,SAAAjG,CAA2BiG,MAAc;MAExC;MACA,IAAMpC,SAAS,GAAG,IAAI,CAACa,sBAAuB;MAC9C,IAAM8H,YAAY,GAAGvG,MAAM,CAACzF,UAAU,CAAC,cAAc,CAAE;MACvDqD,SAAS,CAAC0J,WAAW,CAACf,YAAY,CAAC;IAEpC;;;;;;WAEA,SAAAxM,CAA4BgH,KAAa,EAAEf,MAAc;MAExD;MACA,IAAMpC,SAAS,GAAG,IAAI,CAACa,sBAAuB;MAC9C,IAAM8H,YAAY,GAAGvG,MAAM,CAACzF,UAAU,CAAC,cAAc,CAAE;MAEvD,IAAIgM,YAAY,KAAK,IAAI,CAAC9H,sBAAuB,CAAC7D,QAAQ,CAACmG,KAAK,CAAC,EAAE;QAClE;QACA;;MAGD,IAAMwG,IAAI,GAAG,IAAI,CAAC9I,sBAAuB,CAAC7D,QAAQ,CAACmG,KAAK,GAAG,CAAC,CAAC;MAC7D,IAAIwG,IAAI,EAAE;QACT3J,SAAS,CAAC4J,YAAY,CAACjB,YAAY,EAAEgB,IAAI,CAAC;OAC1C,MACI;QACJ3J,SAAS,CAAC6J,MAAM,CAAClB,YAAY,CAAC;;IAEhC;;;;;;WAEA,SAAAxM,CAAgCiG,MAAc;MAC7C,IAAM6D,MAAM,GAAG7D,MAAM,CAAC0H,YAAY,EAAE;MAEpC,IAAMnK,KAAK,GAAGsG,MAAM,CAAC8D,KAAK,IAAI9D,MAAM,CAACvF,IAAI,GAAG0B,MAAM,CAACzC,KAAK,EAAE,GAAGsG,MAAM,CAAC8D,KAAK,GAAG9D,MAAM,CAACvF,IAAI;MACvF,IAAMb,MAAM,GAAGoG,MAAM,CAAC3F,GAAG,IAAI2F,MAAM,CAAC+D,MAAM,GAAG5H,MAAM,CAACvC,MAAM,EAAE,GAAGoG,MAAM,CAAC+D,MAAM,GAAG/D,MAAM,CAAC3F,GAAG;MAEzF,IAAMqI,YAAY,GAAGvG,MAAM,CAACzF,UAAU,CAAC,cAAc,CAAE;MACvDgM,YAAY,CAAC7M,KAAK,CAACwE,GAAG,GAAI2F,MAAM,CAAC3F,GAAG,GAAG,CAAC,GAAI,IAAI;MAChDqI,YAAY,CAAC7M,KAAK,CAAC4E,IAAI,GAAIuF,MAAM,CAACvF,IAAI,GAAG,CAAC,GAAI,IAAI;MAClDiI,YAAY,CAAC7M,KAAK,CAAC6D,KAAK,GAAIA,KAAK,GAAG,CAAC,GAAI,IAAI;MAC7CgJ,YAAY,CAAC7M,KAAK,CAAC+D,MAAM,GAAIA,MAAM,GAAG,CAAC,GAAI,IAAI;IAEhD;;;;;;WAEA,SAAA1D,CAAuB+E,EAAc,EAAEiC,KAAa;MACnD;MACA,IAAM8G,OAAO,GAAG,IAAI,CAACjH,WAAW,CAACG,KAAK,CAAC;MAEvC;MACA,IAAI,CAACuF,qBAAqB,CAACuB,OAAO,CAAC;MACnC;MAEA,IAAI,CAAC7I,cAAc,GAAG6I,OAAO;MAE7B,IAAIA,OAAO,CAACtL,MAAM,CAAC+D,SAAS,CAAC,OAAO,CAAC,EAAE;QACtCuH,OAAO,CAACtL,MAAM,CAACmD,QAAQ,CAAC,OAAO,EAAE;UAChCC,IAAI,EAAE,OAAO;UACbC,aAAa,EAAEd,EAAE;UACjBkB,MAAM,EAAE6H;SACR,CAAC;;IAEJ;;;;;;WAEA,SAAA9N,CAAsB+E,EAAc,EAAEgJ,MAAc;MACnD,IAAMD,OAAO,GAAG,IAAI,CAAC7I,cAAc;MACnC,IAAI6I,OAAO,IAAIA,OAAO,CAACtL,MAAM,CAAC+D,SAAS,CAAC,MAAM,CAAC,EAAE;QAChDuH,OAAO,CAACtL,MAAM,CAACmD,QAAQ,CAAC,MAAM,EAAE;UAC/BC,IAAI,EAAE,MAAM;UACZC,aAAa,EAAEd,EAAE;UACjBkB,MAAM,EAAE6H;SACR,CAAC;;MAEH,IAAI,CAAC7I,cAAc,GAAGG,SAAS;IAChC;;EAEA;;;;;;;WAGA,SAAApF,CAAqBiG,MAAY;MAChC,IAAMqF,IAAI,GAAGrF,MAAM,CAAC+H,QAAQ,EAAE;MAC9B,IAAIC,cAAc,GAAGhI,MAAM,CAACzF,UAAU,CAAC,gBAAgB,CAAC;MACxD,IAAIyF,MAAM,CAAC7D,GAAG,CAAC,MAAM,CAAC,IAAI,SAAS,IAAIkJ,IAAI,IAAI,EAAE,EAAE;QAClD,IAAI,CAAC2C,cAAc,EAAE;UACpBA,cAAc,GAAG,IAAI,CAACC,mBAAmB,CAACjI,MAAM,CAAC;;QAElD,IAAIgI,cAAc,CAAC1C,SAAS,IAAID,IAAI,EAAE;UACrC2C,cAAc,CAAC1C,SAAS,GAAGD,IAAK;;OAEjC,MACI,IAAI2C,cAAc,EAAE;QACxBA,cAAc,CAAC5C,MAAM,EAAE;QACvBpF,MAAM,CAACkI,aAAa,CAAC,gBAAgB,CAAC;;IAExC;;;;;;WAEA,SAAAnO,CAA2BiG,MAAY;MACtC,IAAMpC,SAAS,GAAG,IAAI,CAACc,wBAAyB;MAChD,IAAMsJ,cAAc,GAAG9O,QAAQ,CAACO,aAAa,CAAC,KAAK,CAAC;MACpDuO,cAAc,CAACtO,KAAK,CAACC,QAAQ,GAAG,UAAU;MAC1CqO,cAAc,CAACtO,KAAK,CAACuE,OAAO,GAAG,WAAW;MAE1C/F,MAAM,CAACsG,cAAc,CAACwJ,cAAc,EAAE,KAAK,CAAC;MAE5C,IAAI,CAAC3B,qBAAqB,CAACrG,MAAM,EAAEgI,cAAc,CAAC;MAClDpK,SAAS,CAAC6J,MAAM,CAACO,cAAc,CAAC;MAChChI,MAAM,CAAC6B,UAAU,CAAC,gBAAgB,EAAEmG,cAAc,CAAC;MACnD,OAAOA,cAAc;IACtB;;;;;;WAEA,SAAAjO,CAAgCiG,MAAc;MAC7C,IAAI,CAACiC,kBAAkB,GAAG,IAAI;MAC9B,IAAMsE,YAAY,GAAGvG,MAAM,CAACzF,UAAU,CAAC,cAAc,CAAC;MACtD,IAAIyF,MAAM,CAAC7D,GAAG,CAAC,WAAW,CAAC,EAAE;QAC5B,IAAIoK,YAAY,EAAE;UACjB,IAAI,CAACF,qBAAqB,CAACrG,MAAM,CAAC;UAClC,IAAI,CAACsG,qBAAqB,CAACtG,MAAM,CAAC;;QAEnC;QACA;QACA;OACA,MACI,IAAIuG,YAAY,EAAE;QACtB,IAAI,CAAC4B,mBAAmB,CAACnI,MAAM,CAAC;;MAEjC;IACD;;EAEA;;;;;;;;;;WAMA,SAAAjG,CAAeiG,MAAc;MAC5B,OAAO,IAAI,CAAChB,cAAc,KAAKgB,MAAM;IACtC;;EAEA;;;;;;;;;;WAMA,SAAAjG,CAA2B+F,KAAa;MACvC,IAAMsI,IAAI,GAAG,IAAI,CAACpP,GAAG,CAACqP,qBAAqB,EAAE;MAC7C,OAAO;QACNlI,CAAC,EAAEL,KAAK,CAACK,CAAC,GAAGiI,IAAI,CAAC9J,IAAI;QACtBjD,CAAC,EAAEyE,KAAK,CAACzE,CAAC,GAAG+M,IAAI,CAAClK;OAClB;IACF;;EAEA;;;;;;;WAGA,SAAAnE,CAAwCuO,QAAW;MAClD,IAAI,CAAC1J,UAAU,CAAC9E,IAAI,CAACwO,QAAQ,CAAC;MAC9B,OAAOA,QAAQ;IAChB;;EAEA;;;;;;;;;;;;;;;;;WAaA,SAAAvO,CAAA;MACC,KAAK,IAAIwO,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGzQ,QAAQ,CAAC0Q,QAAQ,CAACtO,MAAM,EAAEqO,CAAC,EAAE,EAAE;QAClD,IAAIzQ,QAAQ,CAAC0Q,QAAQ,CAACD,CAAC,CAAC,CAACE,KAAK,CAAC,aAAa,CAAC,EAAE;UAC9C,OAAO,IAAI;;;MAGb,OAAO,KAAK;IACb;;EAED,OAAAhQ,IAAC;AAAD,CAAC,CArtCD"},"metadata":{},"sourceType":"module"}