{"ast":null,"code":"var _jsxFileName = \"/Users/dcurchin/Desktop/final/grocery-shop-ui/src/components/adminPanel/users/editAndAddNewUser/UserForm.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { Box, Button } from '@mui/material';\nimport { setEmailError, setPasswordError, setDisabledSaveButton, setAdminUsersError } from '../../../../redux/slices/adminUsers';\nimport Header from './Header';\nimport Email from './Email';\nimport Password from './Password';\nimport Role from './Role';\nimport Status from './Status';\nimport { useMutationSaveUser } from '../../../../hooks/useMutationSaveUser';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst userFormContainerStyle = {\n  boxSizing: 'border-box',\n  display: 'flex',\n  flexDirection: 'column',\n  flexWrap: 'wrap',\n  gap: 4,\n  paddingLeft: 4,\n  paddingRight: 4,\n  paddingTop: 2,\n  maxWidth: 616,\n  minWidth: 288\n};\nconst container3Style = {\n  display: 'flex',\n  gap: 3,\n  flexGrow: 1\n};\nconst buttonsContainerStyle = {\n  display: 'flex',\n  paddingBottom: '32px',\n  paddingTop: '8px',\n  marginLeft: '-10px'\n};\nconst buttonStyle = {\n  margin: '0 10px'\n};\nconst EMAIL_REGEX = /^\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/;\n\n// eslint-disable-next-line\nconst PASSWORD_REGEX = /^[a-zA-Z0-9!@#$%^&*()_+~`\\-=\\\\\\/|[\\]{};:'\",<.>?]*$/;\nconst UserForm = _ref => {\n  _s();\n  let {\n    newUser\n  } = _ref;\n  const dispatch = useDispatch();\n  const goBack = () => {\n    history.goBack();\n  };\n  const onSaveSuccess = () => {\n    goBack();\n  };\n  const onSaveError = err => {\n    dispatch(setAdminUsersError(err));\n  };\n  const mutationSaveUser = useMutationSaveUser(onSaveSuccess, onSaveError);\n  const history = useHistory();\n  const token = useSelector(state => state.auth.token);\n  const email = useSelector(state => state.adminUsers.email);\n  const password = useSelector(state => state.adminUsers.password);\n  const role = useSelector(state => state.adminUsers.role);\n  const status = useSelector(state => state.adminUsers.status);\n  const disabledSaveButton = useSelector(state => state.adminUsers.disabledSaveButton);\n  const emailRef = useRef();\n  useEffect(() => {\n    if (emailRef) {\n      var _emailRef$current;\n      (_emailRef$current = emailRef.current) === null || _emailRef$current === void 0 ? void 0 : _emailRef$current.children[0].focus();\n    }\n    dispatch(setEmailError(''));\n    dispatch(setPasswordError(''));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(() => {\n    if (email.trim() && password.trim()) {\n      dispatch(setDisabledSaveButton(false));\n    } else {\n      dispatch(setDisabledSaveButton(true));\n    }\n  }, [dispatch, email, password]);\n  const saveUser = async e => {\n    if (!EMAIL_REGEX.test(email)) {\n      dispatch(setEmailError('Please provide correct e-mail address'));\n      return;\n    }\n    if (email.length < 5 || email.length > 35) {\n      dispatch(setEmailError('Email address must be at least 5 characters long, maximum 35 characters long'));\n      return;\n    }\n    if (!PASSWORD_REGEX.test(password)) {\n      dispatch(setPasswordError('Password can only contain english letters, numbers and special characters, and must be at least 5 characters long, maximum 10 characters long'));\n      return;\n    }\n    if (password.length < 5 || password.length > 10) {\n      dispatch(setPasswordError('Password must be at least 5 characters long, maximum 10 characters long'));\n      return;\n    }\n    const user = {\n      email: email.toLowerCase(),\n      password,\n      role,\n      status\n    };\n    mutationSaveUser.mutate([newUser ? 'post' : 'put', user, token]);\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: userFormContainerStyle,\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      newUser: newUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Email, {\n      ref: emailRef,\n      newUser: newUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Password, {\n      newUser: newUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: container3Style,\n      children: [/*#__PURE__*/_jsxDEV(Role, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Status, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: buttonsContainerStyle,\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        sx: buttonStyle,\n        variant: \"outlined\",\n        onClick: goBack,\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        sx: buttonStyle,\n        variant: \"outlined\",\n        onClick: saveUser,\n        disabled: disabledSaveButton,\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 5\n  }, this);\n};\n_s(UserForm, \"P57a3FE2lNHQCkmJvf3fVVrSj5A=\", false, function () {\n  return [useDispatch, useMutationSaveUser, useHistory, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n_c = UserForm;\nexport default UserForm;\nvar _c;\n$RefreshReg$(_c, \"UserForm\");","map":{"version":3,"names":["useEffect","useRef","useSelector","useDispatch","useHistory","Box","Button","setEmailError","setPasswordError","setDisabledSaveButton","setAdminUsersError","Header","Email","Password","Role","Status","useMutationSaveUser","jsxDEV","_jsxDEV","userFormContainerStyle","boxSizing","display","flexDirection","flexWrap","gap","paddingLeft","paddingRight","paddingTop","maxWidth","minWidth","container3Style","flexGrow","buttonsContainerStyle","paddingBottom","marginLeft","buttonStyle","margin","EMAIL_REGEX","PASSWORD_REGEX","UserForm","_ref","_s","newUser","dispatch","goBack","history","onSaveSuccess","onSaveError","err","mutationSaveUser","token","state","auth","email","adminUsers","password","role","status","disabledSaveButton","emailRef","_emailRef$current","current","children","focus","trim","saveUser","e","test","length","user","toLowerCase","mutate","sx","fileName","_jsxFileName","lineNumber","columnNumber","ref","variant","onClick","disabled","_c","$RefreshReg$"],"sources":["/Users/dcurchin/Desktop/final/grocery-shop-ui/src/components/adminPanel/users/editAndAddNewUser/UserForm.jsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { Box, Button } from '@mui/material';\nimport {\n  setEmailError,\n  setPasswordError,\n  setDisabledSaveButton,\n  setAdminUsersError,\n} from '../../../../redux/slices/adminUsers';\nimport Header from './Header';\nimport Email from './Email';\nimport Password from './Password';\nimport Role from './Role';\nimport Status from './Status';\nimport { useMutationSaveUser } from '../../../../hooks/useMutationSaveUser';\n\nconst userFormContainerStyle = {\n  boxSizing: 'border-box',\n  display: 'flex',\n  flexDirection: 'column',\n  flexWrap: 'wrap',\n  gap: 4,\n  paddingLeft: 4,\n  paddingRight: 4,\n  paddingTop: 2,\n  maxWidth: 616,\n  minWidth: 288,\n};\n\nconst container3Style = { display: 'flex', gap: 3, flexGrow: 1 };\n\nconst buttonsContainerStyle = {\n  display: 'flex',\n  paddingBottom: '32px',\n  paddingTop: '8px',\n  marginLeft: '-10px',\n};\n\nconst buttonStyle = {\n  margin: '0 10px',\n};\n\nconst EMAIL_REGEX = /^\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/;\n\n// eslint-disable-next-line\nconst PASSWORD_REGEX = /^[a-zA-Z0-9!@#$%^&*()_+~`\\-=\\\\\\/|[\\]{};:'\",<.>?]*$/;\n\nconst UserForm = ({ newUser }) => {\n  const dispatch = useDispatch();\n\n  const goBack = () => {\n    history.goBack();\n  };\n\n  const onSaveSuccess = () => {\n    goBack();\n  };\n\n  const onSaveError = (err) => {\n    dispatch(setAdminUsersError(err));\n  };\n\n  const mutationSaveUser = useMutationSaveUser(onSaveSuccess, onSaveError);\n\n  const history = useHistory();\n\n  const token = useSelector((state) => state.auth.token);\n  const email = useSelector((state) => state.adminUsers.email);\n  const password = useSelector((state) => state.adminUsers.password);\n  const role = useSelector((state) => state.adminUsers.role);\n  const status = useSelector((state) => state.adminUsers.status);\n\n  const disabledSaveButton = useSelector(\n    (state) => state.adminUsers.disabledSaveButton\n  );\n\n  const emailRef = useRef();\n\n  useEffect(() => {\n    if (emailRef) {\n      emailRef.current?.children[0].focus();\n    }\n\n    dispatch(setEmailError(''));\n    dispatch(setPasswordError(''));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (email.trim() && password.trim()) {\n      dispatch(setDisabledSaveButton(false));\n    } else {\n      dispatch(setDisabledSaveButton(true));\n    }\n  }, [dispatch, email, password]);\n\n  const saveUser = async (e) => {\n    if (!EMAIL_REGEX.test(email)) {\n      dispatch(setEmailError('Please provide correct e-mail address'));\n      return;\n    }\n\n    if (email.length < 5 || email.length > 35) {\n      dispatch(\n        setEmailError(\n          'Email address must be at least 5 characters long, maximum 35 characters long'\n        )\n      );\n      return;\n    }\n\n    if (!PASSWORD_REGEX.test(password)) {\n      dispatch(\n        setPasswordError(\n          'Password can only contain english letters, numbers and special characters, and must be at least 5 characters long, maximum 10 characters long'\n        )\n      );\n      return;\n    }\n\n    if (password.length < 5 || password.length > 10) {\n      dispatch(\n        setPasswordError(\n          'Password must be at least 5 characters long, maximum 10 characters long'\n        )\n      );\n      return;\n    }\n\n    const user = {\n      email: email.toLowerCase(),\n      password,\n      role,\n      status,\n    };\n\n    mutationSaveUser.mutate([newUser ? 'post' : 'put', user, token]);\n  };\n\n  return (\n    <Box sx={userFormContainerStyle}>\n      <Header newUser={newUser} />\n      <Email ref={emailRef} newUser={newUser} />\n      <Password newUser={newUser} />\n      <Box sx={container3Style}>\n        <Role />\n        <Status />\n      </Box>\n      <Box sx={buttonsContainerStyle}>\n        <Button sx={buttonStyle} variant=\"outlined\" onClick={goBack}>\n          Cancel\n        </Button>\n        <Button\n          sx={buttonStyle}\n          variant=\"outlined\"\n          onClick={saveUser}\n          disabled={disabledSaveButton}\n        >\n          Save\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n\nexport default UserForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}