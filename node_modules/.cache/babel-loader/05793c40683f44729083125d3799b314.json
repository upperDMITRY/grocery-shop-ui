{"ast":null,"code":"import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { difference, replaceAt } from './utils';\nimport { notifyManager } from './notifyManager';\nimport { QueryObserver } from './queryObserver';\nimport { Subscribable } from './subscribable';\nexport var QueriesObserver = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(QueriesObserver, _Subscribable);\n  function QueriesObserver(client, queries) {\n    var _this;\n    _this = _Subscribable.call(this) || this;\n    _this.client = client;\n    _this.queries = [];\n    _this.result = [];\n    _this.observers = [];\n    _this.observersMap = {};\n    if (queries) {\n      _this.setQueries(queries);\n    }\n    return _this;\n  }\n  var _proto = QueriesObserver.prototype;\n  _proto.onSubscribe = function onSubscribe() {\n    var _this2 = this;\n    if (this.listeners.length === 1) {\n      this.observers.forEach(function (observer) {\n        observer.subscribe(function (result) {\n          _this2.onUpdate(observer, result);\n        });\n      });\n    }\n  };\n  _proto.onUnsubscribe = function onUnsubscribe() {\n    if (!this.listeners.length) {\n      this.destroy();\n    }\n  };\n  _proto.destroy = function destroy() {\n    this.listeners = [];\n    this.observers.forEach(function (observer) {\n      observer.destroy();\n    });\n  };\n  _proto.setQueries = function setQueries(queries, notifyOptions) {\n    this.queries = queries;\n    this.updateObservers(notifyOptions);\n  };\n  _proto.getCurrentResult = function getCurrentResult() {\n    return this.result;\n  };\n  _proto.getOptimisticResult = function getOptimisticResult(queries) {\n    var _this3 = this;\n    return queries.map(function (options, index) {\n      var defaultedOptions = _this3.client.defaultQueryObserverOptions(options);\n      return _this3.getObserver(defaultedOptions, index).getOptimisticResult(defaultedOptions);\n    });\n  };\n  _proto.getObserver = function getObserver(options, index) {\n    var _currentObserver;\n    var defaultedOptions = this.client.defaultQueryObserverOptions(options);\n    var currentObserver = this.observersMap[defaultedOptions.queryHash];\n    if (!currentObserver && defaultedOptions.keepPreviousData) {\n      currentObserver = this.observers[index];\n    }\n    return (_currentObserver = currentObserver) != null ? _currentObserver : new QueryObserver(this.client, defaultedOptions);\n  };\n  _proto.updateObservers = function updateObservers(notifyOptions) {\n    var _this4 = this;\n    notifyManager.batch(function () {\n      var hasIndexChange = false;\n      var prevObservers = _this4.observers;\n      var prevObserversMap = _this4.observersMap;\n      var newResult = [];\n      var newObservers = [];\n      var newObserversMap = {};\n      _this4.queries.forEach(function (options, i) {\n        var defaultedOptions = _this4.client.defaultQueryObserverOptions(options);\n        var queryHash = defaultedOptions.queryHash;\n        var observer = _this4.getObserver(defaultedOptions, i);\n        if (prevObserversMap[queryHash] || defaultedOptions.keepPreviousData) {\n          observer.setOptions(defaultedOptions, notifyOptions);\n        }\n        if (observer !== prevObservers[i]) {\n          hasIndexChange = true;\n        }\n        newObservers.push(observer);\n        newResult.push(observer.getCurrentResult());\n        newObserversMap[queryHash] = observer;\n      });\n      if (prevObservers.length === newObservers.length && !hasIndexChange) {\n        return;\n      }\n      _this4.observers = newObservers;\n      _this4.observersMap = newObserversMap;\n      _this4.result = newResult;\n      if (!_this4.hasListeners()) {\n        return;\n      }\n      difference(prevObservers, newObservers).forEach(function (observer) {\n        observer.destroy();\n      });\n      difference(newObservers, prevObservers).forEach(function (observer) {\n        observer.subscribe(function (result) {\n          _this4.onUpdate(observer, result);\n        });\n      });\n      _this4.notify();\n    });\n  };\n  _proto.onUpdate = function onUpdate(observer, result) {\n    var index = this.observers.indexOf(observer);\n    if (index !== -1) {\n      this.result = replaceAt(this.result, index, result);\n      this.notify();\n    }\n  };\n  _proto.notify = function notify() {\n    var _this5 = this;\n    notifyManager.batch(function () {\n      _this5.listeners.forEach(function (listener) {\n        listener(_this5.result);\n      });\n    });\n  };\n  return QueriesObserver;\n}(Subscribable);","map":{"version":3,"names":["_inheritsLoose","difference","replaceAt","notifyManager","QueryObserver","Subscribable","QueriesObserver","_Subscribable","client","queries","_this","call","result","observers","observersMap","setQueries","_proto","prototype","onSubscribe","_this2","listeners","length","forEach","observer","subscribe","onUpdate","onUnsubscribe","destroy","notifyOptions","updateObservers","getCurrentResult","getOptimisticResult","_this3","map","options","index","defaultedOptions","defaultQueryObserverOptions","getObserver","_currentObserver","currentObserver","queryHash","keepPreviousData","_this4","batch","hasIndexChange","prevObservers","prevObserversMap","newResult","newObservers","newObserversMap","i","setOptions","push","hasListeners","notify","indexOf","_this5","listener"],"sources":["/Users/dcurchin/Desktop/final/grocery-shop-ui/node_modules/react-query/es/core/queriesObserver.js"],"sourcesContent":["import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { difference, replaceAt } from './utils';\nimport { notifyManager } from './notifyManager';\nimport { QueryObserver } from './queryObserver';\nimport { Subscribable } from './subscribable';\nexport var QueriesObserver = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(QueriesObserver, _Subscribable);\n\n  function QueriesObserver(client, queries) {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.client = client;\n    _this.queries = [];\n    _this.result = [];\n    _this.observers = [];\n    _this.observersMap = {};\n\n    if (queries) {\n      _this.setQueries(queries);\n    }\n\n    return _this;\n  }\n\n  var _proto = QueriesObserver.prototype;\n\n  _proto.onSubscribe = function onSubscribe() {\n    var _this2 = this;\n\n    if (this.listeners.length === 1) {\n      this.observers.forEach(function (observer) {\n        observer.subscribe(function (result) {\n          _this2.onUpdate(observer, result);\n        });\n      });\n    }\n  };\n\n  _proto.onUnsubscribe = function onUnsubscribe() {\n    if (!this.listeners.length) {\n      this.destroy();\n    }\n  };\n\n  _proto.destroy = function destroy() {\n    this.listeners = [];\n    this.observers.forEach(function (observer) {\n      observer.destroy();\n    });\n  };\n\n  _proto.setQueries = function setQueries(queries, notifyOptions) {\n    this.queries = queries;\n    this.updateObservers(notifyOptions);\n  };\n\n  _proto.getCurrentResult = function getCurrentResult() {\n    return this.result;\n  };\n\n  _proto.getOptimisticResult = function getOptimisticResult(queries) {\n    var _this3 = this;\n\n    return queries.map(function (options, index) {\n      var defaultedOptions = _this3.client.defaultQueryObserverOptions(options);\n\n      return _this3.getObserver(defaultedOptions, index).getOptimisticResult(defaultedOptions);\n    });\n  };\n\n  _proto.getObserver = function getObserver(options, index) {\n    var _currentObserver;\n\n    var defaultedOptions = this.client.defaultQueryObserverOptions(options);\n    var currentObserver = this.observersMap[defaultedOptions.queryHash];\n\n    if (!currentObserver && defaultedOptions.keepPreviousData) {\n      currentObserver = this.observers[index];\n    }\n\n    return (_currentObserver = currentObserver) != null ? _currentObserver : new QueryObserver(this.client, defaultedOptions);\n  };\n\n  _proto.updateObservers = function updateObservers(notifyOptions) {\n    var _this4 = this;\n\n    notifyManager.batch(function () {\n      var hasIndexChange = false;\n      var prevObservers = _this4.observers;\n      var prevObserversMap = _this4.observersMap;\n      var newResult = [];\n      var newObservers = [];\n      var newObserversMap = {};\n\n      _this4.queries.forEach(function (options, i) {\n        var defaultedOptions = _this4.client.defaultQueryObserverOptions(options);\n\n        var queryHash = defaultedOptions.queryHash;\n\n        var observer = _this4.getObserver(defaultedOptions, i);\n\n        if (prevObserversMap[queryHash] || defaultedOptions.keepPreviousData) {\n          observer.setOptions(defaultedOptions, notifyOptions);\n        }\n\n        if (observer !== prevObservers[i]) {\n          hasIndexChange = true;\n        }\n\n        newObservers.push(observer);\n        newResult.push(observer.getCurrentResult());\n        newObserversMap[queryHash] = observer;\n      });\n\n      if (prevObservers.length === newObservers.length && !hasIndexChange) {\n        return;\n      }\n\n      _this4.observers = newObservers;\n      _this4.observersMap = newObserversMap;\n      _this4.result = newResult;\n\n      if (!_this4.hasListeners()) {\n        return;\n      }\n\n      difference(prevObservers, newObservers).forEach(function (observer) {\n        observer.destroy();\n      });\n      difference(newObservers, prevObservers).forEach(function (observer) {\n        observer.subscribe(function (result) {\n          _this4.onUpdate(observer, result);\n        });\n      });\n\n      _this4.notify();\n    });\n  };\n\n  _proto.onUpdate = function onUpdate(observer, result) {\n    var index = this.observers.indexOf(observer);\n\n    if (index !== -1) {\n      this.result = replaceAt(this.result, index, result);\n      this.notify();\n    }\n  };\n\n  _proto.notify = function notify() {\n    var _this5 = this;\n\n    notifyManager.batch(function () {\n      _this5.listeners.forEach(function (listener) {\n        listener(_this5.result);\n      });\n    });\n  };\n\n  return QueriesObserver;\n}(Subscribable);"],"mappings":"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"},"metadata":{},"sourceType":"module"}