{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dcurchin/Desktop/final/grocery-shop-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/dcurchin/Desktop/final/grocery-shop-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/dcurchin/Desktop/final/grocery-shop-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Box}from'@mui/system';import axios from'axios';import{useEffect,useState}from'react';import{useSelector}from'react-redux';import Dashboard from'../../../components/adminPanel/dashboard/Dashboard';import DashboardError from'../../../components/adminPanel/dashboard/DashboardError';import PanelTitle from'../../../components/adminPanel/dashboard/PanelTitle';import Spinner from'../../../components/common/Spinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DashboardContainer=function DashboardContainer(_ref){var setActive=_ref.setActive,active=_ref.active;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState({newUserRegistrations:0,uniqueUsers:0,newOrders:0,incompleteOrders:0,mostSoldProducts:[]}),_useState6=_slicedToArray(_useState5,2),data=_useState6[0],setData=_useState6[1];var token=useSelector(function(state){return state.auth.token;});useEffect(function(){setActive('dashboard');},[setActive]);var getData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios({method:'GET',url:'/api/dashboard',headers:{Authorization:token}});case 3:response=_context.sent;if(response.status===200){setIsLoading(false);setData(response.data);}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);if(axios.isAxiosError(_context.t0)){if(_context.t0&&_context.t0.response){if(_context.t0.response.data.error){setError(_context.t0.response.data.error);}if(_context.t0.response.data.status){setError(_context.t0.response.data.status);}setIsLoading(false);}}case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getData(){return _ref2.apply(this,arguments);};}();useEffect(function(){getData();// eslint-disable-next-line\n},[]);return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(PanelTitle,{title:'Dashboard',icon:active}),isLoading?/*#__PURE__*/_jsx(Spinner,{margin:'200px',size:'100px'}):error?/*#__PURE__*/_jsx(DashboardError,{error:error}):/*#__PURE__*/_jsx(Dashboard,{data:data,active:active})]});};export default DashboardContainer;","map":{"version":3,"sources":["/Users/dcurchin/Desktop/final/grocery-shop-ui/src/pages/adminPanel/dashboard/DashboardContainer.jsx"],"names":["Box","axios","useEffect","useState","useSelector","Dashboard","DashboardError","PanelTitle","Spinner","DashboardContainer","setActive","active","isLoading","setIsLoading","error","setError","newUserRegistrations","uniqueUsers","newOrders","incompleteOrders","mostSoldProducts","data","setData","token","state","auth","getData","method","url","headers","Authorization","response","status","isAxiosError"],"mappings":"yeAAA,OAASA,GAAT,KAAoB,aAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,MAAOC,CAAAA,SAAP,KAAsB,oDAAtB,CACA,MAAOC,CAAAA,cAAP,KAA2B,yDAA3B,CACA,MAAOC,CAAAA,UAAP,KAAuB,qDAAvB,CACA,MAAOC,CAAAA,OAAP,KAAoB,oCAApB,C,wFAEA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,MAA2B,IAAxBC,CAAAA,SAAwB,MAAxBA,SAAwB,CAAbC,MAAa,MAAbA,MAAa,CACpD,cAAkCR,QAAQ,CAAC,IAAD,CAA1C,wCAAOS,SAAP,eAAkBC,YAAlB,eACA,eAA0BV,QAAQ,CAAC,EAAD,CAAlC,yCAAOW,KAAP,eAAcC,QAAd,eACA,eAAwBZ,QAAQ,CAAC,CAC/Ba,oBAAoB,CAAE,CADS,CAE/BC,WAAW,CAAE,CAFkB,CAG/BC,SAAS,CAAE,CAHoB,CAI/BC,gBAAgB,CAAE,CAJa,CAK/BC,gBAAgB,CAAE,EALa,CAAD,CAAhC,yCAAOC,IAAP,eAAaC,OAAb,eAQA,GAAMC,CAAAA,KAAK,CAAGnB,WAAW,CAAC,SAACoB,KAAD,QAAWA,CAAAA,KAAK,CAACC,IAAN,CAAWF,KAAtB,EAAD,CAAzB,CAEArB,SAAS,CAAC,UAAM,CACdQ,SAAS,CAAC,WAAD,CAAT,CACD,CAFQ,CAEN,CAACA,SAAD,CAFM,CAAT,CAIA,GAAMgB,CAAAA,OAAO,2FAAG,sLAEWzB,CAAAA,KAAK,CAAC,CAC3B0B,MAAM,CAAE,KADmB,CAE3BC,GAAG,CAAE,gBAFsB,CAG3BC,OAAO,CAAE,CAAEC,aAAa,CAAEP,KAAjB,CAHkB,CAAD,CAFhB,QAENQ,QAFM,eAOZ,GAAIA,QAAQ,CAACC,MAAT,GAAoB,GAAxB,CAA6B,CAC3BnB,YAAY,CAAC,KAAD,CAAZ,CACAS,OAAO,CAACS,QAAQ,CAACV,IAAV,CAAP,CACD,CAVW,+EAYZ,GAAIpB,KAAK,CAACgC,YAAN,aAAJ,CAA6B,CAC3B,GAAI,aAAO,YAAIF,QAAf,CAAyB,CACvB,GAAI,YAAIA,QAAJ,CAAaV,IAAb,CAAkBP,KAAtB,CAA6B,CAC3BC,QAAQ,CAAC,YAAIgB,QAAJ,CAAaV,IAAb,CAAkBP,KAAnB,CAAR,CACD,CACD,GAAI,YAAIiB,QAAJ,CAAaV,IAAb,CAAkBW,MAAtB,CAA8B,CAC5BjB,QAAQ,CAAC,YAAIgB,QAAJ,CAAaV,IAAb,CAAkBW,MAAnB,CAAR,CACD,CACDnB,YAAY,CAAC,KAAD,CAAZ,CACD,CACF,CAtBW,oEAAH,kBAAPa,CAAAA,OAAO,2CAAb,CAyBAxB,SAAS,CAAC,UAAM,CACdwB,OAAO,GACP;AACD,CAHQ,CAGN,EAHM,CAAT,CAKA,mBACE,MAAC,GAAD,yBACE,KAAC,UAAD,EAAY,KAAK,CAAE,WAAnB,CAAgC,IAAI,CAAEf,MAAtC,EADF,CAEGC,SAAS,cACR,KAAC,OAAD,EAAS,MAAM,CAAE,OAAjB,CAA0B,IAAI,CAAE,OAAhC,EADQ,CAENE,KAAK,cACP,KAAC,cAAD,EAAgB,KAAK,CAAEA,KAAvB,EADO,cAGP,KAAC,SAAD,EAAW,IAAI,CAAEO,IAAjB,CAAuB,MAAM,CAAEV,MAA/B,EAPJ,GADF,CAYD,CA3DD,CA6DA,cAAeF,CAAAA,kBAAf","sourcesContent":["import { Box } from '@mui/system';\r\nimport axios from 'axios';\r\nimport { useEffect, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport Dashboard from '../../../components/adminPanel/dashboard/Dashboard';\r\nimport DashboardError from '../../../components/adminPanel/dashboard/DashboardError';\r\nimport PanelTitle from '../../../components/adminPanel/dashboard/PanelTitle';\r\nimport Spinner from '../../../components/common/Spinner';\r\n\r\nconst DashboardContainer = ({ setActive, active }) => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [data, setData] = useState({\r\n    newUserRegistrations: 0,\r\n    uniqueUsers: 0,\r\n    newOrders: 0,\r\n    incompleteOrders: 0,\r\n    mostSoldProducts: [],\r\n  });\r\n\r\n  const token = useSelector((state) => state.auth.token);\r\n\r\n  useEffect(() => {\r\n    setActive('dashboard');\r\n  }, [setActive]);\r\n\r\n  const getData = async () => {\r\n    try {\r\n      const response = await axios({\r\n        method: 'GET',\r\n        url: '/api/dashboard',\r\n        headers: { Authorization: token },\r\n      });\r\n      if (response.status === 200) {\r\n        setIsLoading(false);\r\n        setData(response.data);\r\n      }\r\n    } catch (err) {\r\n      if (axios.isAxiosError(err)) {\r\n        if (err && err.response) {\r\n          if (err.response.data.error) {\r\n            setError(err.response.data.error);\r\n          }\r\n          if (err.response.data.status) {\r\n            setError(err.response.data.status);\r\n          }\r\n          setIsLoading(false);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    getData();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <Box>\r\n      <PanelTitle title={'Dashboard'} icon={active} />\r\n      {isLoading ? (\r\n        <Spinner margin={'200px'} size={'100px'} />\r\n      ) : error ? (\r\n        <DashboardError error={error} />\r\n      ) : (\r\n        <Dashboard data={data} active={active} />\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default DashboardContainer;\r\n"]},"metadata":{},"sourceType":"module"}